/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/@smithy+node-http-handler@3.3.3";
exports.ids = ["vendor-chunks/@smithy+node-http-handler@3.3.3"];
exports.modules = {

/***/ "(rsc)/../../../../node_modules/.pnpm/@smithy+node-http-handler@3.3.3/node_modules/@smithy/node-http-handler/dist-cjs/index.js":
/*!*******************************************************************************************************************************!*\
  !*** ../../../../node_modules/.pnpm/@smithy+node-http-handler@3.3.3/node_modules/@smithy/node-http-handler/dist-cjs/index.js ***!
  \*******************************************************************************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("var __create = Object.create;\nvar __defProp = Object.defineProperty;\nvar __getOwnPropDesc = Object.getOwnPropertyDescriptor;\nvar __getOwnPropNames = Object.getOwnPropertyNames;\nvar __getProtoOf = Object.getPrototypeOf;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __name = (target, value) => __defProp(target, \"name\", { value, configurable: true });\nvar __export = (target, all) => {\n  for (var name in all)\n    __defProp(target, name, { get: all[name], enumerable: true });\n};\nvar __copyProps = (to, from, except, desc) => {\n  if (from && typeof from === \"object\" || typeof from === \"function\") {\n    for (let key of __getOwnPropNames(from))\n      if (!__hasOwnProp.call(to, key) && key !== except)\n        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });\n  }\n  return to;\n};\nvar __toESM = (mod, isNodeMode, target) => (target = mod != null ? __create(__getProtoOf(mod)) : {}, __copyProps(\n  // If the importer is in node compatibility mode or this is not an ESM\n  // file that has been converted to a CommonJS file using a Babel-\n  // compatible transform (i.e. \"__esModule\" has not been set), then set\n  // \"default\" to the CommonJS \"module.exports\" for node compatibility.\n  isNodeMode || !mod || !mod.__esModule ? __defProp(target, \"default\", { value: mod, enumerable: true }) : target,\n  mod\n));\nvar __toCommonJS = (mod) => __copyProps(__defProp({}, \"__esModule\", { value: true }), mod);\n\n// src/index.ts\nvar src_exports = {};\n__export(src_exports, {\n  DEFAULT_REQUEST_TIMEOUT: () => DEFAULT_REQUEST_TIMEOUT,\n  NodeHttp2Handler: () => NodeHttp2Handler,\n  NodeHttpHandler: () => NodeHttpHandler,\n  streamCollector: () => streamCollector\n});\nmodule.exports = __toCommonJS(src_exports);\n\n// src/node-http-handler.ts\nvar import_protocol_http = __webpack_require__(/*! @smithy/protocol-http */ \"(rsc)/../../../../node_modules/.pnpm/@smithy+protocol-http@4.1.8/node_modules/@smithy/protocol-http/dist-es/index.js\");\nvar import_querystring_builder = __webpack_require__(/*! @smithy/querystring-builder */ \"(rsc)/../../../../node_modules/.pnpm/@smithy+querystring-builder@3.0.11/node_modules/@smithy/querystring-builder/dist-es/index.js\");\nvar import_http = __webpack_require__(/*! http */ \"http\");\nvar import_https = __webpack_require__(/*! https */ \"https\");\n\n// src/constants.ts\nvar NODEJS_TIMEOUT_ERROR_CODES = [\"ECONNRESET\", \"EPIPE\", \"ETIMEDOUT\"];\n\n// src/get-transformed-headers.ts\nvar getTransformedHeaders = /* @__PURE__ */ __name((headers) => {\n  const transformedHeaders = {};\n  for (const name of Object.keys(headers)) {\n    const headerValues = headers[name];\n    transformedHeaders[name] = Array.isArray(headerValues) ? headerValues.join(\",\") : headerValues;\n  }\n  return transformedHeaders;\n}, \"getTransformedHeaders\");\n\n// src/timing.ts\nvar timing = {\n  setTimeout: (cb, ms) => setTimeout(cb, ms),\n  clearTimeout: (timeoutId) => clearTimeout(timeoutId)\n};\n\n// src/set-connection-timeout.ts\nvar DEFER_EVENT_LISTENER_TIME = 1e3;\nvar setConnectionTimeout = /* @__PURE__ */ __name((request, reject, timeoutInMs = 0) => {\n  if (!timeoutInMs) {\n    return -1;\n  }\n  const registerTimeout = /* @__PURE__ */ __name((offset) => {\n    const timeoutId = timing.setTimeout(() => {\n      request.destroy();\n      reject(\n        Object.assign(new Error(`Socket timed out without establishing a connection within ${timeoutInMs} ms`), {\n          name: \"TimeoutError\"\n        })\n      );\n    }, timeoutInMs - offset);\n    const doWithSocket = /* @__PURE__ */ __name((socket) => {\n      if (socket == null ? void 0 : socket.connecting) {\n        socket.on(\"connect\", () => {\n          timing.clearTimeout(timeoutId);\n        });\n      } else {\n        timing.clearTimeout(timeoutId);\n      }\n    }, \"doWithSocket\");\n    if (request.socket) {\n      doWithSocket(request.socket);\n    } else {\n      request.on(\"socket\", doWithSocket);\n    }\n  }, \"registerTimeout\");\n  if (timeoutInMs < 2e3) {\n    registerTimeout(0);\n    return 0;\n  }\n  return timing.setTimeout(registerTimeout.bind(null, DEFER_EVENT_LISTENER_TIME), DEFER_EVENT_LISTENER_TIME);\n}, \"setConnectionTimeout\");\n\n// src/set-socket-keep-alive.ts\nvar DEFER_EVENT_LISTENER_TIME2 = 3e3;\nvar setSocketKeepAlive = /* @__PURE__ */ __name((request, { keepAlive, keepAliveMsecs }, deferTimeMs = DEFER_EVENT_LISTENER_TIME2) => {\n  if (keepAlive !== true) {\n    return -1;\n  }\n  const registerListener = /* @__PURE__ */ __name(() => {\n    if (request.socket) {\n      request.socket.setKeepAlive(keepAlive, keepAliveMsecs || 0);\n    } else {\n      request.on(\"socket\", (socket) => {\n        socket.setKeepAlive(keepAlive, keepAliveMsecs || 0);\n      });\n    }\n  }, \"registerListener\");\n  if (deferTimeMs === 0) {\n    registerListener();\n    return 0;\n  }\n  return timing.setTimeout(registerListener, deferTimeMs);\n}, \"setSocketKeepAlive\");\n\n// src/set-socket-timeout.ts\nvar DEFER_EVENT_LISTENER_TIME3 = 3e3;\nvar setSocketTimeout = /* @__PURE__ */ __name((request, reject, timeoutInMs = 0) => {\n  const registerTimeout = /* @__PURE__ */ __name((offset) => {\n    const timeout = timeoutInMs - offset;\n    const onTimeout = /* @__PURE__ */ __name(() => {\n      request.destroy();\n      reject(Object.assign(new Error(`Connection timed out after ${timeoutInMs} ms`), { name: \"TimeoutError\" }));\n    }, \"onTimeout\");\n    if (request.socket) {\n      request.socket.setTimeout(timeout, onTimeout);\n    } else {\n      request.setTimeout(timeout, onTimeout);\n    }\n  }, \"registerTimeout\");\n  if (0 < timeoutInMs && timeoutInMs < 6e3) {\n    registerTimeout(0);\n    return 0;\n  }\n  return timing.setTimeout(\n    registerTimeout.bind(null, timeoutInMs === 0 ? 0 : DEFER_EVENT_LISTENER_TIME3),\n    DEFER_EVENT_LISTENER_TIME3\n  );\n}, \"setSocketTimeout\");\n\n// src/write-request-body.ts\nvar import_stream = __webpack_require__(/*! stream */ \"stream\");\nvar MIN_WAIT_TIME = 1e3;\nasync function writeRequestBody(httpRequest, request, maxContinueTimeoutMs = MIN_WAIT_TIME) {\n  const headers = request.headers ?? {};\n  const expect = headers[\"Expect\"] || headers[\"expect\"];\n  let timeoutId = -1;\n  let sendBody = true;\n  if (expect === \"100-continue\") {\n    sendBody = await Promise.race([\n      new Promise((resolve) => {\n        timeoutId = Number(timing.setTimeout(resolve, Math.max(MIN_WAIT_TIME, maxContinueTimeoutMs)));\n      }),\n      new Promise((resolve) => {\n        httpRequest.on(\"continue\", () => {\n          timing.clearTimeout(timeoutId);\n          resolve(true);\n        });\n        httpRequest.on(\"response\", () => {\n          timing.clearTimeout(timeoutId);\n          resolve(false);\n        });\n        httpRequest.on(\"error\", () => {\n          timing.clearTimeout(timeoutId);\n          resolve(false);\n        });\n      })\n    ]);\n  }\n  if (sendBody) {\n    writeBody(httpRequest, request.body);\n  }\n}\n__name(writeRequestBody, \"writeRequestBody\");\nfunction writeBody(httpRequest, body) {\n  if (body instanceof import_stream.Readable) {\n    body.pipe(httpRequest);\n    return;\n  }\n  if (body) {\n    if (Buffer.isBuffer(body) || typeof body === \"string\") {\n      httpRequest.end(body);\n      return;\n    }\n    const uint8 = body;\n    if (typeof uint8 === \"object\" && uint8.buffer && typeof uint8.byteOffset === \"number\" && typeof uint8.byteLength === \"number\") {\n      httpRequest.end(Buffer.from(uint8.buffer, uint8.byteOffset, uint8.byteLength));\n      return;\n    }\n    httpRequest.end(Buffer.from(body));\n    return;\n  }\n  httpRequest.end();\n}\n__name(writeBody, \"writeBody\");\n\n// src/node-http-handler.ts\nvar DEFAULT_REQUEST_TIMEOUT = 0;\nvar _NodeHttpHandler = class _NodeHttpHandler {\n  constructor(options) {\n    this.socketWarningTimestamp = 0;\n    // Node http handler is hard-coded to http/1.1: https://github.com/nodejs/node/blob/ff5664b83b89c55e4ab5d5f60068fb457f1f5872/lib/_http_server.js#L286\n    this.metadata = { handlerProtocol: \"http/1.1\" };\n    this.configProvider = new Promise((resolve, reject) => {\n      if (typeof options === \"function\") {\n        options().then((_options) => {\n          resolve(this.resolveDefaultConfig(_options));\n        }).catch(reject);\n      } else {\n        resolve(this.resolveDefaultConfig(options));\n      }\n    });\n  }\n  /**\n   * @returns the input if it is an HttpHandler of any class,\n   * or instantiates a new instance of this handler.\n   */\n  static create(instanceOrOptions) {\n    if (typeof (instanceOrOptions == null ? void 0 : instanceOrOptions.handle) === \"function\") {\n      return instanceOrOptions;\n    }\n    return new _NodeHttpHandler(instanceOrOptions);\n  }\n  /**\n   * @internal\n   *\n   * @param agent - http(s) agent in use by the NodeHttpHandler instance.\n   * @param socketWarningTimestamp - last socket usage check timestamp.\n   * @param logger - channel for the warning.\n   * @returns timestamp of last emitted warning.\n   */\n  static checkSocketUsage(agent, socketWarningTimestamp, logger = console) {\n    var _a, _b, _c;\n    const { sockets, requests, maxSockets } = agent;\n    if (typeof maxSockets !== \"number\" || maxSockets === Infinity) {\n      return socketWarningTimestamp;\n    }\n    const interval = 15e3;\n    if (Date.now() - interval < socketWarningTimestamp) {\n      return socketWarningTimestamp;\n    }\n    if (sockets && requests) {\n      for (const origin in sockets) {\n        const socketsInUse = ((_a = sockets[origin]) == null ? void 0 : _a.length) ?? 0;\n        const requestsEnqueued = ((_b = requests[origin]) == null ? void 0 : _b.length) ?? 0;\n        if (socketsInUse >= maxSockets && requestsEnqueued >= 2 * maxSockets) {\n          (_c = logger == null ? void 0 : logger.warn) == null ? void 0 : _c.call(\n            logger,\n            `@smithy/node-http-handler:WARN - socket usage at capacity=${socketsInUse} and ${requestsEnqueued} additional requests are enqueued.\nSee https://docs.aws.amazon.com/sdk-for-javascript/v3/developer-guide/node-configuring-maxsockets.html\nor increase socketAcquisitionWarningTimeout=(millis) in the NodeHttpHandler config.`\n          );\n          return Date.now();\n        }\n      }\n    }\n    return socketWarningTimestamp;\n  }\n  resolveDefaultConfig(options) {\n    const { requestTimeout, connectionTimeout, socketTimeout, httpAgent, httpsAgent } = options || {};\n    const keepAlive = true;\n    const maxSockets = 50;\n    return {\n      connectionTimeout,\n      requestTimeout: requestTimeout ?? socketTimeout,\n      httpAgent: (() => {\n        if (httpAgent instanceof import_http.Agent || typeof (httpAgent == null ? void 0 : httpAgent.destroy) === \"function\") {\n          return httpAgent;\n        }\n        return new import_http.Agent({ keepAlive, maxSockets, ...httpAgent });\n      })(),\n      httpsAgent: (() => {\n        if (httpsAgent instanceof import_https.Agent || typeof (httpsAgent == null ? void 0 : httpsAgent.destroy) === \"function\") {\n          return httpsAgent;\n        }\n        return new import_https.Agent({ keepAlive, maxSockets, ...httpsAgent });\n      })(),\n      logger: console\n    };\n  }\n  destroy() {\n    var _a, _b, _c, _d;\n    (_b = (_a = this.config) == null ? void 0 : _a.httpAgent) == null ? void 0 : _b.destroy();\n    (_d = (_c = this.config) == null ? void 0 : _c.httpsAgent) == null ? void 0 : _d.destroy();\n  }\n  async handle(request, { abortSignal } = {}) {\n    if (!this.config) {\n      this.config = await this.configProvider;\n    }\n    return new Promise((_resolve, _reject) => {\n      let writeRequestBodyPromise = void 0;\n      const timeouts = [];\n      const resolve = /* @__PURE__ */ __name(async (arg) => {\n        await writeRequestBodyPromise;\n        timeouts.forEach(timing.clearTimeout);\n        _resolve(arg);\n      }, \"resolve\");\n      const reject = /* @__PURE__ */ __name(async (arg) => {\n        await writeRequestBodyPromise;\n        timeouts.forEach(timing.clearTimeout);\n        _reject(arg);\n      }, \"reject\");\n      if (!this.config) {\n        throw new Error(\"Node HTTP request handler config is not resolved\");\n      }\n      if (abortSignal == null ? void 0 : abortSignal.aborted) {\n        const abortError = new Error(\"Request aborted\");\n        abortError.name = \"AbortError\";\n        reject(abortError);\n        return;\n      }\n      const isSSL = request.protocol === \"https:\";\n      const agent = isSSL ? this.config.httpsAgent : this.config.httpAgent;\n      timeouts.push(\n        timing.setTimeout(\n          () => {\n            this.socketWarningTimestamp = _NodeHttpHandler.checkSocketUsage(\n              agent,\n              this.socketWarningTimestamp,\n              this.config.logger\n            );\n          },\n          this.config.socketAcquisitionWarningTimeout ?? (this.config.requestTimeout ?? 2e3) + (this.config.connectionTimeout ?? 1e3)\n        )\n      );\n      const queryString = (0, import_querystring_builder.buildQueryString)(request.query || {});\n      let auth = void 0;\n      if (request.username != null || request.password != null) {\n        const username = request.username ?? \"\";\n        const password = request.password ?? \"\";\n        auth = `${username}:${password}`;\n      }\n      let path = request.path;\n      if (queryString) {\n        path += `?${queryString}`;\n      }\n      if (request.fragment) {\n        path += `#${request.fragment}`;\n      }\n      let hostname = request.hostname ?? \"\";\n      if (hostname[0] === \"[\" && hostname.endsWith(\"]\")) {\n        hostname = request.hostname.slice(1, -1);\n      } else {\n        hostname = request.hostname;\n      }\n      const nodeHttpsOptions = {\n        headers: request.headers,\n        host: hostname,\n        method: request.method,\n        path,\n        port: request.port,\n        agent,\n        auth\n      };\n      const requestFunc = isSSL ? import_https.request : import_http.request;\n      const req = requestFunc(nodeHttpsOptions, (res) => {\n        const httpResponse = new import_protocol_http.HttpResponse({\n          statusCode: res.statusCode || -1,\n          reason: res.statusMessage,\n          headers: getTransformedHeaders(res.headers),\n          body: res\n        });\n        resolve({ response: httpResponse });\n      });\n      req.on(\"error\", (err) => {\n        if (NODEJS_TIMEOUT_ERROR_CODES.includes(err.code)) {\n          reject(Object.assign(err, { name: \"TimeoutError\" }));\n        } else {\n          reject(err);\n        }\n      });\n      if (abortSignal) {\n        const onAbort = /* @__PURE__ */ __name(() => {\n          req.destroy();\n          const abortError = new Error(\"Request aborted\");\n          abortError.name = \"AbortError\";\n          reject(abortError);\n        }, \"onAbort\");\n        if (typeof abortSignal.addEventListener === \"function\") {\n          const signal = abortSignal;\n          signal.addEventListener(\"abort\", onAbort, { once: true });\n          req.once(\"close\", () => signal.removeEventListener(\"abort\", onAbort));\n        } else {\n          abortSignal.onabort = onAbort;\n        }\n      }\n      timeouts.push(setConnectionTimeout(req, reject, this.config.connectionTimeout));\n      timeouts.push(setSocketTimeout(req, reject, this.config.requestTimeout));\n      const httpAgent = nodeHttpsOptions.agent;\n      if (typeof httpAgent === \"object\" && \"keepAlive\" in httpAgent) {\n        timeouts.push(\n          setSocketKeepAlive(req, {\n            // @ts-expect-error keepAlive is not public on httpAgent.\n            keepAlive: httpAgent.keepAlive,\n            // @ts-expect-error keepAliveMsecs is not public on httpAgent.\n            keepAliveMsecs: httpAgent.keepAliveMsecs\n          })\n        );\n      }\n      writeRequestBodyPromise = writeRequestBody(req, request, this.config.requestTimeout).catch((e) => {\n        timeouts.forEach(timing.clearTimeout);\n        return _reject(e);\n      });\n    });\n  }\n  updateHttpClientConfig(key, value) {\n    this.config = void 0;\n    this.configProvider = this.configProvider.then((config) => {\n      return {\n        ...config,\n        [key]: value\n      };\n    });\n  }\n  httpHandlerConfigs() {\n    return this.config ?? {};\n  }\n};\n__name(_NodeHttpHandler, \"NodeHttpHandler\");\nvar NodeHttpHandler = _NodeHttpHandler;\n\n// src/node-http2-handler.ts\n\n\nvar import_http22 = __webpack_require__(/*! http2 */ \"http2\");\n\n// src/node-http2-connection-manager.ts\nvar import_http2 = __toESM(__webpack_require__(/*! http2 */ \"http2\"));\n\n// src/node-http2-connection-pool.ts\nvar _NodeHttp2ConnectionPool = class _NodeHttp2ConnectionPool {\n  constructor(sessions) {\n    this.sessions = [];\n    this.sessions = sessions ?? [];\n  }\n  poll() {\n    if (this.sessions.length > 0) {\n      return this.sessions.shift();\n    }\n  }\n  offerLast(session) {\n    this.sessions.push(session);\n  }\n  contains(session) {\n    return this.sessions.includes(session);\n  }\n  remove(session) {\n    this.sessions = this.sessions.filter((s) => s !== session);\n  }\n  [Symbol.iterator]() {\n    return this.sessions[Symbol.iterator]();\n  }\n  destroy(connection) {\n    for (const session of this.sessions) {\n      if (session === connection) {\n        if (!session.destroyed) {\n          session.destroy();\n        }\n      }\n    }\n  }\n};\n__name(_NodeHttp2ConnectionPool, \"NodeHttp2ConnectionPool\");\nvar NodeHttp2ConnectionPool = _NodeHttp2ConnectionPool;\n\n// src/node-http2-connection-manager.ts\nvar _NodeHttp2ConnectionManager = class _NodeHttp2ConnectionManager {\n  constructor(config) {\n    this.sessionCache = /* @__PURE__ */ new Map();\n    this.config = config;\n    if (this.config.maxConcurrency && this.config.maxConcurrency <= 0) {\n      throw new RangeError(\"maxConcurrency must be greater than zero.\");\n    }\n  }\n  lease(requestContext, connectionConfiguration) {\n    const url = this.getUrlString(requestContext);\n    const existingPool = this.sessionCache.get(url);\n    if (existingPool) {\n      const existingSession = existingPool.poll();\n      if (existingSession && !this.config.disableConcurrency) {\n        return existingSession;\n      }\n    }\n    const session = import_http2.default.connect(url);\n    if (this.config.maxConcurrency) {\n      session.settings({ maxConcurrentStreams: this.config.maxConcurrency }, (err) => {\n        if (err) {\n          throw new Error(\n            \"Fail to set maxConcurrentStreams to \" + this.config.maxConcurrency + \"when creating new session for \" + requestContext.destination.toString()\n          );\n        }\n      });\n    }\n    session.unref();\n    const destroySessionCb = /* @__PURE__ */ __name(() => {\n      session.destroy();\n      this.deleteSession(url, session);\n    }, \"destroySessionCb\");\n    session.on(\"goaway\", destroySessionCb);\n    session.on(\"error\", destroySessionCb);\n    session.on(\"frameError\", destroySessionCb);\n    session.on(\"close\", () => this.deleteSession(url, session));\n    if (connectionConfiguration.requestTimeout) {\n      session.setTimeout(connectionConfiguration.requestTimeout, destroySessionCb);\n    }\n    const connectionPool = this.sessionCache.get(url) || new NodeHttp2ConnectionPool();\n    connectionPool.offerLast(session);\n    this.sessionCache.set(url, connectionPool);\n    return session;\n  }\n  /**\n   * Delete a session from the connection pool.\n   * @param authority The authority of the session to delete.\n   * @param session The session to delete.\n   */\n  deleteSession(authority, session) {\n    const existingConnectionPool = this.sessionCache.get(authority);\n    if (!existingConnectionPool) {\n      return;\n    }\n    if (!existingConnectionPool.contains(session)) {\n      return;\n    }\n    existingConnectionPool.remove(session);\n    this.sessionCache.set(authority, existingConnectionPool);\n  }\n  release(requestContext, session) {\n    var _a;\n    const cacheKey = this.getUrlString(requestContext);\n    (_a = this.sessionCache.get(cacheKey)) == null ? void 0 : _a.offerLast(session);\n  }\n  destroy() {\n    for (const [key, connectionPool] of this.sessionCache) {\n      for (const session of connectionPool) {\n        if (!session.destroyed) {\n          session.destroy();\n        }\n        connectionPool.remove(session);\n      }\n      this.sessionCache.delete(key);\n    }\n  }\n  setMaxConcurrentStreams(maxConcurrentStreams) {\n    if (maxConcurrentStreams && maxConcurrentStreams <= 0) {\n      throw new RangeError(\"maxConcurrentStreams must be greater than zero.\");\n    }\n    this.config.maxConcurrency = maxConcurrentStreams;\n  }\n  setDisableConcurrentStreams(disableConcurrentStreams) {\n    this.config.disableConcurrency = disableConcurrentStreams;\n  }\n  getUrlString(request) {\n    return request.destination.toString();\n  }\n};\n__name(_NodeHttp2ConnectionManager, \"NodeHttp2ConnectionManager\");\nvar NodeHttp2ConnectionManager = _NodeHttp2ConnectionManager;\n\n// src/node-http2-handler.ts\nvar _NodeHttp2Handler = class _NodeHttp2Handler {\n  constructor(options) {\n    this.metadata = { handlerProtocol: \"h2\" };\n    this.connectionManager = new NodeHttp2ConnectionManager({});\n    this.configProvider = new Promise((resolve, reject) => {\n      if (typeof options === \"function\") {\n        options().then((opts) => {\n          resolve(opts || {});\n        }).catch(reject);\n      } else {\n        resolve(options || {});\n      }\n    });\n  }\n  /**\n   * @returns the input if it is an HttpHandler of any class,\n   * or instantiates a new instance of this handler.\n   */\n  static create(instanceOrOptions) {\n    if (typeof (instanceOrOptions == null ? void 0 : instanceOrOptions.handle) === \"function\") {\n      return instanceOrOptions;\n    }\n    return new _NodeHttp2Handler(instanceOrOptions);\n  }\n  destroy() {\n    this.connectionManager.destroy();\n  }\n  async handle(request, { abortSignal } = {}) {\n    if (!this.config) {\n      this.config = await this.configProvider;\n      this.connectionManager.setDisableConcurrentStreams(this.config.disableConcurrentStreams || false);\n      if (this.config.maxConcurrentStreams) {\n        this.connectionManager.setMaxConcurrentStreams(this.config.maxConcurrentStreams);\n      }\n    }\n    const { requestTimeout, disableConcurrentStreams } = this.config;\n    return new Promise((_resolve, _reject) => {\n      var _a;\n      let fulfilled = false;\n      let writeRequestBodyPromise = void 0;\n      const resolve = /* @__PURE__ */ __name(async (arg) => {\n        await writeRequestBodyPromise;\n        _resolve(arg);\n      }, \"resolve\");\n      const reject = /* @__PURE__ */ __name(async (arg) => {\n        await writeRequestBodyPromise;\n        _reject(arg);\n      }, \"reject\");\n      if (abortSignal == null ? void 0 : abortSignal.aborted) {\n        fulfilled = true;\n        const abortError = new Error(\"Request aborted\");\n        abortError.name = \"AbortError\";\n        reject(abortError);\n        return;\n      }\n      const { hostname, method, port, protocol, query } = request;\n      let auth = \"\";\n      if (request.username != null || request.password != null) {\n        const username = request.username ?? \"\";\n        const password = request.password ?? \"\";\n        auth = `${username}:${password}@`;\n      }\n      const authority = `${protocol}//${auth}${hostname}${port ? `:${port}` : \"\"}`;\n      const requestContext = { destination: new URL(authority) };\n      const session = this.connectionManager.lease(requestContext, {\n        requestTimeout: (_a = this.config) == null ? void 0 : _a.sessionTimeout,\n        disableConcurrentStreams: disableConcurrentStreams || false\n      });\n      const rejectWithDestroy = /* @__PURE__ */ __name((err) => {\n        if (disableConcurrentStreams) {\n          this.destroySession(session);\n        }\n        fulfilled = true;\n        reject(err);\n      }, \"rejectWithDestroy\");\n      const queryString = (0, import_querystring_builder.buildQueryString)(query || {});\n      let path = request.path;\n      if (queryString) {\n        path += `?${queryString}`;\n      }\n      if (request.fragment) {\n        path += `#${request.fragment}`;\n      }\n      const req = session.request({\n        ...request.headers,\n        [import_http22.constants.HTTP2_HEADER_PATH]: path,\n        [import_http22.constants.HTTP2_HEADER_METHOD]: method\n      });\n      session.ref();\n      req.on(\"response\", (headers) => {\n        const httpResponse = new import_protocol_http.HttpResponse({\n          statusCode: headers[\":status\"] || -1,\n          headers: getTransformedHeaders(headers),\n          body: req\n        });\n        fulfilled = true;\n        resolve({ response: httpResponse });\n        if (disableConcurrentStreams) {\n          session.close();\n          this.connectionManager.deleteSession(authority, session);\n        }\n      });\n      if (requestTimeout) {\n        req.setTimeout(requestTimeout, () => {\n          req.close();\n          const timeoutError = new Error(`Stream timed out because of no activity for ${requestTimeout} ms`);\n          timeoutError.name = \"TimeoutError\";\n          rejectWithDestroy(timeoutError);\n        });\n      }\n      if (abortSignal) {\n        const onAbort = /* @__PURE__ */ __name(() => {\n          req.close();\n          const abortError = new Error(\"Request aborted\");\n          abortError.name = \"AbortError\";\n          rejectWithDestroy(abortError);\n        }, \"onAbort\");\n        if (typeof abortSignal.addEventListener === \"function\") {\n          const signal = abortSignal;\n          signal.addEventListener(\"abort\", onAbort, { once: true });\n          req.once(\"close\", () => signal.removeEventListener(\"abort\", onAbort));\n        } else {\n          abortSignal.onabort = onAbort;\n        }\n      }\n      req.on(\"frameError\", (type, code, id) => {\n        rejectWithDestroy(new Error(`Frame type id ${type} in stream id ${id} has failed with code ${code}.`));\n      });\n      req.on(\"error\", rejectWithDestroy);\n      req.on(\"aborted\", () => {\n        rejectWithDestroy(\n          new Error(`HTTP/2 stream is abnormally aborted in mid-communication with result code ${req.rstCode}.`)\n        );\n      });\n      req.on(\"close\", () => {\n        session.unref();\n        if (disableConcurrentStreams) {\n          session.destroy();\n        }\n        if (!fulfilled) {\n          rejectWithDestroy(new Error(\"Unexpected error: http2 request did not get a response\"));\n        }\n      });\n      writeRequestBodyPromise = writeRequestBody(req, request, requestTimeout);\n    });\n  }\n  updateHttpClientConfig(key, value) {\n    this.config = void 0;\n    this.configProvider = this.configProvider.then((config) => {\n      return {\n        ...config,\n        [key]: value\n      };\n    });\n  }\n  httpHandlerConfigs() {\n    return this.config ?? {};\n  }\n  /**\n   * Destroys a session.\n   * @param session The session to destroy.\n   */\n  destroySession(session) {\n    if (!session.destroyed) {\n      session.destroy();\n    }\n  }\n};\n__name(_NodeHttp2Handler, \"NodeHttp2Handler\");\nvar NodeHttp2Handler = _NodeHttp2Handler;\n\n// src/stream-collector/collector.ts\n\nvar _Collector = class _Collector extends import_stream.Writable {\n  constructor() {\n    super(...arguments);\n    this.bufferedBytes = [];\n  }\n  _write(chunk, encoding, callback) {\n    this.bufferedBytes.push(chunk);\n    callback();\n  }\n};\n__name(_Collector, \"Collector\");\nvar Collector = _Collector;\n\n// src/stream-collector/index.ts\nvar streamCollector = /* @__PURE__ */ __name((stream) => {\n  if (isReadableStreamInstance(stream)) {\n    return collectReadableStream(stream);\n  }\n  return new Promise((resolve, reject) => {\n    const collector = new Collector();\n    stream.pipe(collector);\n    stream.on(\"error\", (err) => {\n      collector.end();\n      reject(err);\n    });\n    collector.on(\"error\", reject);\n    collector.on(\"finish\", function() {\n      const bytes = new Uint8Array(Buffer.concat(this.bufferedBytes));\n      resolve(bytes);\n    });\n  });\n}, \"streamCollector\");\nvar isReadableStreamInstance = /* @__PURE__ */ __name((stream) => typeof ReadableStream === \"function\" && stream instanceof ReadableStream, \"isReadableStreamInstance\");\nasync function collectReadableStream(stream) {\n  const chunks = [];\n  const reader = stream.getReader();\n  let isDone = false;\n  let length = 0;\n  while (!isDone) {\n    const { done, value } = await reader.read();\n    if (value) {\n      chunks.push(value);\n      length += value.length;\n    }\n    isDone = done;\n  }\n  const collected = new Uint8Array(length);\n  let offset = 0;\n  for (const chunk of chunks) {\n    collected.set(chunk, offset);\n    offset += chunk.length;\n  }\n  return collected;\n}\n__name(collectReadableStream, \"collectReadableStream\");\n// Annotate the CommonJS export names for ESM import in node:\n\n0 && (0);\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzLy5wbnBtL0BzbWl0aHkrbm9kZS1odHRwLWhhbmRsZXJAMy4zLjMvbm9kZV9tb2R1bGVzL0BzbWl0aHkvbm9kZS1odHRwLWhhbmRsZXIvZGlzdC1janMvaW5kZXguanMiLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNERBQTRELDJCQUEyQjtBQUN2RjtBQUNBO0FBQ0EsOEJBQThCLGtDQUFrQztBQUNoRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCLDRGQUE0RjtBQUN6SDtBQUNBO0FBQ0E7QUFDQSxtR0FBbUc7QUFDbkc7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5RUFBeUUsOEJBQThCO0FBQ3ZHO0FBQ0E7QUFDQSxvREFBb0Qsa0JBQWtCLGFBQWE7O0FBRW5GO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEOztBQUVBO0FBQ0EsMkJBQTJCLG1CQUFPLENBQUMsbUpBQXVCO0FBQzFELGlDQUFpQyxtQkFBTyxDQUFDLHNLQUE2QjtBQUN0RSxrQkFBa0IsbUJBQU8sQ0FBQyxrQkFBTTtBQUNoQyxtQkFBbUIsbUJBQU8sQ0FBQyxvQkFBTzs7QUFFbEM7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkZBQTZGLGFBQWE7QUFDMUc7QUFDQSxTQUFTO0FBQ1Q7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsUUFBUTtBQUNSO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDOztBQUVEO0FBQ0E7QUFDQSw0REFBNEQsMkJBQTJCO0FBQ3ZGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDOztBQUVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUVBQW1FLGFBQWEsUUFBUSxzQkFBc0I7QUFDOUcsS0FBSztBQUNMO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQzs7QUFFRDtBQUNBLG9CQUFvQixtQkFBTyxDQUFDLHNCQUFRO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQjtBQUN0QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCxRQUFRO0FBQ1I7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLGdDQUFnQztBQUM1QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUVBQXlFLGNBQWMsTUFBTSxrQkFBa0I7QUFDL0c7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLDBFQUEwRTtBQUN0RjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1Q0FBdUMscUNBQXFDO0FBQzVFLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdDQUF3QyxzQ0FBc0M7QUFDOUUsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQkFBMEIsY0FBYyxJQUFJO0FBQzVDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBLDhGQUE4RjtBQUM5RjtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQixTQUFTLEdBQUcsU0FBUztBQUN2QztBQUNBO0FBQ0E7QUFDQSxvQkFBb0IsWUFBWTtBQUNoQztBQUNBO0FBQ0Esb0JBQW9CLGlCQUFpQjtBQUNyQztBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Qsa0JBQWtCLHdCQUF3QjtBQUMxQyxPQUFPO0FBQ1A7QUFDQTtBQUNBLHNDQUFzQyxzQkFBc0I7QUFDNUQsVUFBVTtBQUNWO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxzREFBc0QsWUFBWTtBQUNsRTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOzs7QUFHQSxvQkFBb0IsbUJBQU8sQ0FBQyxvQkFBTzs7QUFFbkM7QUFDQSwyQkFBMkIsbUJBQU8sQ0FBQyxvQkFBTzs7QUFFMUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCLGtEQUFrRDtBQUMzRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxzQkFBc0I7QUFDdEIsOERBQThEO0FBQzlEO0FBQ0E7QUFDQTtBQUNBLDRCQUE0QjtBQUM1QixTQUFTO0FBQ1QsUUFBUTtBQUNSLDZCQUE2QjtBQUM3QjtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMEJBQTBCLGNBQWMsSUFBSTtBQUM1QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksMkNBQTJDO0FBQ3ZEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWMsMENBQTBDO0FBQ3hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLFNBQVMsR0FBRyxTQUFTO0FBQ3ZDO0FBQ0EsMkJBQTJCLFNBQVMsSUFBSSxLQUFLLEVBQUUsU0FBUyxFQUFFLFdBQVcsS0FBSyxPQUFPO0FBQ2pGLCtCQUErQjtBQUMvQjtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQLHNGQUFzRjtBQUN0RjtBQUNBO0FBQ0Esb0JBQW9CLFlBQVk7QUFDaEM7QUFDQTtBQUNBLG9CQUFvQixpQkFBaUI7QUFDckM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQSxrQkFBa0Isd0JBQXdCO0FBQzFDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBLHdGQUF3RixnQkFBZ0I7QUFDeEc7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0Esc0RBQXNELFlBQVk7QUFDbEU7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxREFBcUQsTUFBTSxlQUFlLElBQUksdUJBQXVCLEtBQUs7QUFDMUcsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBLGlHQUFpRyxZQUFZO0FBQzdHO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxHQUFHO0FBQ0gsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSxjQUFjO0FBQzFCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLE1BQU0sQ0FLTCIsInNvdXJjZXMiOlsiL1VzZXJzL2VyaW5qZXJyaS9ub2RlX21vZHVsZXMvLnBucG0vQHNtaXRoeStub2RlLWh0dHAtaGFuZGxlckAzLjMuMy9ub2RlX21vZHVsZXMvQHNtaXRoeS9ub2RlLWh0dHAtaGFuZGxlci9kaXN0LWNqcy9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgX19jcmVhdGUgPSBPYmplY3QuY3JlYXRlO1xudmFyIF9fZGVmUHJvcCA9IE9iamVjdC5kZWZpbmVQcm9wZXJ0eTtcbnZhciBfX2dldE93blByb3BEZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcjtcbnZhciBfX2dldE93blByb3BOYW1lcyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzO1xudmFyIF9fZ2V0UHJvdG9PZiA9IE9iamVjdC5nZXRQcm90b3R5cGVPZjtcbnZhciBfX2hhc093blByb3AgPSBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5O1xudmFyIF9fbmFtZSA9ICh0YXJnZXQsIHZhbHVlKSA9PiBfX2RlZlByb3AodGFyZ2V0LCBcIm5hbWVcIiwgeyB2YWx1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH0pO1xudmFyIF9fZXhwb3J0ID0gKHRhcmdldCwgYWxsKSA9PiB7XG4gIGZvciAodmFyIG5hbWUgaW4gYWxsKVxuICAgIF9fZGVmUHJvcCh0YXJnZXQsIG5hbWUsIHsgZ2V0OiBhbGxbbmFtZV0sIGVudW1lcmFibGU6IHRydWUgfSk7XG59O1xudmFyIF9fY29weVByb3BzID0gKHRvLCBmcm9tLCBleGNlcHQsIGRlc2MpID0+IHtcbiAgaWYgKGZyb20gJiYgdHlwZW9mIGZyb20gPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIGZyb20gPT09IFwiZnVuY3Rpb25cIikge1xuICAgIGZvciAobGV0IGtleSBvZiBfX2dldE93blByb3BOYW1lcyhmcm9tKSlcbiAgICAgIGlmICghX19oYXNPd25Qcm9wLmNhbGwodG8sIGtleSkgJiYga2V5ICE9PSBleGNlcHQpXG4gICAgICAgIF9fZGVmUHJvcCh0bywga2V5LCB7IGdldDogKCkgPT4gZnJvbVtrZXldLCBlbnVtZXJhYmxlOiAhKGRlc2MgPSBfX2dldE93blByb3BEZXNjKGZyb20sIGtleSkpIHx8IGRlc2MuZW51bWVyYWJsZSB9KTtcbiAgfVxuICByZXR1cm4gdG87XG59O1xudmFyIF9fdG9FU00gPSAobW9kLCBpc05vZGVNb2RlLCB0YXJnZXQpID0+ICh0YXJnZXQgPSBtb2QgIT0gbnVsbCA/IF9fY3JlYXRlKF9fZ2V0UHJvdG9PZihtb2QpKSA6IHt9LCBfX2NvcHlQcm9wcyhcbiAgLy8gSWYgdGhlIGltcG9ydGVyIGlzIGluIG5vZGUgY29tcGF0aWJpbGl0eSBtb2RlIG9yIHRoaXMgaXMgbm90IGFuIEVTTVxuICAvLyBmaWxlIHRoYXQgaGFzIGJlZW4gY29udmVydGVkIHRvIGEgQ29tbW9uSlMgZmlsZSB1c2luZyBhIEJhYmVsLVxuICAvLyBjb21wYXRpYmxlIHRyYW5zZm9ybSAoaS5lLiBcIl9fZXNNb2R1bGVcIiBoYXMgbm90IGJlZW4gc2V0KSwgdGhlbiBzZXRcbiAgLy8gXCJkZWZhdWx0XCIgdG8gdGhlIENvbW1vbkpTIFwibW9kdWxlLmV4cG9ydHNcIiBmb3Igbm9kZSBjb21wYXRpYmlsaXR5LlxuICBpc05vZGVNb2RlIHx8ICFtb2QgfHwgIW1vZC5fX2VzTW9kdWxlID8gX19kZWZQcm9wKHRhcmdldCwgXCJkZWZhdWx0XCIsIHsgdmFsdWU6IG1vZCwgZW51bWVyYWJsZTogdHJ1ZSB9KSA6IHRhcmdldCxcbiAgbW9kXG4pKTtcbnZhciBfX3RvQ29tbW9uSlMgPSAobW9kKSA9PiBfX2NvcHlQcm9wcyhfX2RlZlByb3Aoe30sIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pLCBtb2QpO1xuXG4vLyBzcmMvaW5kZXgudHNcbnZhciBzcmNfZXhwb3J0cyA9IHt9O1xuX19leHBvcnQoc3JjX2V4cG9ydHMsIHtcbiAgREVGQVVMVF9SRVFVRVNUX1RJTUVPVVQ6ICgpID0+IERFRkFVTFRfUkVRVUVTVF9USU1FT1VULFxuICBOb2RlSHR0cDJIYW5kbGVyOiAoKSA9PiBOb2RlSHR0cDJIYW5kbGVyLFxuICBOb2RlSHR0cEhhbmRsZXI6ICgpID0+IE5vZGVIdHRwSGFuZGxlcixcbiAgc3RyZWFtQ29sbGVjdG9yOiAoKSA9PiBzdHJlYW1Db2xsZWN0b3Jcbn0pO1xubW9kdWxlLmV4cG9ydHMgPSBfX3RvQ29tbW9uSlMoc3JjX2V4cG9ydHMpO1xuXG4vLyBzcmMvbm9kZS1odHRwLWhhbmRsZXIudHNcbnZhciBpbXBvcnRfcHJvdG9jb2xfaHR0cCA9IHJlcXVpcmUoXCJAc21pdGh5L3Byb3RvY29sLWh0dHBcIik7XG52YXIgaW1wb3J0X3F1ZXJ5c3RyaW5nX2J1aWxkZXIgPSByZXF1aXJlKFwiQHNtaXRoeS9xdWVyeXN0cmluZy1idWlsZGVyXCIpO1xudmFyIGltcG9ydF9odHRwID0gcmVxdWlyZShcImh0dHBcIik7XG52YXIgaW1wb3J0X2h0dHBzID0gcmVxdWlyZShcImh0dHBzXCIpO1xuXG4vLyBzcmMvY29uc3RhbnRzLnRzXG52YXIgTk9ERUpTX1RJTUVPVVRfRVJST1JfQ09ERVMgPSBbXCJFQ09OTlJFU0VUXCIsIFwiRVBJUEVcIiwgXCJFVElNRURPVVRcIl07XG5cbi8vIHNyYy9nZXQtdHJhbnNmb3JtZWQtaGVhZGVycy50c1xudmFyIGdldFRyYW5zZm9ybWVkSGVhZGVycyA9IC8qIEBfX1BVUkVfXyAqLyBfX25hbWUoKGhlYWRlcnMpID0+IHtcbiAgY29uc3QgdHJhbnNmb3JtZWRIZWFkZXJzID0ge307XG4gIGZvciAoY29uc3QgbmFtZSBvZiBPYmplY3Qua2V5cyhoZWFkZXJzKSkge1xuICAgIGNvbnN0IGhlYWRlclZhbHVlcyA9IGhlYWRlcnNbbmFtZV07XG4gICAgdHJhbnNmb3JtZWRIZWFkZXJzW25hbWVdID0gQXJyYXkuaXNBcnJheShoZWFkZXJWYWx1ZXMpID8gaGVhZGVyVmFsdWVzLmpvaW4oXCIsXCIpIDogaGVhZGVyVmFsdWVzO1xuICB9XG4gIHJldHVybiB0cmFuc2Zvcm1lZEhlYWRlcnM7XG59LCBcImdldFRyYW5zZm9ybWVkSGVhZGVyc1wiKTtcblxuLy8gc3JjL3RpbWluZy50c1xudmFyIHRpbWluZyA9IHtcbiAgc2V0VGltZW91dDogKGNiLCBtcykgPT4gc2V0VGltZW91dChjYiwgbXMpLFxuICBjbGVhclRpbWVvdXQ6ICh0aW1lb3V0SWQpID0+IGNsZWFyVGltZW91dCh0aW1lb3V0SWQpXG59O1xuXG4vLyBzcmMvc2V0LWNvbm5lY3Rpb24tdGltZW91dC50c1xudmFyIERFRkVSX0VWRU5UX0xJU1RFTkVSX1RJTUUgPSAxZTM7XG52YXIgc2V0Q29ubmVjdGlvblRpbWVvdXQgPSAvKiBAX19QVVJFX18gKi8gX19uYW1lKChyZXF1ZXN0LCByZWplY3QsIHRpbWVvdXRJbk1zID0gMCkgPT4ge1xuICBpZiAoIXRpbWVvdXRJbk1zKSB7XG4gICAgcmV0dXJuIC0xO1xuICB9XG4gIGNvbnN0IHJlZ2lzdGVyVGltZW91dCA9IC8qIEBfX1BVUkVfXyAqLyBfX25hbWUoKG9mZnNldCkgPT4ge1xuICAgIGNvbnN0IHRpbWVvdXRJZCA9IHRpbWluZy5zZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIHJlcXVlc3QuZGVzdHJveSgpO1xuICAgICAgcmVqZWN0KFxuICAgICAgICBPYmplY3QuYXNzaWduKG5ldyBFcnJvcihgU29ja2V0IHRpbWVkIG91dCB3aXRob3V0IGVzdGFibGlzaGluZyBhIGNvbm5lY3Rpb24gd2l0aGluICR7dGltZW91dEluTXN9IG1zYCksIHtcbiAgICAgICAgICBuYW1lOiBcIlRpbWVvdXRFcnJvclwiXG4gICAgICAgIH0pXG4gICAgICApO1xuICAgIH0sIHRpbWVvdXRJbk1zIC0gb2Zmc2V0KTtcbiAgICBjb25zdCBkb1dpdGhTb2NrZXQgPSAvKiBAX19QVVJFX18gKi8gX19uYW1lKChzb2NrZXQpID0+IHtcbiAgICAgIGlmIChzb2NrZXQgPT0gbnVsbCA/IHZvaWQgMCA6IHNvY2tldC5jb25uZWN0aW5nKSB7XG4gICAgICAgIHNvY2tldC5vbihcImNvbm5lY3RcIiwgKCkgPT4ge1xuICAgICAgICAgIHRpbWluZy5jbGVhclRpbWVvdXQodGltZW91dElkKTtcbiAgICAgICAgfSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aW1pbmcuY2xlYXJUaW1lb3V0KHRpbWVvdXRJZCk7XG4gICAgICB9XG4gICAgfSwgXCJkb1dpdGhTb2NrZXRcIik7XG4gICAgaWYgKHJlcXVlc3Quc29ja2V0KSB7XG4gICAgICBkb1dpdGhTb2NrZXQocmVxdWVzdC5zb2NrZXQpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXF1ZXN0Lm9uKFwic29ja2V0XCIsIGRvV2l0aFNvY2tldCk7XG4gICAgfVxuICB9LCBcInJlZ2lzdGVyVGltZW91dFwiKTtcbiAgaWYgKHRpbWVvdXRJbk1zIDwgMmUzKSB7XG4gICAgcmVnaXN0ZXJUaW1lb3V0KDApO1xuICAgIHJldHVybiAwO1xuICB9XG4gIHJldHVybiB0aW1pbmcuc2V0VGltZW91dChyZWdpc3RlclRpbWVvdXQuYmluZChudWxsLCBERUZFUl9FVkVOVF9MSVNURU5FUl9USU1FKSwgREVGRVJfRVZFTlRfTElTVEVORVJfVElNRSk7XG59LCBcInNldENvbm5lY3Rpb25UaW1lb3V0XCIpO1xuXG4vLyBzcmMvc2V0LXNvY2tldC1rZWVwLWFsaXZlLnRzXG52YXIgREVGRVJfRVZFTlRfTElTVEVORVJfVElNRTIgPSAzZTM7XG52YXIgc2V0U29ja2V0S2VlcEFsaXZlID0gLyogQF9fUFVSRV9fICovIF9fbmFtZSgocmVxdWVzdCwgeyBrZWVwQWxpdmUsIGtlZXBBbGl2ZU1zZWNzIH0sIGRlZmVyVGltZU1zID0gREVGRVJfRVZFTlRfTElTVEVORVJfVElNRTIpID0+IHtcbiAgaWYgKGtlZXBBbGl2ZSAhPT0gdHJ1ZSkge1xuICAgIHJldHVybiAtMTtcbiAgfVxuICBjb25zdCByZWdpc3Rlckxpc3RlbmVyID0gLyogQF9fUFVSRV9fICovIF9fbmFtZSgoKSA9PiB7XG4gICAgaWYgKHJlcXVlc3Quc29ja2V0KSB7XG4gICAgICByZXF1ZXN0LnNvY2tldC5zZXRLZWVwQWxpdmUoa2VlcEFsaXZlLCBrZWVwQWxpdmVNc2VjcyB8fCAwKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmVxdWVzdC5vbihcInNvY2tldFwiLCAoc29ja2V0KSA9PiB7XG4gICAgICAgIHNvY2tldC5zZXRLZWVwQWxpdmUoa2VlcEFsaXZlLCBrZWVwQWxpdmVNc2VjcyB8fCAwKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfSwgXCJyZWdpc3Rlckxpc3RlbmVyXCIpO1xuICBpZiAoZGVmZXJUaW1lTXMgPT09IDApIHtcbiAgICByZWdpc3Rlckxpc3RlbmVyKCk7XG4gICAgcmV0dXJuIDA7XG4gIH1cbiAgcmV0dXJuIHRpbWluZy5zZXRUaW1lb3V0KHJlZ2lzdGVyTGlzdGVuZXIsIGRlZmVyVGltZU1zKTtcbn0sIFwic2V0U29ja2V0S2VlcEFsaXZlXCIpO1xuXG4vLyBzcmMvc2V0LXNvY2tldC10aW1lb3V0LnRzXG52YXIgREVGRVJfRVZFTlRfTElTVEVORVJfVElNRTMgPSAzZTM7XG52YXIgc2V0U29ja2V0VGltZW91dCA9IC8qIEBfX1BVUkVfXyAqLyBfX25hbWUoKHJlcXVlc3QsIHJlamVjdCwgdGltZW91dEluTXMgPSAwKSA9PiB7XG4gIGNvbnN0IHJlZ2lzdGVyVGltZW91dCA9IC8qIEBfX1BVUkVfXyAqLyBfX25hbWUoKG9mZnNldCkgPT4ge1xuICAgIGNvbnN0IHRpbWVvdXQgPSB0aW1lb3V0SW5NcyAtIG9mZnNldDtcbiAgICBjb25zdCBvblRpbWVvdXQgPSAvKiBAX19QVVJFX18gKi8gX19uYW1lKCgpID0+IHtcbiAgICAgIHJlcXVlc3QuZGVzdHJveSgpO1xuICAgICAgcmVqZWN0KE9iamVjdC5hc3NpZ24obmV3IEVycm9yKGBDb25uZWN0aW9uIHRpbWVkIG91dCBhZnRlciAke3RpbWVvdXRJbk1zfSBtc2ApLCB7IG5hbWU6IFwiVGltZW91dEVycm9yXCIgfSkpO1xuICAgIH0sIFwib25UaW1lb3V0XCIpO1xuICAgIGlmIChyZXF1ZXN0LnNvY2tldCkge1xuICAgICAgcmVxdWVzdC5zb2NrZXQuc2V0VGltZW91dCh0aW1lb3V0LCBvblRpbWVvdXQpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXF1ZXN0LnNldFRpbWVvdXQodGltZW91dCwgb25UaW1lb3V0KTtcbiAgICB9XG4gIH0sIFwicmVnaXN0ZXJUaW1lb3V0XCIpO1xuICBpZiAoMCA8IHRpbWVvdXRJbk1zICYmIHRpbWVvdXRJbk1zIDwgNmUzKSB7XG4gICAgcmVnaXN0ZXJUaW1lb3V0KDApO1xuICAgIHJldHVybiAwO1xuICB9XG4gIHJldHVybiB0aW1pbmcuc2V0VGltZW91dChcbiAgICByZWdpc3RlclRpbWVvdXQuYmluZChudWxsLCB0aW1lb3V0SW5NcyA9PT0gMCA/IDAgOiBERUZFUl9FVkVOVF9MSVNURU5FUl9USU1FMyksXG4gICAgREVGRVJfRVZFTlRfTElTVEVORVJfVElNRTNcbiAgKTtcbn0sIFwic2V0U29ja2V0VGltZW91dFwiKTtcblxuLy8gc3JjL3dyaXRlLXJlcXVlc3QtYm9keS50c1xudmFyIGltcG9ydF9zdHJlYW0gPSByZXF1aXJlKFwic3RyZWFtXCIpO1xudmFyIE1JTl9XQUlUX1RJTUUgPSAxZTM7XG5hc3luYyBmdW5jdGlvbiB3cml0ZVJlcXVlc3RCb2R5KGh0dHBSZXF1ZXN0LCByZXF1ZXN0LCBtYXhDb250aW51ZVRpbWVvdXRNcyA9IE1JTl9XQUlUX1RJTUUpIHtcbiAgY29uc3QgaGVhZGVycyA9IHJlcXVlc3QuaGVhZGVycyA/PyB7fTtcbiAgY29uc3QgZXhwZWN0ID0gaGVhZGVyc1tcIkV4cGVjdFwiXSB8fCBoZWFkZXJzW1wiZXhwZWN0XCJdO1xuICBsZXQgdGltZW91dElkID0gLTE7XG4gIGxldCBzZW5kQm9keSA9IHRydWU7XG4gIGlmIChleHBlY3QgPT09IFwiMTAwLWNvbnRpbnVlXCIpIHtcbiAgICBzZW5kQm9keSA9IGF3YWl0IFByb21pc2UucmFjZShbXG4gICAgICBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4ge1xuICAgICAgICB0aW1lb3V0SWQgPSBOdW1iZXIodGltaW5nLnNldFRpbWVvdXQocmVzb2x2ZSwgTWF0aC5tYXgoTUlOX1dBSVRfVElNRSwgbWF4Q29udGludWVUaW1lb3V0TXMpKSk7XG4gICAgICB9KSxcbiAgICAgIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XG4gICAgICAgIGh0dHBSZXF1ZXN0Lm9uKFwiY29udGludWVcIiwgKCkgPT4ge1xuICAgICAgICAgIHRpbWluZy5jbGVhclRpbWVvdXQodGltZW91dElkKTtcbiAgICAgICAgICByZXNvbHZlKHRydWUpO1xuICAgICAgICB9KTtcbiAgICAgICAgaHR0cFJlcXVlc3Qub24oXCJyZXNwb25zZVwiLCAoKSA9PiB7XG4gICAgICAgICAgdGltaW5nLmNsZWFyVGltZW91dCh0aW1lb3V0SWQpO1xuICAgICAgICAgIHJlc29sdmUoZmFsc2UpO1xuICAgICAgICB9KTtcbiAgICAgICAgaHR0cFJlcXVlc3Qub24oXCJlcnJvclwiLCAoKSA9PiB7XG4gICAgICAgICAgdGltaW5nLmNsZWFyVGltZW91dCh0aW1lb3V0SWQpO1xuICAgICAgICAgIHJlc29sdmUoZmFsc2UpO1xuICAgICAgICB9KTtcbiAgICAgIH0pXG4gICAgXSk7XG4gIH1cbiAgaWYgKHNlbmRCb2R5KSB7XG4gICAgd3JpdGVCb2R5KGh0dHBSZXF1ZXN0LCByZXF1ZXN0LmJvZHkpO1xuICB9XG59XG5fX25hbWUod3JpdGVSZXF1ZXN0Qm9keSwgXCJ3cml0ZVJlcXVlc3RCb2R5XCIpO1xuZnVuY3Rpb24gd3JpdGVCb2R5KGh0dHBSZXF1ZXN0LCBib2R5KSB7XG4gIGlmIChib2R5IGluc3RhbmNlb2YgaW1wb3J0X3N0cmVhbS5SZWFkYWJsZSkge1xuICAgIGJvZHkucGlwZShodHRwUmVxdWVzdCk7XG4gICAgcmV0dXJuO1xuICB9XG4gIGlmIChib2R5KSB7XG4gICAgaWYgKEJ1ZmZlci5pc0J1ZmZlcihib2R5KSB8fCB0eXBlb2YgYm9keSA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgaHR0cFJlcXVlc3QuZW5kKGJvZHkpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCB1aW50OCA9IGJvZHk7XG4gICAgaWYgKHR5cGVvZiB1aW50OCA9PT0gXCJvYmplY3RcIiAmJiB1aW50OC5idWZmZXIgJiYgdHlwZW9mIHVpbnQ4LmJ5dGVPZmZzZXQgPT09IFwibnVtYmVyXCIgJiYgdHlwZW9mIHVpbnQ4LmJ5dGVMZW5ndGggPT09IFwibnVtYmVyXCIpIHtcbiAgICAgIGh0dHBSZXF1ZXN0LmVuZChCdWZmZXIuZnJvbSh1aW50OC5idWZmZXIsIHVpbnQ4LmJ5dGVPZmZzZXQsIHVpbnQ4LmJ5dGVMZW5ndGgpKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaHR0cFJlcXVlc3QuZW5kKEJ1ZmZlci5mcm9tKGJvZHkpKTtcbiAgICByZXR1cm47XG4gIH1cbiAgaHR0cFJlcXVlc3QuZW5kKCk7XG59XG5fX25hbWUod3JpdGVCb2R5LCBcIndyaXRlQm9keVwiKTtcblxuLy8gc3JjL25vZGUtaHR0cC1oYW5kbGVyLnRzXG52YXIgREVGQVVMVF9SRVFVRVNUX1RJTUVPVVQgPSAwO1xudmFyIF9Ob2RlSHR0cEhhbmRsZXIgPSBjbGFzcyBfTm9kZUh0dHBIYW5kbGVyIHtcbiAgY29uc3RydWN0b3Iob3B0aW9ucykge1xuICAgIHRoaXMuc29ja2V0V2FybmluZ1RpbWVzdGFtcCA9IDA7XG4gICAgLy8gTm9kZSBodHRwIGhhbmRsZXIgaXMgaGFyZC1jb2RlZCB0byBodHRwLzEuMTogaHR0cHM6Ly9naXRodWIuY29tL25vZGVqcy9ub2RlL2Jsb2IvZmY1NjY0YjgzYjg5YzU1ZTRhYjVkNWY2MDA2OGZiNDU3ZjFmNTg3Mi9saWIvX2h0dHBfc2VydmVyLmpzI0wyODZcbiAgICB0aGlzLm1ldGFkYXRhID0geyBoYW5kbGVyUHJvdG9jb2w6IFwiaHR0cC8xLjFcIiB9O1xuICAgIHRoaXMuY29uZmlnUHJvdmlkZXIgPSBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICBpZiAodHlwZW9mIG9wdGlvbnMgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICBvcHRpb25zKCkudGhlbigoX29wdGlvbnMpID0+IHtcbiAgICAgICAgICByZXNvbHZlKHRoaXMucmVzb2x2ZURlZmF1bHRDb25maWcoX29wdGlvbnMpKTtcbiAgICAgICAgfSkuY2F0Y2gocmVqZWN0KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJlc29sdmUodGhpcy5yZXNvbHZlRGVmYXVsdENvbmZpZyhvcHRpb25zKSk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbiAgLyoqXG4gICAqIEByZXR1cm5zIHRoZSBpbnB1dCBpZiBpdCBpcyBhbiBIdHRwSGFuZGxlciBvZiBhbnkgY2xhc3MsXG4gICAqIG9yIGluc3RhbnRpYXRlcyBhIG5ldyBpbnN0YW5jZSBvZiB0aGlzIGhhbmRsZXIuXG4gICAqL1xuICBzdGF0aWMgY3JlYXRlKGluc3RhbmNlT3JPcHRpb25zKSB7XG4gICAgaWYgKHR5cGVvZiAoaW5zdGFuY2VPck9wdGlvbnMgPT0gbnVsbCA/IHZvaWQgMCA6IGluc3RhbmNlT3JPcHRpb25zLmhhbmRsZSkgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgcmV0dXJuIGluc3RhbmNlT3JPcHRpb25zO1xuICAgIH1cbiAgICByZXR1cm4gbmV3IF9Ob2RlSHR0cEhhbmRsZXIoaW5zdGFuY2VPck9wdGlvbnMpO1xuICB9XG4gIC8qKlxuICAgKiBAaW50ZXJuYWxcbiAgICpcbiAgICogQHBhcmFtIGFnZW50IC0gaHR0cChzKSBhZ2VudCBpbiB1c2UgYnkgdGhlIE5vZGVIdHRwSGFuZGxlciBpbnN0YW5jZS5cbiAgICogQHBhcmFtIHNvY2tldFdhcm5pbmdUaW1lc3RhbXAgLSBsYXN0IHNvY2tldCB1c2FnZSBjaGVjayB0aW1lc3RhbXAuXG4gICAqIEBwYXJhbSBsb2dnZXIgLSBjaGFubmVsIGZvciB0aGUgd2FybmluZy5cbiAgICogQHJldHVybnMgdGltZXN0YW1wIG9mIGxhc3QgZW1pdHRlZCB3YXJuaW5nLlxuICAgKi9cbiAgc3RhdGljIGNoZWNrU29ja2V0VXNhZ2UoYWdlbnQsIHNvY2tldFdhcm5pbmdUaW1lc3RhbXAsIGxvZ2dlciA9IGNvbnNvbGUpIHtcbiAgICB2YXIgX2EsIF9iLCBfYztcbiAgICBjb25zdCB7IHNvY2tldHMsIHJlcXVlc3RzLCBtYXhTb2NrZXRzIH0gPSBhZ2VudDtcbiAgICBpZiAodHlwZW9mIG1heFNvY2tldHMgIT09IFwibnVtYmVyXCIgfHwgbWF4U29ja2V0cyA9PT0gSW5maW5pdHkpIHtcbiAgICAgIHJldHVybiBzb2NrZXRXYXJuaW5nVGltZXN0YW1wO1xuICAgIH1cbiAgICBjb25zdCBpbnRlcnZhbCA9IDE1ZTM7XG4gICAgaWYgKERhdGUubm93KCkgLSBpbnRlcnZhbCA8IHNvY2tldFdhcm5pbmdUaW1lc3RhbXApIHtcbiAgICAgIHJldHVybiBzb2NrZXRXYXJuaW5nVGltZXN0YW1wO1xuICAgIH1cbiAgICBpZiAoc29ja2V0cyAmJiByZXF1ZXN0cykge1xuICAgICAgZm9yIChjb25zdCBvcmlnaW4gaW4gc29ja2V0cykge1xuICAgICAgICBjb25zdCBzb2NrZXRzSW5Vc2UgPSAoKF9hID0gc29ja2V0c1tvcmlnaW5dKSA9PSBudWxsID8gdm9pZCAwIDogX2EubGVuZ3RoKSA/PyAwO1xuICAgICAgICBjb25zdCByZXF1ZXN0c0VucXVldWVkID0gKChfYiA9IHJlcXVlc3RzW29yaWdpbl0pID09IG51bGwgPyB2b2lkIDAgOiBfYi5sZW5ndGgpID8/IDA7XG4gICAgICAgIGlmIChzb2NrZXRzSW5Vc2UgPj0gbWF4U29ja2V0cyAmJiByZXF1ZXN0c0VucXVldWVkID49IDIgKiBtYXhTb2NrZXRzKSB7XG4gICAgICAgICAgKF9jID0gbG9nZ2VyID09IG51bGwgPyB2b2lkIDAgOiBsb2dnZXIud2FybikgPT0gbnVsbCA/IHZvaWQgMCA6IF9jLmNhbGwoXG4gICAgICAgICAgICBsb2dnZXIsXG4gICAgICAgICAgICBgQHNtaXRoeS9ub2RlLWh0dHAtaGFuZGxlcjpXQVJOIC0gc29ja2V0IHVzYWdlIGF0IGNhcGFjaXR5PSR7c29ja2V0c0luVXNlfSBhbmQgJHtyZXF1ZXN0c0VucXVldWVkfSBhZGRpdGlvbmFsIHJlcXVlc3RzIGFyZSBlbnF1ZXVlZC5cblNlZSBodHRwczovL2RvY3MuYXdzLmFtYXpvbi5jb20vc2RrLWZvci1qYXZhc2NyaXB0L3YzL2RldmVsb3Blci1ndWlkZS9ub2RlLWNvbmZpZ3VyaW5nLW1heHNvY2tldHMuaHRtbFxub3IgaW5jcmVhc2Ugc29ja2V0QWNxdWlzaXRpb25XYXJuaW5nVGltZW91dD0obWlsbGlzKSBpbiB0aGUgTm9kZUh0dHBIYW5kbGVyIGNvbmZpZy5gXG4gICAgICAgICAgKTtcbiAgICAgICAgICByZXR1cm4gRGF0ZS5ub3coKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gc29ja2V0V2FybmluZ1RpbWVzdGFtcDtcbiAgfVxuICByZXNvbHZlRGVmYXVsdENvbmZpZyhvcHRpb25zKSB7XG4gICAgY29uc3QgeyByZXF1ZXN0VGltZW91dCwgY29ubmVjdGlvblRpbWVvdXQsIHNvY2tldFRpbWVvdXQsIGh0dHBBZ2VudCwgaHR0cHNBZ2VudCB9ID0gb3B0aW9ucyB8fCB7fTtcbiAgICBjb25zdCBrZWVwQWxpdmUgPSB0cnVlO1xuICAgIGNvbnN0IG1heFNvY2tldHMgPSA1MDtcbiAgICByZXR1cm4ge1xuICAgICAgY29ubmVjdGlvblRpbWVvdXQsXG4gICAgICByZXF1ZXN0VGltZW91dDogcmVxdWVzdFRpbWVvdXQgPz8gc29ja2V0VGltZW91dCxcbiAgICAgIGh0dHBBZ2VudDogKCgpID0+IHtcbiAgICAgICAgaWYgKGh0dHBBZ2VudCBpbnN0YW5jZW9mIGltcG9ydF9odHRwLkFnZW50IHx8IHR5cGVvZiAoaHR0cEFnZW50ID09IG51bGwgPyB2b2lkIDAgOiBodHRwQWdlbnQuZGVzdHJveSkgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgIHJldHVybiBodHRwQWdlbnQ7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBpbXBvcnRfaHR0cC5BZ2VudCh7IGtlZXBBbGl2ZSwgbWF4U29ja2V0cywgLi4uaHR0cEFnZW50IH0pO1xuICAgICAgfSkoKSxcbiAgICAgIGh0dHBzQWdlbnQ6ICgoKSA9PiB7XG4gICAgICAgIGlmIChodHRwc0FnZW50IGluc3RhbmNlb2YgaW1wb3J0X2h0dHBzLkFnZW50IHx8IHR5cGVvZiAoaHR0cHNBZ2VudCA9PSBudWxsID8gdm9pZCAwIDogaHR0cHNBZ2VudC5kZXN0cm95KSA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgcmV0dXJuIGh0dHBzQWdlbnQ7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBpbXBvcnRfaHR0cHMuQWdlbnQoeyBrZWVwQWxpdmUsIG1heFNvY2tldHMsIC4uLmh0dHBzQWdlbnQgfSk7XG4gICAgICB9KSgpLFxuICAgICAgbG9nZ2VyOiBjb25zb2xlXG4gICAgfTtcbiAgfVxuICBkZXN0cm95KCkge1xuICAgIHZhciBfYSwgX2IsIF9jLCBfZDtcbiAgICAoX2IgPSAoX2EgPSB0aGlzLmNvbmZpZykgPT0gbnVsbCA/IHZvaWQgMCA6IF9hLmh0dHBBZ2VudCkgPT0gbnVsbCA/IHZvaWQgMCA6IF9iLmRlc3Ryb3koKTtcbiAgICAoX2QgPSAoX2MgPSB0aGlzLmNvbmZpZykgPT0gbnVsbCA/IHZvaWQgMCA6IF9jLmh0dHBzQWdlbnQpID09IG51bGwgPyB2b2lkIDAgOiBfZC5kZXN0cm95KCk7XG4gIH1cbiAgYXN5bmMgaGFuZGxlKHJlcXVlc3QsIHsgYWJvcnRTaWduYWwgfSA9IHt9KSB7XG4gICAgaWYgKCF0aGlzLmNvbmZpZykge1xuICAgICAgdGhpcy5jb25maWcgPSBhd2FpdCB0aGlzLmNvbmZpZ1Byb3ZpZGVyO1xuICAgIH1cbiAgICByZXR1cm4gbmV3IFByb21pc2UoKF9yZXNvbHZlLCBfcmVqZWN0KSA9PiB7XG4gICAgICBsZXQgd3JpdGVSZXF1ZXN0Qm9keVByb21pc2UgPSB2b2lkIDA7XG4gICAgICBjb25zdCB0aW1lb3V0cyA9IFtdO1xuICAgICAgY29uc3QgcmVzb2x2ZSA9IC8qIEBfX1BVUkVfXyAqLyBfX25hbWUoYXN5bmMgKGFyZykgPT4ge1xuICAgICAgICBhd2FpdCB3cml0ZVJlcXVlc3RCb2R5UHJvbWlzZTtcbiAgICAgICAgdGltZW91dHMuZm9yRWFjaCh0aW1pbmcuY2xlYXJUaW1lb3V0KTtcbiAgICAgICAgX3Jlc29sdmUoYXJnKTtcbiAgICAgIH0sIFwicmVzb2x2ZVwiKTtcbiAgICAgIGNvbnN0IHJlamVjdCA9IC8qIEBfX1BVUkVfXyAqLyBfX25hbWUoYXN5bmMgKGFyZykgPT4ge1xuICAgICAgICBhd2FpdCB3cml0ZVJlcXVlc3RCb2R5UHJvbWlzZTtcbiAgICAgICAgdGltZW91dHMuZm9yRWFjaCh0aW1pbmcuY2xlYXJUaW1lb3V0KTtcbiAgICAgICAgX3JlamVjdChhcmcpO1xuICAgICAgfSwgXCJyZWplY3RcIik7XG4gICAgICBpZiAoIXRoaXMuY29uZmlnKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIk5vZGUgSFRUUCByZXF1ZXN0IGhhbmRsZXIgY29uZmlnIGlzIG5vdCByZXNvbHZlZFwiKTtcbiAgICAgIH1cbiAgICAgIGlmIChhYm9ydFNpZ25hbCA9PSBudWxsID8gdm9pZCAwIDogYWJvcnRTaWduYWwuYWJvcnRlZCkge1xuICAgICAgICBjb25zdCBhYm9ydEVycm9yID0gbmV3IEVycm9yKFwiUmVxdWVzdCBhYm9ydGVkXCIpO1xuICAgICAgICBhYm9ydEVycm9yLm5hbWUgPSBcIkFib3J0RXJyb3JcIjtcbiAgICAgICAgcmVqZWN0KGFib3J0RXJyb3IpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBjb25zdCBpc1NTTCA9IHJlcXVlc3QucHJvdG9jb2wgPT09IFwiaHR0cHM6XCI7XG4gICAgICBjb25zdCBhZ2VudCA9IGlzU1NMID8gdGhpcy5jb25maWcuaHR0cHNBZ2VudCA6IHRoaXMuY29uZmlnLmh0dHBBZ2VudDtcbiAgICAgIHRpbWVvdXRzLnB1c2goXG4gICAgICAgIHRpbWluZy5zZXRUaW1lb3V0KFxuICAgICAgICAgICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuc29ja2V0V2FybmluZ1RpbWVzdGFtcCA9IF9Ob2RlSHR0cEhhbmRsZXIuY2hlY2tTb2NrZXRVc2FnZShcbiAgICAgICAgICAgICAgYWdlbnQsXG4gICAgICAgICAgICAgIHRoaXMuc29ja2V0V2FybmluZ1RpbWVzdGFtcCxcbiAgICAgICAgICAgICAgdGhpcy5jb25maWcubG9nZ2VyXG4gICAgICAgICAgICApO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgdGhpcy5jb25maWcuc29ja2V0QWNxdWlzaXRpb25XYXJuaW5nVGltZW91dCA/PyAodGhpcy5jb25maWcucmVxdWVzdFRpbWVvdXQgPz8gMmUzKSArICh0aGlzLmNvbmZpZy5jb25uZWN0aW9uVGltZW91dCA/PyAxZTMpXG4gICAgICAgIClcbiAgICAgICk7XG4gICAgICBjb25zdCBxdWVyeVN0cmluZyA9ICgwLCBpbXBvcnRfcXVlcnlzdHJpbmdfYnVpbGRlci5idWlsZFF1ZXJ5U3RyaW5nKShyZXF1ZXN0LnF1ZXJ5IHx8IHt9KTtcbiAgICAgIGxldCBhdXRoID0gdm9pZCAwO1xuICAgICAgaWYgKHJlcXVlc3QudXNlcm5hbWUgIT0gbnVsbCB8fCByZXF1ZXN0LnBhc3N3b3JkICE9IG51bGwpIHtcbiAgICAgICAgY29uc3QgdXNlcm5hbWUgPSByZXF1ZXN0LnVzZXJuYW1lID8/IFwiXCI7XG4gICAgICAgIGNvbnN0IHBhc3N3b3JkID0gcmVxdWVzdC5wYXNzd29yZCA/PyBcIlwiO1xuICAgICAgICBhdXRoID0gYCR7dXNlcm5hbWV9OiR7cGFzc3dvcmR9YDtcbiAgICAgIH1cbiAgICAgIGxldCBwYXRoID0gcmVxdWVzdC5wYXRoO1xuICAgICAgaWYgKHF1ZXJ5U3RyaW5nKSB7XG4gICAgICAgIHBhdGggKz0gYD8ke3F1ZXJ5U3RyaW5nfWA7XG4gICAgICB9XG4gICAgICBpZiAocmVxdWVzdC5mcmFnbWVudCkge1xuICAgICAgICBwYXRoICs9IGAjJHtyZXF1ZXN0LmZyYWdtZW50fWA7XG4gICAgICB9XG4gICAgICBsZXQgaG9zdG5hbWUgPSByZXF1ZXN0Lmhvc3RuYW1lID8/IFwiXCI7XG4gICAgICBpZiAoaG9zdG5hbWVbMF0gPT09IFwiW1wiICYmIGhvc3RuYW1lLmVuZHNXaXRoKFwiXVwiKSkge1xuICAgICAgICBob3N0bmFtZSA9IHJlcXVlc3QuaG9zdG5hbWUuc2xpY2UoMSwgLTEpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaG9zdG5hbWUgPSByZXF1ZXN0Lmhvc3RuYW1lO1xuICAgICAgfVxuICAgICAgY29uc3Qgbm9kZUh0dHBzT3B0aW9ucyA9IHtcbiAgICAgICAgaGVhZGVyczogcmVxdWVzdC5oZWFkZXJzLFxuICAgICAgICBob3N0OiBob3N0bmFtZSxcbiAgICAgICAgbWV0aG9kOiByZXF1ZXN0Lm1ldGhvZCxcbiAgICAgICAgcGF0aCxcbiAgICAgICAgcG9ydDogcmVxdWVzdC5wb3J0LFxuICAgICAgICBhZ2VudCxcbiAgICAgICAgYXV0aFxuICAgICAgfTtcbiAgICAgIGNvbnN0IHJlcXVlc3RGdW5jID0gaXNTU0wgPyBpbXBvcnRfaHR0cHMucmVxdWVzdCA6IGltcG9ydF9odHRwLnJlcXVlc3Q7XG4gICAgICBjb25zdCByZXEgPSByZXF1ZXN0RnVuYyhub2RlSHR0cHNPcHRpb25zLCAocmVzKSA9PiB7XG4gICAgICAgIGNvbnN0IGh0dHBSZXNwb25zZSA9IG5ldyBpbXBvcnRfcHJvdG9jb2xfaHR0cC5IdHRwUmVzcG9uc2Uoe1xuICAgICAgICAgIHN0YXR1c0NvZGU6IHJlcy5zdGF0dXNDb2RlIHx8IC0xLFxuICAgICAgICAgIHJlYXNvbjogcmVzLnN0YXR1c01lc3NhZ2UsXG4gICAgICAgICAgaGVhZGVyczogZ2V0VHJhbnNmb3JtZWRIZWFkZXJzKHJlcy5oZWFkZXJzKSxcbiAgICAgICAgICBib2R5OiByZXNcbiAgICAgICAgfSk7XG4gICAgICAgIHJlc29sdmUoeyByZXNwb25zZTogaHR0cFJlc3BvbnNlIH0pO1xuICAgICAgfSk7XG4gICAgICByZXEub24oXCJlcnJvclwiLCAoZXJyKSA9PiB7XG4gICAgICAgIGlmIChOT0RFSlNfVElNRU9VVF9FUlJPUl9DT0RFUy5pbmNsdWRlcyhlcnIuY29kZSkpIHtcbiAgICAgICAgICByZWplY3QoT2JqZWN0LmFzc2lnbihlcnIsIHsgbmFtZTogXCJUaW1lb3V0RXJyb3JcIiB9KSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmVqZWN0KGVycik7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgaWYgKGFib3J0U2lnbmFsKSB7XG4gICAgICAgIGNvbnN0IG9uQWJvcnQgPSAvKiBAX19QVVJFX18gKi8gX19uYW1lKCgpID0+IHtcbiAgICAgICAgICByZXEuZGVzdHJveSgpO1xuICAgICAgICAgIGNvbnN0IGFib3J0RXJyb3IgPSBuZXcgRXJyb3IoXCJSZXF1ZXN0IGFib3J0ZWRcIik7XG4gICAgICAgICAgYWJvcnRFcnJvci5uYW1lID0gXCJBYm9ydEVycm9yXCI7XG4gICAgICAgICAgcmVqZWN0KGFib3J0RXJyb3IpO1xuICAgICAgICB9LCBcIm9uQWJvcnRcIik7XG4gICAgICAgIGlmICh0eXBlb2YgYWJvcnRTaWduYWwuYWRkRXZlbnRMaXN0ZW5lciA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgY29uc3Qgc2lnbmFsID0gYWJvcnRTaWduYWw7XG4gICAgICAgICAgc2lnbmFsLmFkZEV2ZW50TGlzdGVuZXIoXCJhYm9ydFwiLCBvbkFib3J0LCB7IG9uY2U6IHRydWUgfSk7XG4gICAgICAgICAgcmVxLm9uY2UoXCJjbG9zZVwiLCAoKSA9PiBzaWduYWwucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImFib3J0XCIsIG9uQWJvcnQpKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBhYm9ydFNpZ25hbC5vbmFib3J0ID0gb25BYm9ydDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgdGltZW91dHMucHVzaChzZXRDb25uZWN0aW9uVGltZW91dChyZXEsIHJlamVjdCwgdGhpcy5jb25maWcuY29ubmVjdGlvblRpbWVvdXQpKTtcbiAgICAgIHRpbWVvdXRzLnB1c2goc2V0U29ja2V0VGltZW91dChyZXEsIHJlamVjdCwgdGhpcy5jb25maWcucmVxdWVzdFRpbWVvdXQpKTtcbiAgICAgIGNvbnN0IGh0dHBBZ2VudCA9IG5vZGVIdHRwc09wdGlvbnMuYWdlbnQ7XG4gICAgICBpZiAodHlwZW9mIGh0dHBBZ2VudCA9PT0gXCJvYmplY3RcIiAmJiBcImtlZXBBbGl2ZVwiIGluIGh0dHBBZ2VudCkge1xuICAgICAgICB0aW1lb3V0cy5wdXNoKFxuICAgICAgICAgIHNldFNvY2tldEtlZXBBbGl2ZShyZXEsIHtcbiAgICAgICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3Iga2VlcEFsaXZlIGlzIG5vdCBwdWJsaWMgb24gaHR0cEFnZW50LlxuICAgICAgICAgICAga2VlcEFsaXZlOiBodHRwQWdlbnQua2VlcEFsaXZlLFxuICAgICAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvciBrZWVwQWxpdmVNc2VjcyBpcyBub3QgcHVibGljIG9uIGh0dHBBZ2VudC5cbiAgICAgICAgICAgIGtlZXBBbGl2ZU1zZWNzOiBodHRwQWdlbnQua2VlcEFsaXZlTXNlY3NcbiAgICAgICAgICB9KVxuICAgICAgICApO1xuICAgICAgfVxuICAgICAgd3JpdGVSZXF1ZXN0Qm9keVByb21pc2UgPSB3cml0ZVJlcXVlc3RCb2R5KHJlcSwgcmVxdWVzdCwgdGhpcy5jb25maWcucmVxdWVzdFRpbWVvdXQpLmNhdGNoKChlKSA9PiB7XG4gICAgICAgIHRpbWVvdXRzLmZvckVhY2godGltaW5nLmNsZWFyVGltZW91dCk7XG4gICAgICAgIHJldHVybiBfcmVqZWN0KGUpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cbiAgdXBkYXRlSHR0cENsaWVudENvbmZpZyhrZXksIHZhbHVlKSB7XG4gICAgdGhpcy5jb25maWcgPSB2b2lkIDA7XG4gICAgdGhpcy5jb25maWdQcm92aWRlciA9IHRoaXMuY29uZmlnUHJvdmlkZXIudGhlbigoY29uZmlnKSA9PiB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICAuLi5jb25maWcsXG4gICAgICAgIFtrZXldOiB2YWx1ZVxuICAgICAgfTtcbiAgICB9KTtcbiAgfVxuICBodHRwSGFuZGxlckNvbmZpZ3MoKSB7XG4gICAgcmV0dXJuIHRoaXMuY29uZmlnID8/IHt9O1xuICB9XG59O1xuX19uYW1lKF9Ob2RlSHR0cEhhbmRsZXIsIFwiTm9kZUh0dHBIYW5kbGVyXCIpO1xudmFyIE5vZGVIdHRwSGFuZGxlciA9IF9Ob2RlSHR0cEhhbmRsZXI7XG5cbi8vIHNyYy9ub2RlLWh0dHAyLWhhbmRsZXIudHNcblxuXG52YXIgaW1wb3J0X2h0dHAyMiA9IHJlcXVpcmUoXCJodHRwMlwiKTtcblxuLy8gc3JjL25vZGUtaHR0cDItY29ubmVjdGlvbi1tYW5hZ2VyLnRzXG52YXIgaW1wb3J0X2h0dHAyID0gX190b0VTTShyZXF1aXJlKFwiaHR0cDJcIikpO1xuXG4vLyBzcmMvbm9kZS1odHRwMi1jb25uZWN0aW9uLXBvb2wudHNcbnZhciBfTm9kZUh0dHAyQ29ubmVjdGlvblBvb2wgPSBjbGFzcyBfTm9kZUh0dHAyQ29ubmVjdGlvblBvb2wge1xuICBjb25zdHJ1Y3RvcihzZXNzaW9ucykge1xuICAgIHRoaXMuc2Vzc2lvbnMgPSBbXTtcbiAgICB0aGlzLnNlc3Npb25zID0gc2Vzc2lvbnMgPz8gW107XG4gIH1cbiAgcG9sbCgpIHtcbiAgICBpZiAodGhpcy5zZXNzaW9ucy5sZW5ndGggPiAwKSB7XG4gICAgICByZXR1cm4gdGhpcy5zZXNzaW9ucy5zaGlmdCgpO1xuICAgIH1cbiAgfVxuICBvZmZlckxhc3Qoc2Vzc2lvbikge1xuICAgIHRoaXMuc2Vzc2lvbnMucHVzaChzZXNzaW9uKTtcbiAgfVxuICBjb250YWlucyhzZXNzaW9uKSB7XG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbnMuaW5jbHVkZXMoc2Vzc2lvbik7XG4gIH1cbiAgcmVtb3ZlKHNlc3Npb24pIHtcbiAgICB0aGlzLnNlc3Npb25zID0gdGhpcy5zZXNzaW9ucy5maWx0ZXIoKHMpID0+IHMgIT09IHNlc3Npb24pO1xuICB9XG4gIFtTeW1ib2wuaXRlcmF0b3JdKCkge1xuICAgIHJldHVybiB0aGlzLnNlc3Npb25zW1N5bWJvbC5pdGVyYXRvcl0oKTtcbiAgfVxuICBkZXN0cm95KGNvbm5lY3Rpb24pIHtcbiAgICBmb3IgKGNvbnN0IHNlc3Npb24gb2YgdGhpcy5zZXNzaW9ucykge1xuICAgICAgaWYgKHNlc3Npb24gPT09IGNvbm5lY3Rpb24pIHtcbiAgICAgICAgaWYgKCFzZXNzaW9uLmRlc3Ryb3llZCkge1xuICAgICAgICAgIHNlc3Npb24uZGVzdHJveSgpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG59O1xuX19uYW1lKF9Ob2RlSHR0cDJDb25uZWN0aW9uUG9vbCwgXCJOb2RlSHR0cDJDb25uZWN0aW9uUG9vbFwiKTtcbnZhciBOb2RlSHR0cDJDb25uZWN0aW9uUG9vbCA9IF9Ob2RlSHR0cDJDb25uZWN0aW9uUG9vbDtcblxuLy8gc3JjL25vZGUtaHR0cDItY29ubmVjdGlvbi1tYW5hZ2VyLnRzXG52YXIgX05vZGVIdHRwMkNvbm5lY3Rpb25NYW5hZ2VyID0gY2xhc3MgX05vZGVIdHRwMkNvbm5lY3Rpb25NYW5hZ2VyIHtcbiAgY29uc3RydWN0b3IoY29uZmlnKSB7XG4gICAgdGhpcy5zZXNzaW9uQ2FjaGUgPSAvKiBAX19QVVJFX18gKi8gbmV3IE1hcCgpO1xuICAgIHRoaXMuY29uZmlnID0gY29uZmlnO1xuICAgIGlmICh0aGlzLmNvbmZpZy5tYXhDb25jdXJyZW5jeSAmJiB0aGlzLmNvbmZpZy5tYXhDb25jdXJyZW5jeSA8PSAwKSB7XG4gICAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcihcIm1heENvbmN1cnJlbmN5IG11c3QgYmUgZ3JlYXRlciB0aGFuIHplcm8uXCIpO1xuICAgIH1cbiAgfVxuICBsZWFzZShyZXF1ZXN0Q29udGV4dCwgY29ubmVjdGlvbkNvbmZpZ3VyYXRpb24pIHtcbiAgICBjb25zdCB1cmwgPSB0aGlzLmdldFVybFN0cmluZyhyZXF1ZXN0Q29udGV4dCk7XG4gICAgY29uc3QgZXhpc3RpbmdQb29sID0gdGhpcy5zZXNzaW9uQ2FjaGUuZ2V0KHVybCk7XG4gICAgaWYgKGV4aXN0aW5nUG9vbCkge1xuICAgICAgY29uc3QgZXhpc3RpbmdTZXNzaW9uID0gZXhpc3RpbmdQb29sLnBvbGwoKTtcbiAgICAgIGlmIChleGlzdGluZ1Nlc3Npb24gJiYgIXRoaXMuY29uZmlnLmRpc2FibGVDb25jdXJyZW5jeSkge1xuICAgICAgICByZXR1cm4gZXhpc3RpbmdTZXNzaW9uO1xuICAgICAgfVxuICAgIH1cbiAgICBjb25zdCBzZXNzaW9uID0gaW1wb3J0X2h0dHAyLmRlZmF1bHQuY29ubmVjdCh1cmwpO1xuICAgIGlmICh0aGlzLmNvbmZpZy5tYXhDb25jdXJyZW5jeSkge1xuICAgICAgc2Vzc2lvbi5zZXR0aW5ncyh7IG1heENvbmN1cnJlbnRTdHJlYW1zOiB0aGlzLmNvbmZpZy5tYXhDb25jdXJyZW5jeSB9LCAoZXJyKSA9PiB7XG4gICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICAgICBcIkZhaWwgdG8gc2V0IG1heENvbmN1cnJlbnRTdHJlYW1zIHRvIFwiICsgdGhpcy5jb25maWcubWF4Q29uY3VycmVuY3kgKyBcIndoZW4gY3JlYXRpbmcgbmV3IHNlc3Npb24gZm9yIFwiICsgcmVxdWVzdENvbnRleHQuZGVzdGluYXRpb24udG9TdHJpbmcoKVxuICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgICBzZXNzaW9uLnVucmVmKCk7XG4gICAgY29uc3QgZGVzdHJveVNlc3Npb25DYiA9IC8qIEBfX1BVUkVfXyAqLyBfX25hbWUoKCkgPT4ge1xuICAgICAgc2Vzc2lvbi5kZXN0cm95KCk7XG4gICAgICB0aGlzLmRlbGV0ZVNlc3Npb24odXJsLCBzZXNzaW9uKTtcbiAgICB9LCBcImRlc3Ryb3lTZXNzaW9uQ2JcIik7XG4gICAgc2Vzc2lvbi5vbihcImdvYXdheVwiLCBkZXN0cm95U2Vzc2lvbkNiKTtcbiAgICBzZXNzaW9uLm9uKFwiZXJyb3JcIiwgZGVzdHJveVNlc3Npb25DYik7XG4gICAgc2Vzc2lvbi5vbihcImZyYW1lRXJyb3JcIiwgZGVzdHJveVNlc3Npb25DYik7XG4gICAgc2Vzc2lvbi5vbihcImNsb3NlXCIsICgpID0+IHRoaXMuZGVsZXRlU2Vzc2lvbih1cmwsIHNlc3Npb24pKTtcbiAgICBpZiAoY29ubmVjdGlvbkNvbmZpZ3VyYXRpb24ucmVxdWVzdFRpbWVvdXQpIHtcbiAgICAgIHNlc3Npb24uc2V0VGltZW91dChjb25uZWN0aW9uQ29uZmlndXJhdGlvbi5yZXF1ZXN0VGltZW91dCwgZGVzdHJveVNlc3Npb25DYik7XG4gICAgfVxuICAgIGNvbnN0IGNvbm5lY3Rpb25Qb29sID0gdGhpcy5zZXNzaW9uQ2FjaGUuZ2V0KHVybCkgfHwgbmV3IE5vZGVIdHRwMkNvbm5lY3Rpb25Qb29sKCk7XG4gICAgY29ubmVjdGlvblBvb2wub2ZmZXJMYXN0KHNlc3Npb24pO1xuICAgIHRoaXMuc2Vzc2lvbkNhY2hlLnNldCh1cmwsIGNvbm5lY3Rpb25Qb29sKTtcbiAgICByZXR1cm4gc2Vzc2lvbjtcbiAgfVxuICAvKipcbiAgICogRGVsZXRlIGEgc2Vzc2lvbiBmcm9tIHRoZSBjb25uZWN0aW9uIHBvb2wuXG4gICAqIEBwYXJhbSBhdXRob3JpdHkgVGhlIGF1dGhvcml0eSBvZiB0aGUgc2Vzc2lvbiB0byBkZWxldGUuXG4gICAqIEBwYXJhbSBzZXNzaW9uIFRoZSBzZXNzaW9uIHRvIGRlbGV0ZS5cbiAgICovXG4gIGRlbGV0ZVNlc3Npb24oYXV0aG9yaXR5LCBzZXNzaW9uKSB7XG4gICAgY29uc3QgZXhpc3RpbmdDb25uZWN0aW9uUG9vbCA9IHRoaXMuc2Vzc2lvbkNhY2hlLmdldChhdXRob3JpdHkpO1xuICAgIGlmICghZXhpc3RpbmdDb25uZWN0aW9uUG9vbCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAoIWV4aXN0aW5nQ29ubmVjdGlvblBvb2wuY29udGFpbnMoc2Vzc2lvbikpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgZXhpc3RpbmdDb25uZWN0aW9uUG9vbC5yZW1vdmUoc2Vzc2lvbik7XG4gICAgdGhpcy5zZXNzaW9uQ2FjaGUuc2V0KGF1dGhvcml0eSwgZXhpc3RpbmdDb25uZWN0aW9uUG9vbCk7XG4gIH1cbiAgcmVsZWFzZShyZXF1ZXN0Q29udGV4dCwgc2Vzc2lvbikge1xuICAgIHZhciBfYTtcbiAgICBjb25zdCBjYWNoZUtleSA9IHRoaXMuZ2V0VXJsU3RyaW5nKHJlcXVlc3RDb250ZXh0KTtcbiAgICAoX2EgPSB0aGlzLnNlc3Npb25DYWNoZS5nZXQoY2FjaGVLZXkpKSA9PSBudWxsID8gdm9pZCAwIDogX2Eub2ZmZXJMYXN0KHNlc3Npb24pO1xuICB9XG4gIGRlc3Ryb3koKSB7XG4gICAgZm9yIChjb25zdCBba2V5LCBjb25uZWN0aW9uUG9vbF0gb2YgdGhpcy5zZXNzaW9uQ2FjaGUpIHtcbiAgICAgIGZvciAoY29uc3Qgc2Vzc2lvbiBvZiBjb25uZWN0aW9uUG9vbCkge1xuICAgICAgICBpZiAoIXNlc3Npb24uZGVzdHJveWVkKSB7XG4gICAgICAgICAgc2Vzc2lvbi5kZXN0cm95KCk7XG4gICAgICAgIH1cbiAgICAgICAgY29ubmVjdGlvblBvb2wucmVtb3ZlKHNlc3Npb24pO1xuICAgICAgfVxuICAgICAgdGhpcy5zZXNzaW9uQ2FjaGUuZGVsZXRlKGtleSk7XG4gICAgfVxuICB9XG4gIHNldE1heENvbmN1cnJlbnRTdHJlYW1zKG1heENvbmN1cnJlbnRTdHJlYW1zKSB7XG4gICAgaWYgKG1heENvbmN1cnJlbnRTdHJlYW1zICYmIG1heENvbmN1cnJlbnRTdHJlYW1zIDw9IDApIHtcbiAgICAgIHRocm93IG5ldyBSYW5nZUVycm9yKFwibWF4Q29uY3VycmVudFN0cmVhbXMgbXVzdCBiZSBncmVhdGVyIHRoYW4gemVyby5cIik7XG4gICAgfVxuICAgIHRoaXMuY29uZmlnLm1heENvbmN1cnJlbmN5ID0gbWF4Q29uY3VycmVudFN0cmVhbXM7XG4gIH1cbiAgc2V0RGlzYWJsZUNvbmN1cnJlbnRTdHJlYW1zKGRpc2FibGVDb25jdXJyZW50U3RyZWFtcykge1xuICAgIHRoaXMuY29uZmlnLmRpc2FibGVDb25jdXJyZW5jeSA9IGRpc2FibGVDb25jdXJyZW50U3RyZWFtcztcbiAgfVxuICBnZXRVcmxTdHJpbmcocmVxdWVzdCkge1xuICAgIHJldHVybiByZXF1ZXN0LmRlc3RpbmF0aW9uLnRvU3RyaW5nKCk7XG4gIH1cbn07XG5fX25hbWUoX05vZGVIdHRwMkNvbm5lY3Rpb25NYW5hZ2VyLCBcIk5vZGVIdHRwMkNvbm5lY3Rpb25NYW5hZ2VyXCIpO1xudmFyIE5vZGVIdHRwMkNvbm5lY3Rpb25NYW5hZ2VyID0gX05vZGVIdHRwMkNvbm5lY3Rpb25NYW5hZ2VyO1xuXG4vLyBzcmMvbm9kZS1odHRwMi1oYW5kbGVyLnRzXG52YXIgX05vZGVIdHRwMkhhbmRsZXIgPSBjbGFzcyBfTm9kZUh0dHAySGFuZGxlciB7XG4gIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHtcbiAgICB0aGlzLm1ldGFkYXRhID0geyBoYW5kbGVyUHJvdG9jb2w6IFwiaDJcIiB9O1xuICAgIHRoaXMuY29ubmVjdGlvbk1hbmFnZXIgPSBuZXcgTm9kZUh0dHAyQ29ubmVjdGlvbk1hbmFnZXIoe30pO1xuICAgIHRoaXMuY29uZmlnUHJvdmlkZXIgPSBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICBpZiAodHlwZW9mIG9wdGlvbnMgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICBvcHRpb25zKCkudGhlbigob3B0cykgPT4ge1xuICAgICAgICAgIHJlc29sdmUob3B0cyB8fCB7fSk7XG4gICAgICAgIH0pLmNhdGNoKHJlamVjdCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXNvbHZlKG9wdGlvbnMgfHwge30pO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG4gIC8qKlxuICAgKiBAcmV0dXJucyB0aGUgaW5wdXQgaWYgaXQgaXMgYW4gSHR0cEhhbmRsZXIgb2YgYW55IGNsYXNzLFxuICAgKiBvciBpbnN0YW50aWF0ZXMgYSBuZXcgaW5zdGFuY2Ugb2YgdGhpcyBoYW5kbGVyLlxuICAgKi9cbiAgc3RhdGljIGNyZWF0ZShpbnN0YW5jZU9yT3B0aW9ucykge1xuICAgIGlmICh0eXBlb2YgKGluc3RhbmNlT3JPcHRpb25zID09IG51bGwgPyB2b2lkIDAgOiBpbnN0YW5jZU9yT3B0aW9ucy5oYW5kbGUpID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgIHJldHVybiBpbnN0YW5jZU9yT3B0aW9ucztcbiAgICB9XG4gICAgcmV0dXJuIG5ldyBfTm9kZUh0dHAySGFuZGxlcihpbnN0YW5jZU9yT3B0aW9ucyk7XG4gIH1cbiAgZGVzdHJveSgpIHtcbiAgICB0aGlzLmNvbm5lY3Rpb25NYW5hZ2VyLmRlc3Ryb3koKTtcbiAgfVxuICBhc3luYyBoYW5kbGUocmVxdWVzdCwgeyBhYm9ydFNpZ25hbCB9ID0ge30pIHtcbiAgICBpZiAoIXRoaXMuY29uZmlnKSB7XG4gICAgICB0aGlzLmNvbmZpZyA9IGF3YWl0IHRoaXMuY29uZmlnUHJvdmlkZXI7XG4gICAgICB0aGlzLmNvbm5lY3Rpb25NYW5hZ2VyLnNldERpc2FibGVDb25jdXJyZW50U3RyZWFtcyh0aGlzLmNvbmZpZy5kaXNhYmxlQ29uY3VycmVudFN0cmVhbXMgfHwgZmFsc2UpO1xuICAgICAgaWYgKHRoaXMuY29uZmlnLm1heENvbmN1cnJlbnRTdHJlYW1zKSB7XG4gICAgICAgIHRoaXMuY29ubmVjdGlvbk1hbmFnZXIuc2V0TWF4Q29uY3VycmVudFN0cmVhbXModGhpcy5jb25maWcubWF4Q29uY3VycmVudFN0cmVhbXMpO1xuICAgICAgfVxuICAgIH1cbiAgICBjb25zdCB7IHJlcXVlc3RUaW1lb3V0LCBkaXNhYmxlQ29uY3VycmVudFN0cmVhbXMgfSA9IHRoaXMuY29uZmlnO1xuICAgIHJldHVybiBuZXcgUHJvbWlzZSgoX3Jlc29sdmUsIF9yZWplY3QpID0+IHtcbiAgICAgIHZhciBfYTtcbiAgICAgIGxldCBmdWxmaWxsZWQgPSBmYWxzZTtcbiAgICAgIGxldCB3cml0ZVJlcXVlc3RCb2R5UHJvbWlzZSA9IHZvaWQgMDtcbiAgICAgIGNvbnN0IHJlc29sdmUgPSAvKiBAX19QVVJFX18gKi8gX19uYW1lKGFzeW5jIChhcmcpID0+IHtcbiAgICAgICAgYXdhaXQgd3JpdGVSZXF1ZXN0Qm9keVByb21pc2U7XG4gICAgICAgIF9yZXNvbHZlKGFyZyk7XG4gICAgICB9LCBcInJlc29sdmVcIik7XG4gICAgICBjb25zdCByZWplY3QgPSAvKiBAX19QVVJFX18gKi8gX19uYW1lKGFzeW5jIChhcmcpID0+IHtcbiAgICAgICAgYXdhaXQgd3JpdGVSZXF1ZXN0Qm9keVByb21pc2U7XG4gICAgICAgIF9yZWplY3QoYXJnKTtcbiAgICAgIH0sIFwicmVqZWN0XCIpO1xuICAgICAgaWYgKGFib3J0U2lnbmFsID09IG51bGwgPyB2b2lkIDAgOiBhYm9ydFNpZ25hbC5hYm9ydGVkKSB7XG4gICAgICAgIGZ1bGZpbGxlZCA9IHRydWU7XG4gICAgICAgIGNvbnN0IGFib3J0RXJyb3IgPSBuZXcgRXJyb3IoXCJSZXF1ZXN0IGFib3J0ZWRcIik7XG4gICAgICAgIGFib3J0RXJyb3IubmFtZSA9IFwiQWJvcnRFcnJvclwiO1xuICAgICAgICByZWplY3QoYWJvcnRFcnJvcik7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHsgaG9zdG5hbWUsIG1ldGhvZCwgcG9ydCwgcHJvdG9jb2wsIHF1ZXJ5IH0gPSByZXF1ZXN0O1xuICAgICAgbGV0IGF1dGggPSBcIlwiO1xuICAgICAgaWYgKHJlcXVlc3QudXNlcm5hbWUgIT0gbnVsbCB8fCByZXF1ZXN0LnBhc3N3b3JkICE9IG51bGwpIHtcbiAgICAgICAgY29uc3QgdXNlcm5hbWUgPSByZXF1ZXN0LnVzZXJuYW1lID8/IFwiXCI7XG4gICAgICAgIGNvbnN0IHBhc3N3b3JkID0gcmVxdWVzdC5wYXNzd29yZCA/PyBcIlwiO1xuICAgICAgICBhdXRoID0gYCR7dXNlcm5hbWV9OiR7cGFzc3dvcmR9QGA7XG4gICAgICB9XG4gICAgICBjb25zdCBhdXRob3JpdHkgPSBgJHtwcm90b2NvbH0vLyR7YXV0aH0ke2hvc3RuYW1lfSR7cG9ydCA/IGA6JHtwb3J0fWAgOiBcIlwifWA7XG4gICAgICBjb25zdCByZXF1ZXN0Q29udGV4dCA9IHsgZGVzdGluYXRpb246IG5ldyBVUkwoYXV0aG9yaXR5KSB9O1xuICAgICAgY29uc3Qgc2Vzc2lvbiA9IHRoaXMuY29ubmVjdGlvbk1hbmFnZXIubGVhc2UocmVxdWVzdENvbnRleHQsIHtcbiAgICAgICAgcmVxdWVzdFRpbWVvdXQ6IChfYSA9IHRoaXMuY29uZmlnKSA9PSBudWxsID8gdm9pZCAwIDogX2Euc2Vzc2lvblRpbWVvdXQsXG4gICAgICAgIGRpc2FibGVDb25jdXJyZW50U3RyZWFtczogZGlzYWJsZUNvbmN1cnJlbnRTdHJlYW1zIHx8IGZhbHNlXG4gICAgICB9KTtcbiAgICAgIGNvbnN0IHJlamVjdFdpdGhEZXN0cm95ID0gLyogQF9fUFVSRV9fICovIF9fbmFtZSgoZXJyKSA9PiB7XG4gICAgICAgIGlmIChkaXNhYmxlQ29uY3VycmVudFN0cmVhbXMpIHtcbiAgICAgICAgICB0aGlzLmRlc3Ryb3lTZXNzaW9uKHNlc3Npb24pO1xuICAgICAgICB9XG4gICAgICAgIGZ1bGZpbGxlZCA9IHRydWU7XG4gICAgICAgIHJlamVjdChlcnIpO1xuICAgICAgfSwgXCJyZWplY3RXaXRoRGVzdHJveVwiKTtcbiAgICAgIGNvbnN0IHF1ZXJ5U3RyaW5nID0gKDAsIGltcG9ydF9xdWVyeXN0cmluZ19idWlsZGVyLmJ1aWxkUXVlcnlTdHJpbmcpKHF1ZXJ5IHx8IHt9KTtcbiAgICAgIGxldCBwYXRoID0gcmVxdWVzdC5wYXRoO1xuICAgICAgaWYgKHF1ZXJ5U3RyaW5nKSB7XG4gICAgICAgIHBhdGggKz0gYD8ke3F1ZXJ5U3RyaW5nfWA7XG4gICAgICB9XG4gICAgICBpZiAocmVxdWVzdC5mcmFnbWVudCkge1xuICAgICAgICBwYXRoICs9IGAjJHtyZXF1ZXN0LmZyYWdtZW50fWA7XG4gICAgICB9XG4gICAgICBjb25zdCByZXEgPSBzZXNzaW9uLnJlcXVlc3Qoe1xuICAgICAgICAuLi5yZXF1ZXN0LmhlYWRlcnMsXG4gICAgICAgIFtpbXBvcnRfaHR0cDIyLmNvbnN0YW50cy5IVFRQMl9IRUFERVJfUEFUSF06IHBhdGgsXG4gICAgICAgIFtpbXBvcnRfaHR0cDIyLmNvbnN0YW50cy5IVFRQMl9IRUFERVJfTUVUSE9EXTogbWV0aG9kXG4gICAgICB9KTtcbiAgICAgIHNlc3Npb24ucmVmKCk7XG4gICAgICByZXEub24oXCJyZXNwb25zZVwiLCAoaGVhZGVycykgPT4ge1xuICAgICAgICBjb25zdCBodHRwUmVzcG9uc2UgPSBuZXcgaW1wb3J0X3Byb3RvY29sX2h0dHAuSHR0cFJlc3BvbnNlKHtcbiAgICAgICAgICBzdGF0dXNDb2RlOiBoZWFkZXJzW1wiOnN0YXR1c1wiXSB8fCAtMSxcbiAgICAgICAgICBoZWFkZXJzOiBnZXRUcmFuc2Zvcm1lZEhlYWRlcnMoaGVhZGVycyksXG4gICAgICAgICAgYm9keTogcmVxXG4gICAgICAgIH0pO1xuICAgICAgICBmdWxmaWxsZWQgPSB0cnVlO1xuICAgICAgICByZXNvbHZlKHsgcmVzcG9uc2U6IGh0dHBSZXNwb25zZSB9KTtcbiAgICAgICAgaWYgKGRpc2FibGVDb25jdXJyZW50U3RyZWFtcykge1xuICAgICAgICAgIHNlc3Npb24uY2xvc2UoKTtcbiAgICAgICAgICB0aGlzLmNvbm5lY3Rpb25NYW5hZ2VyLmRlbGV0ZVNlc3Npb24oYXV0aG9yaXR5LCBzZXNzaW9uKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICBpZiAocmVxdWVzdFRpbWVvdXQpIHtcbiAgICAgICAgcmVxLnNldFRpbWVvdXQocmVxdWVzdFRpbWVvdXQsICgpID0+IHtcbiAgICAgICAgICByZXEuY2xvc2UoKTtcbiAgICAgICAgICBjb25zdCB0aW1lb3V0RXJyb3IgPSBuZXcgRXJyb3IoYFN0cmVhbSB0aW1lZCBvdXQgYmVjYXVzZSBvZiBubyBhY3Rpdml0eSBmb3IgJHtyZXF1ZXN0VGltZW91dH0gbXNgKTtcbiAgICAgICAgICB0aW1lb3V0RXJyb3IubmFtZSA9IFwiVGltZW91dEVycm9yXCI7XG4gICAgICAgICAgcmVqZWN0V2l0aERlc3Ryb3kodGltZW91dEVycm9yKTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICBpZiAoYWJvcnRTaWduYWwpIHtcbiAgICAgICAgY29uc3Qgb25BYm9ydCA9IC8qIEBfX1BVUkVfXyAqLyBfX25hbWUoKCkgPT4ge1xuICAgICAgICAgIHJlcS5jbG9zZSgpO1xuICAgICAgICAgIGNvbnN0IGFib3J0RXJyb3IgPSBuZXcgRXJyb3IoXCJSZXF1ZXN0IGFib3J0ZWRcIik7XG4gICAgICAgICAgYWJvcnRFcnJvci5uYW1lID0gXCJBYm9ydEVycm9yXCI7XG4gICAgICAgICAgcmVqZWN0V2l0aERlc3Ryb3koYWJvcnRFcnJvcik7XG4gICAgICAgIH0sIFwib25BYm9ydFwiKTtcbiAgICAgICAgaWYgKHR5cGVvZiBhYm9ydFNpZ25hbC5hZGRFdmVudExpc3RlbmVyID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICBjb25zdCBzaWduYWwgPSBhYm9ydFNpZ25hbDtcbiAgICAgICAgICBzaWduYWwuYWRkRXZlbnRMaXN0ZW5lcihcImFib3J0XCIsIG9uQWJvcnQsIHsgb25jZTogdHJ1ZSB9KTtcbiAgICAgICAgICByZXEub25jZShcImNsb3NlXCIsICgpID0+IHNpZ25hbC5yZW1vdmVFdmVudExpc3RlbmVyKFwiYWJvcnRcIiwgb25BYm9ydCkpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGFib3J0U2lnbmFsLm9uYWJvcnQgPSBvbkFib3J0O1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXEub24oXCJmcmFtZUVycm9yXCIsICh0eXBlLCBjb2RlLCBpZCkgPT4ge1xuICAgICAgICByZWplY3RXaXRoRGVzdHJveShuZXcgRXJyb3IoYEZyYW1lIHR5cGUgaWQgJHt0eXBlfSBpbiBzdHJlYW0gaWQgJHtpZH0gaGFzIGZhaWxlZCB3aXRoIGNvZGUgJHtjb2RlfS5gKSk7XG4gICAgICB9KTtcbiAgICAgIHJlcS5vbihcImVycm9yXCIsIHJlamVjdFdpdGhEZXN0cm95KTtcbiAgICAgIHJlcS5vbihcImFib3J0ZWRcIiwgKCkgPT4ge1xuICAgICAgICByZWplY3RXaXRoRGVzdHJveShcbiAgICAgICAgICBuZXcgRXJyb3IoYEhUVFAvMiBzdHJlYW0gaXMgYWJub3JtYWxseSBhYm9ydGVkIGluIG1pZC1jb21tdW5pY2F0aW9uIHdpdGggcmVzdWx0IGNvZGUgJHtyZXEucnN0Q29kZX0uYClcbiAgICAgICAgKTtcbiAgICAgIH0pO1xuICAgICAgcmVxLm9uKFwiY2xvc2VcIiwgKCkgPT4ge1xuICAgICAgICBzZXNzaW9uLnVucmVmKCk7XG4gICAgICAgIGlmIChkaXNhYmxlQ29uY3VycmVudFN0cmVhbXMpIHtcbiAgICAgICAgICBzZXNzaW9uLmRlc3Ryb3koKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIWZ1bGZpbGxlZCkge1xuICAgICAgICAgIHJlamVjdFdpdGhEZXN0cm95KG5ldyBFcnJvcihcIlVuZXhwZWN0ZWQgZXJyb3I6IGh0dHAyIHJlcXVlc3QgZGlkIG5vdCBnZXQgYSByZXNwb25zZVwiKSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgd3JpdGVSZXF1ZXN0Qm9keVByb21pc2UgPSB3cml0ZVJlcXVlc3RCb2R5KHJlcSwgcmVxdWVzdCwgcmVxdWVzdFRpbWVvdXQpO1xuICAgIH0pO1xuICB9XG4gIHVwZGF0ZUh0dHBDbGllbnRDb25maWcoa2V5LCB2YWx1ZSkge1xuICAgIHRoaXMuY29uZmlnID0gdm9pZCAwO1xuICAgIHRoaXMuY29uZmlnUHJvdmlkZXIgPSB0aGlzLmNvbmZpZ1Byb3ZpZGVyLnRoZW4oKGNvbmZpZykgPT4ge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgLi4uY29uZmlnLFxuICAgICAgICBba2V5XTogdmFsdWVcbiAgICAgIH07XG4gICAgfSk7XG4gIH1cbiAgaHR0cEhhbmRsZXJDb25maWdzKCkge1xuICAgIHJldHVybiB0aGlzLmNvbmZpZyA/PyB7fTtcbiAgfVxuICAvKipcbiAgICogRGVzdHJveXMgYSBzZXNzaW9uLlxuICAgKiBAcGFyYW0gc2Vzc2lvbiBUaGUgc2Vzc2lvbiB0byBkZXN0cm95LlxuICAgKi9cbiAgZGVzdHJveVNlc3Npb24oc2Vzc2lvbikge1xuICAgIGlmICghc2Vzc2lvbi5kZXN0cm95ZWQpIHtcbiAgICAgIHNlc3Npb24uZGVzdHJveSgpO1xuICAgIH1cbiAgfVxufTtcbl9fbmFtZShfTm9kZUh0dHAySGFuZGxlciwgXCJOb2RlSHR0cDJIYW5kbGVyXCIpO1xudmFyIE5vZGVIdHRwMkhhbmRsZXIgPSBfTm9kZUh0dHAySGFuZGxlcjtcblxuLy8gc3JjL3N0cmVhbS1jb2xsZWN0b3IvY29sbGVjdG9yLnRzXG5cbnZhciBfQ29sbGVjdG9yID0gY2xhc3MgX0NvbGxlY3RvciBleHRlbmRzIGltcG9ydF9zdHJlYW0uV3JpdGFibGUge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBzdXBlciguLi5hcmd1bWVudHMpO1xuICAgIHRoaXMuYnVmZmVyZWRCeXRlcyA9IFtdO1xuICB9XG4gIF93cml0ZShjaHVuaywgZW5jb2RpbmcsIGNhbGxiYWNrKSB7XG4gICAgdGhpcy5idWZmZXJlZEJ5dGVzLnB1c2goY2h1bmspO1xuICAgIGNhbGxiYWNrKCk7XG4gIH1cbn07XG5fX25hbWUoX0NvbGxlY3RvciwgXCJDb2xsZWN0b3JcIik7XG52YXIgQ29sbGVjdG9yID0gX0NvbGxlY3RvcjtcblxuLy8gc3JjL3N0cmVhbS1jb2xsZWN0b3IvaW5kZXgudHNcbnZhciBzdHJlYW1Db2xsZWN0b3IgPSAvKiBAX19QVVJFX18gKi8gX19uYW1lKChzdHJlYW0pID0+IHtcbiAgaWYgKGlzUmVhZGFibGVTdHJlYW1JbnN0YW5jZShzdHJlYW0pKSB7XG4gICAgcmV0dXJuIGNvbGxlY3RSZWFkYWJsZVN0cmVhbShzdHJlYW0pO1xuICB9XG4gIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgY29uc3QgY29sbGVjdG9yID0gbmV3IENvbGxlY3RvcigpO1xuICAgIHN0cmVhbS5waXBlKGNvbGxlY3Rvcik7XG4gICAgc3RyZWFtLm9uKFwiZXJyb3JcIiwgKGVycikgPT4ge1xuICAgICAgY29sbGVjdG9yLmVuZCgpO1xuICAgICAgcmVqZWN0KGVycik7XG4gICAgfSk7XG4gICAgY29sbGVjdG9yLm9uKFwiZXJyb3JcIiwgcmVqZWN0KTtcbiAgICBjb2xsZWN0b3Iub24oXCJmaW5pc2hcIiwgZnVuY3Rpb24oKSB7XG4gICAgICBjb25zdCBieXRlcyA9IG5ldyBVaW50OEFycmF5KEJ1ZmZlci5jb25jYXQodGhpcy5idWZmZXJlZEJ5dGVzKSk7XG4gICAgICByZXNvbHZlKGJ5dGVzKTtcbiAgICB9KTtcbiAgfSk7XG59LCBcInN0cmVhbUNvbGxlY3RvclwiKTtcbnZhciBpc1JlYWRhYmxlU3RyZWFtSW5zdGFuY2UgPSAvKiBAX19QVVJFX18gKi8gX19uYW1lKChzdHJlYW0pID0+IHR5cGVvZiBSZWFkYWJsZVN0cmVhbSA9PT0gXCJmdW5jdGlvblwiICYmIHN0cmVhbSBpbnN0YW5jZW9mIFJlYWRhYmxlU3RyZWFtLCBcImlzUmVhZGFibGVTdHJlYW1JbnN0YW5jZVwiKTtcbmFzeW5jIGZ1bmN0aW9uIGNvbGxlY3RSZWFkYWJsZVN0cmVhbShzdHJlYW0pIHtcbiAgY29uc3QgY2h1bmtzID0gW107XG4gIGNvbnN0IHJlYWRlciA9IHN0cmVhbS5nZXRSZWFkZXIoKTtcbiAgbGV0IGlzRG9uZSA9IGZhbHNlO1xuICBsZXQgbGVuZ3RoID0gMDtcbiAgd2hpbGUgKCFpc0RvbmUpIHtcbiAgICBjb25zdCB7IGRvbmUsIHZhbHVlIH0gPSBhd2FpdCByZWFkZXIucmVhZCgpO1xuICAgIGlmICh2YWx1ZSkge1xuICAgICAgY2h1bmtzLnB1c2godmFsdWUpO1xuICAgICAgbGVuZ3RoICs9IHZhbHVlLmxlbmd0aDtcbiAgICB9XG4gICAgaXNEb25lID0gZG9uZTtcbiAgfVxuICBjb25zdCBjb2xsZWN0ZWQgPSBuZXcgVWludDhBcnJheShsZW5ndGgpO1xuICBsZXQgb2Zmc2V0ID0gMDtcbiAgZm9yIChjb25zdCBjaHVuayBvZiBjaHVua3MpIHtcbiAgICBjb2xsZWN0ZWQuc2V0KGNodW5rLCBvZmZzZXQpO1xuICAgIG9mZnNldCArPSBjaHVuay5sZW5ndGg7XG4gIH1cbiAgcmV0dXJuIGNvbGxlY3RlZDtcbn1cbl9fbmFtZShjb2xsZWN0UmVhZGFibGVTdHJlYW0sIFwiY29sbGVjdFJlYWRhYmxlU3RyZWFtXCIpO1xuLy8gQW5ub3RhdGUgdGhlIENvbW1vbkpTIGV4cG9ydCBuYW1lcyBmb3IgRVNNIGltcG9ydCBpbiBub2RlOlxuXG4wICYmIChtb2R1bGUuZXhwb3J0cyA9IHtcbiAgREVGQVVMVF9SRVFVRVNUX1RJTUVPVVQsXG4gIE5vZGVIdHRwSGFuZGxlcixcbiAgTm9kZUh0dHAySGFuZGxlcixcbiAgc3RyZWFtQ29sbGVjdG9yXG59KTtcblxuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/../../../../node_modules/.pnpm/@smithy+node-http-handler@3.3.3/node_modules/@smithy/node-http-handler/dist-cjs/index.js\n");

/***/ }),

/***/ "(rsc)/../../../../node_modules/.pnpm/@smithy+node-http-handler@3.3.3/node_modules/@smithy/node-http-handler/dist-es/constants.js":
/*!**********************************************************************************************************************************!*\
  !*** ../../../../node_modules/.pnpm/@smithy+node-http-handler@3.3.3/node_modules/@smithy/node-http-handler/dist-es/constants.js ***!
  \**********************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   NODEJS_TIMEOUT_ERROR_CODES: () => (/* binding */ NODEJS_TIMEOUT_ERROR_CODES)\n/* harmony export */ });\nconst NODEJS_TIMEOUT_ERROR_CODES = [\"ECONNRESET\", \"EPIPE\", \"ETIMEDOUT\"];\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzLy5wbnBtL0BzbWl0aHkrbm9kZS1odHRwLWhhbmRsZXJAMy4zLjMvbm9kZV9tb2R1bGVzL0BzbWl0aHkvbm9kZS1odHRwLWhhbmRsZXIvZGlzdC1lcy9jb25zdGFudHMuanMiLCJtYXBwaW5ncyI6Ijs7OztBQUFPIiwic291cmNlcyI6WyIvVXNlcnMvZXJpbmplcnJpL25vZGVfbW9kdWxlcy8ucG5wbS9Ac21pdGh5K25vZGUtaHR0cC1oYW5kbGVyQDMuMy4zL25vZGVfbW9kdWxlcy9Ac21pdGh5L25vZGUtaHR0cC1oYW5kbGVyL2Rpc3QtZXMvY29uc3RhbnRzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBjb25zdCBOT0RFSlNfVElNRU9VVF9FUlJPUl9DT0RFUyA9IFtcIkVDT05OUkVTRVRcIiwgXCJFUElQRVwiLCBcIkVUSU1FRE9VVFwiXTtcbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/../../../../node_modules/.pnpm/@smithy+node-http-handler@3.3.3/node_modules/@smithy/node-http-handler/dist-es/constants.js\n");

/***/ }),

/***/ "(rsc)/../../../../node_modules/.pnpm/@smithy+node-http-handler@3.3.3/node_modules/@smithy/node-http-handler/dist-es/get-transformed-headers.js":
/*!************************************************************************************************************************************************!*\
  !*** ../../../../node_modules/.pnpm/@smithy+node-http-handler@3.3.3/node_modules/@smithy/node-http-handler/dist-es/get-transformed-headers.js ***!
  \************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getTransformedHeaders: () => (/* binding */ getTransformedHeaders)\n/* harmony export */ });\nconst getTransformedHeaders = (headers) => {\n    const transformedHeaders = {};\n    for (const name of Object.keys(headers)) {\n        const headerValues = headers[name];\n        transformedHeaders[name] = Array.isArray(headerValues) ? headerValues.join(\",\") : headerValues;\n    }\n    return transformedHeaders;\n};\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzLy5wbnBtL0BzbWl0aHkrbm9kZS1odHRwLWhhbmRsZXJAMy4zLjMvbm9kZV9tb2R1bGVzL0BzbWl0aHkvbm9kZS1odHRwLWhhbmRsZXIvZGlzdC1lcy9nZXQtdHJhbnNmb3JtZWQtaGVhZGVycy5qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNpQyIsInNvdXJjZXMiOlsiL1VzZXJzL2VyaW5qZXJyaS9ub2RlX21vZHVsZXMvLnBucG0vQHNtaXRoeStub2RlLWh0dHAtaGFuZGxlckAzLjMuMy9ub2RlX21vZHVsZXMvQHNtaXRoeS9ub2RlLWh0dHAtaGFuZGxlci9kaXN0LWVzL2dldC10cmFuc2Zvcm1lZC1oZWFkZXJzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IGdldFRyYW5zZm9ybWVkSGVhZGVycyA9IChoZWFkZXJzKSA9PiB7XG4gICAgY29uc3QgdHJhbnNmb3JtZWRIZWFkZXJzID0ge307XG4gICAgZm9yIChjb25zdCBuYW1lIG9mIE9iamVjdC5rZXlzKGhlYWRlcnMpKSB7XG4gICAgICAgIGNvbnN0IGhlYWRlclZhbHVlcyA9IGhlYWRlcnNbbmFtZV07XG4gICAgICAgIHRyYW5zZm9ybWVkSGVhZGVyc1tuYW1lXSA9IEFycmF5LmlzQXJyYXkoaGVhZGVyVmFsdWVzKSA/IGhlYWRlclZhbHVlcy5qb2luKFwiLFwiKSA6IGhlYWRlclZhbHVlcztcbiAgICB9XG4gICAgcmV0dXJuIHRyYW5zZm9ybWVkSGVhZGVycztcbn07XG5leHBvcnQgeyBnZXRUcmFuc2Zvcm1lZEhlYWRlcnMgfTtcbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/../../../../node_modules/.pnpm/@smithy+node-http-handler@3.3.3/node_modules/@smithy/node-http-handler/dist-es/get-transformed-headers.js\n");

/***/ }),

/***/ "(rsc)/../../../../node_modules/.pnpm/@smithy+node-http-handler@3.3.3/node_modules/@smithy/node-http-handler/dist-es/index.js":
/*!******************************************************************************************************************************!*\
  !*** ../../../../node_modules/.pnpm/@smithy+node-http-handler@3.3.3/node_modules/@smithy/node-http-handler/dist-es/index.js ***!
  \******************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DEFAULT_REQUEST_TIMEOUT: () => (/* reexport safe */ _node_http_handler__WEBPACK_IMPORTED_MODULE_0__.DEFAULT_REQUEST_TIMEOUT),\n/* harmony export */   NodeHttp2Handler: () => (/* reexport safe */ _node_http2_handler__WEBPACK_IMPORTED_MODULE_1__.NodeHttp2Handler),\n/* harmony export */   NodeHttpHandler: () => (/* reexport safe */ _node_http_handler__WEBPACK_IMPORTED_MODULE_0__.NodeHttpHandler),\n/* harmony export */   streamCollector: () => (/* reexport safe */ _stream_collector__WEBPACK_IMPORTED_MODULE_2__.streamCollector)\n/* harmony export */ });\n/* harmony import */ var _node_http_handler__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./node-http-handler */ \"(rsc)/../../../../node_modules/.pnpm/@smithy+node-http-handler@3.3.3/node_modules/@smithy/node-http-handler/dist-es/node-http-handler.js\");\n/* harmony import */ var _node_http2_handler__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./node-http2-handler */ \"(rsc)/../../../../node_modules/.pnpm/@smithy+node-http-handler@3.3.3/node_modules/@smithy/node-http-handler/dist-es/node-http2-handler.js\");\n/* harmony import */ var _stream_collector__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./stream-collector */ \"(rsc)/../../../../node_modules/.pnpm/@smithy+node-http-handler@3.3.3/node_modules/@smithy/node-http-handler/dist-es/stream-collector/index.js\");\n\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzLy5wbnBtL0BzbWl0aHkrbm9kZS1odHRwLWhhbmRsZXJAMy4zLjMvbm9kZV9tb2R1bGVzL0BzbWl0aHkvbm9kZS1odHRwLWhhbmRsZXIvZGlzdC1lcy9pbmRleC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQW9DO0FBQ0M7QUFDRiIsInNvdXJjZXMiOlsiL1VzZXJzL2VyaW5qZXJyaS9ub2RlX21vZHVsZXMvLnBucG0vQHNtaXRoeStub2RlLWh0dHAtaGFuZGxlckAzLjMuMy9ub2RlX21vZHVsZXMvQHNtaXRoeS9ub2RlLWh0dHAtaGFuZGxlci9kaXN0LWVzL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCAqIGZyb20gXCIuL25vZGUtaHR0cC1oYW5kbGVyXCI7XG5leHBvcnQgKiBmcm9tIFwiLi9ub2RlLWh0dHAyLWhhbmRsZXJcIjtcbmV4cG9ydCAqIGZyb20gXCIuL3N0cmVhbS1jb2xsZWN0b3JcIjtcbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/../../../../node_modules/.pnpm/@smithy+node-http-handler@3.3.3/node_modules/@smithy/node-http-handler/dist-es/index.js\n");

/***/ }),

/***/ "(rsc)/../../../../node_modules/.pnpm/@smithy+node-http-handler@3.3.3/node_modules/@smithy/node-http-handler/dist-es/node-http-handler.js":
/*!******************************************************************************************************************************************!*\
  !*** ../../../../node_modules/.pnpm/@smithy+node-http-handler@3.3.3/node_modules/@smithy/node-http-handler/dist-es/node-http-handler.js ***!
  \******************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DEFAULT_REQUEST_TIMEOUT: () => (/* binding */ DEFAULT_REQUEST_TIMEOUT),\n/* harmony export */   NodeHttpHandler: () => (/* binding */ NodeHttpHandler)\n/* harmony export */ });\n/* harmony import */ var _smithy_protocol_http__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @smithy/protocol-http */ \"(rsc)/../../../../node_modules/.pnpm/@smithy+protocol-http@4.1.8/node_modules/@smithy/protocol-http/dist-es/index.js\");\n/* harmony import */ var _smithy_querystring_builder__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @smithy/querystring-builder */ \"(rsc)/../../../../node_modules/.pnpm/@smithy+querystring-builder@3.0.11/node_modules/@smithy/querystring-builder/dist-es/index.js\");\n/* harmony import */ var http__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! http */ \"http\");\n/* harmony import */ var http__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(http__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var https__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! https */ \"https\");\n/* harmony import */ var https__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(https__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./constants */ \"(rsc)/../../../../node_modules/.pnpm/@smithy+node-http-handler@3.3.3/node_modules/@smithy/node-http-handler/dist-es/constants.js\");\n/* harmony import */ var _get_transformed_headers__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./get-transformed-headers */ \"(rsc)/../../../../node_modules/.pnpm/@smithy+node-http-handler@3.3.3/node_modules/@smithy/node-http-handler/dist-es/get-transformed-headers.js\");\n/* harmony import */ var _set_connection_timeout__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./set-connection-timeout */ \"(rsc)/../../../../node_modules/.pnpm/@smithy+node-http-handler@3.3.3/node_modules/@smithy/node-http-handler/dist-es/set-connection-timeout.js\");\n/* harmony import */ var _set_socket_keep_alive__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./set-socket-keep-alive */ \"(rsc)/../../../../node_modules/.pnpm/@smithy+node-http-handler@3.3.3/node_modules/@smithy/node-http-handler/dist-es/set-socket-keep-alive.js\");\n/* harmony import */ var _set_socket_timeout__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./set-socket-timeout */ \"(rsc)/../../../../node_modules/.pnpm/@smithy+node-http-handler@3.3.3/node_modules/@smithy/node-http-handler/dist-es/set-socket-timeout.js\");\n/* harmony import */ var _timing__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./timing */ \"(rsc)/../../../../node_modules/.pnpm/@smithy+node-http-handler@3.3.3/node_modules/@smithy/node-http-handler/dist-es/timing.js\");\n/* harmony import */ var _write_request_body__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./write-request-body */ \"(rsc)/../../../../node_modules/.pnpm/@smithy+node-http-handler@3.3.3/node_modules/@smithy/node-http-handler/dist-es/write-request-body.js\");\n\n\n\n\n\n\n\n\n\n\n\nconst DEFAULT_REQUEST_TIMEOUT = 0;\nclass NodeHttpHandler {\n    static create(instanceOrOptions) {\n        if (typeof instanceOrOptions?.handle === \"function\") {\n            return instanceOrOptions;\n        }\n        return new NodeHttpHandler(instanceOrOptions);\n    }\n    static checkSocketUsage(agent, socketWarningTimestamp, logger = console) {\n        const { sockets, requests, maxSockets } = agent;\n        if (typeof maxSockets !== \"number\" || maxSockets === Infinity) {\n            return socketWarningTimestamp;\n        }\n        const interval = 15000;\n        if (Date.now() - interval < socketWarningTimestamp) {\n            return socketWarningTimestamp;\n        }\n        if (sockets && requests) {\n            for (const origin in sockets) {\n                const socketsInUse = sockets[origin]?.length ?? 0;\n                const requestsEnqueued = requests[origin]?.length ?? 0;\n                if (socketsInUse >= maxSockets && requestsEnqueued >= 2 * maxSockets) {\n                    logger?.warn?.(`@smithy/node-http-handler:WARN - socket usage at capacity=${socketsInUse} and ${requestsEnqueued} additional requests are enqueued.\nSee https://docs.aws.amazon.com/sdk-for-javascript/v3/developer-guide/node-configuring-maxsockets.html\nor increase socketAcquisitionWarningTimeout=(millis) in the NodeHttpHandler config.`);\n                    return Date.now();\n                }\n            }\n        }\n        return socketWarningTimestamp;\n    }\n    constructor(options) {\n        this.socketWarningTimestamp = 0;\n        this.metadata = { handlerProtocol: \"http/1.1\" };\n        this.configProvider = new Promise((resolve, reject) => {\n            if (typeof options === \"function\") {\n                options()\n                    .then((_options) => {\n                    resolve(this.resolveDefaultConfig(_options));\n                })\n                    .catch(reject);\n            }\n            else {\n                resolve(this.resolveDefaultConfig(options));\n            }\n        });\n    }\n    resolveDefaultConfig(options) {\n        const { requestTimeout, connectionTimeout, socketTimeout, httpAgent, httpsAgent } = options || {};\n        const keepAlive = true;\n        const maxSockets = 50;\n        return {\n            connectionTimeout,\n            requestTimeout: requestTimeout ?? socketTimeout,\n            httpAgent: (() => {\n                if (httpAgent instanceof http__WEBPACK_IMPORTED_MODULE_2__.Agent || typeof httpAgent?.destroy === \"function\") {\n                    return httpAgent;\n                }\n                return new http__WEBPACK_IMPORTED_MODULE_2__.Agent({ keepAlive, maxSockets, ...httpAgent });\n            })(),\n            httpsAgent: (() => {\n                if (httpsAgent instanceof https__WEBPACK_IMPORTED_MODULE_3__.Agent || typeof httpsAgent?.destroy === \"function\") {\n                    return httpsAgent;\n                }\n                return new https__WEBPACK_IMPORTED_MODULE_3__.Agent({ keepAlive, maxSockets, ...httpsAgent });\n            })(),\n            logger: console,\n        };\n    }\n    destroy() {\n        this.config?.httpAgent?.destroy();\n        this.config?.httpsAgent?.destroy();\n    }\n    async handle(request, { abortSignal } = {}) {\n        if (!this.config) {\n            this.config = await this.configProvider;\n        }\n        return new Promise((_resolve, _reject) => {\n            let writeRequestBodyPromise = undefined;\n            const timeouts = [];\n            const resolve = async (arg) => {\n                await writeRequestBodyPromise;\n                timeouts.forEach(_timing__WEBPACK_IMPORTED_MODULE_9__.timing.clearTimeout);\n                _resolve(arg);\n            };\n            const reject = async (arg) => {\n                await writeRequestBodyPromise;\n                timeouts.forEach(_timing__WEBPACK_IMPORTED_MODULE_9__.timing.clearTimeout);\n                _reject(arg);\n            };\n            if (!this.config) {\n                throw new Error(\"Node HTTP request handler config is not resolved\");\n            }\n            if (abortSignal?.aborted) {\n                const abortError = new Error(\"Request aborted\");\n                abortError.name = \"AbortError\";\n                reject(abortError);\n                return;\n            }\n            const isSSL = request.protocol === \"https:\";\n            const agent = isSSL ? this.config.httpsAgent : this.config.httpAgent;\n            timeouts.push(_timing__WEBPACK_IMPORTED_MODULE_9__.timing.setTimeout(() => {\n                this.socketWarningTimestamp = NodeHttpHandler.checkSocketUsage(agent, this.socketWarningTimestamp, this.config.logger);\n            }, this.config.socketAcquisitionWarningTimeout ??\n                (this.config.requestTimeout ?? 2000) + (this.config.connectionTimeout ?? 1000)));\n            const queryString = (0,_smithy_querystring_builder__WEBPACK_IMPORTED_MODULE_1__.buildQueryString)(request.query || {});\n            let auth = undefined;\n            if (request.username != null || request.password != null) {\n                const username = request.username ?? \"\";\n                const password = request.password ?? \"\";\n                auth = `${username}:${password}`;\n            }\n            let path = request.path;\n            if (queryString) {\n                path += `?${queryString}`;\n            }\n            if (request.fragment) {\n                path += `#${request.fragment}`;\n            }\n            let hostname = request.hostname ?? \"\";\n            if (hostname[0] === \"[\" && hostname.endsWith(\"]\")) {\n                hostname = request.hostname.slice(1, -1);\n            }\n            else {\n                hostname = request.hostname;\n            }\n            const nodeHttpsOptions = {\n                headers: request.headers,\n                host: hostname,\n                method: request.method,\n                path,\n                port: request.port,\n                agent,\n                auth,\n            };\n            const requestFunc = isSSL ? https__WEBPACK_IMPORTED_MODULE_3__.request : http__WEBPACK_IMPORTED_MODULE_2__.request;\n            const req = requestFunc(nodeHttpsOptions, (res) => {\n                const httpResponse = new _smithy_protocol_http__WEBPACK_IMPORTED_MODULE_0__.HttpResponse({\n                    statusCode: res.statusCode || -1,\n                    reason: res.statusMessage,\n                    headers: (0,_get_transformed_headers__WEBPACK_IMPORTED_MODULE_5__.getTransformedHeaders)(res.headers),\n                    body: res,\n                });\n                resolve({ response: httpResponse });\n            });\n            req.on(\"error\", (err) => {\n                if (_constants__WEBPACK_IMPORTED_MODULE_4__.NODEJS_TIMEOUT_ERROR_CODES.includes(err.code)) {\n                    reject(Object.assign(err, { name: \"TimeoutError\" }));\n                }\n                else {\n                    reject(err);\n                }\n            });\n            if (abortSignal) {\n                const onAbort = () => {\n                    req.destroy();\n                    const abortError = new Error(\"Request aborted\");\n                    abortError.name = \"AbortError\";\n                    reject(abortError);\n                };\n                if (typeof abortSignal.addEventListener === \"function\") {\n                    const signal = abortSignal;\n                    signal.addEventListener(\"abort\", onAbort, { once: true });\n                    req.once(\"close\", () => signal.removeEventListener(\"abort\", onAbort));\n                }\n                else {\n                    abortSignal.onabort = onAbort;\n                }\n            }\n            timeouts.push((0,_set_connection_timeout__WEBPACK_IMPORTED_MODULE_6__.setConnectionTimeout)(req, reject, this.config.connectionTimeout));\n            timeouts.push((0,_set_socket_timeout__WEBPACK_IMPORTED_MODULE_8__.setSocketTimeout)(req, reject, this.config.requestTimeout));\n            const httpAgent = nodeHttpsOptions.agent;\n            if (typeof httpAgent === \"object\" && \"keepAlive\" in httpAgent) {\n                timeouts.push((0,_set_socket_keep_alive__WEBPACK_IMPORTED_MODULE_7__.setSocketKeepAlive)(req, {\n                    keepAlive: httpAgent.keepAlive,\n                    keepAliveMsecs: httpAgent.keepAliveMsecs,\n                }));\n            }\n            writeRequestBodyPromise = (0,_write_request_body__WEBPACK_IMPORTED_MODULE_10__.writeRequestBody)(req, request, this.config.requestTimeout).catch((e) => {\n                timeouts.forEach(_timing__WEBPACK_IMPORTED_MODULE_9__.timing.clearTimeout);\n                return _reject(e);\n            });\n        });\n    }\n    updateHttpClientConfig(key, value) {\n        this.config = undefined;\n        this.configProvider = this.configProvider.then((config) => {\n            return {\n                ...config,\n                [key]: value,\n            };\n        });\n    }\n    httpHandlerConfigs() {\n        return this.config ?? {};\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzLy5wbnBtL0BzbWl0aHkrbm9kZS1odHRwLWhhbmRsZXJAMy4zLjMvbm9kZV9tb2R1bGVzL0BzbWl0aHkvbm9kZS1odHRwLWhhbmRsZXIvZGlzdC1lcy9ub2RlLWh0dHAtaGFuZGxlci5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBcUQ7QUFDVTtBQUNIO0FBQ0c7QUFDTjtBQUNTO0FBQ0Y7QUFDSDtBQUNMO0FBQ3RCO0FBQ3NCO0FBQ2pEO0FBQ0E7QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQixnQ0FBZ0M7QUFDaEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0dBQWdHLGNBQWMsTUFBTSxrQkFBa0I7QUFDdEk7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQkFBMEI7QUFDMUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxnQkFBZ0IsMEVBQTBFO0FBQzFGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlDQUF5Qyx1Q0FBTTtBQUMvQztBQUNBO0FBQ0EsMkJBQTJCLHVDQUFNLEdBQUcscUNBQXFDO0FBQ3pFLGFBQWE7QUFDYjtBQUNBLDBDQUEwQyx3Q0FBTztBQUNqRDtBQUNBO0FBQ0EsMkJBQTJCLHdDQUFPLEdBQUcsc0NBQXNDO0FBQzNFLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRCQUE0QixjQUFjLElBQUk7QUFDOUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlDQUFpQywyQ0FBTTtBQUN2QztBQUNBO0FBQ0E7QUFDQTtBQUNBLGlDQUFpQywyQ0FBTTtBQUN2QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBCQUEwQiwyQ0FBTTtBQUNoQztBQUNBLGFBQWE7QUFDYjtBQUNBLGdDQUFnQyw2RUFBZ0Isb0JBQW9CO0FBQ3BFO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMEJBQTBCLFNBQVMsR0FBRyxTQUFTO0FBQy9DO0FBQ0E7QUFDQTtBQUNBLDRCQUE0QixZQUFZO0FBQ3hDO0FBQ0E7QUFDQSw0QkFBNEIsaUJBQWlCO0FBQzdDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3Q0FBd0MsMENBQVMsR0FBRyx5Q0FBUTtBQUM1RDtBQUNBLHlDQUF5QywrREFBWTtBQUNyRDtBQUNBO0FBQ0EsNkJBQTZCLCtFQUFxQjtBQUNsRDtBQUNBLGlCQUFpQjtBQUNqQiwwQkFBMEIsd0JBQXdCO0FBQ2xELGFBQWE7QUFDYjtBQUNBLG9CQUFvQixrRUFBMEI7QUFDOUMsZ0RBQWdELHNCQUFzQjtBQUN0RTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnRUFBZ0UsWUFBWTtBQUM1RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQkFBMEIsNkVBQW9CO0FBQzlDLDBCQUEwQixxRUFBZ0I7QUFDMUM7QUFDQTtBQUNBLDhCQUE4QiwwRUFBa0I7QUFDaEQ7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBLHNDQUFzQyxzRUFBZ0I7QUFDdEQsaUNBQWlDLDJDQUFNO0FBQ3ZDO0FBQ0EsYUFBYTtBQUNiLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIi9Vc2Vycy9lcmluamVycmkvbm9kZV9tb2R1bGVzLy5wbnBtL0BzbWl0aHkrbm9kZS1odHRwLWhhbmRsZXJAMy4zLjMvbm9kZV9tb2R1bGVzL0BzbWl0aHkvbm9kZS1odHRwLWhhbmRsZXIvZGlzdC1lcy9ub2RlLWh0dHAtaGFuZGxlci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBIdHRwUmVzcG9uc2UgfSBmcm9tIFwiQHNtaXRoeS9wcm90b2NvbC1odHRwXCI7XG5pbXBvcnQgeyBidWlsZFF1ZXJ5U3RyaW5nIH0gZnJvbSBcIkBzbWl0aHkvcXVlcnlzdHJpbmctYnVpbGRlclwiO1xuaW1wb3J0IHsgQWdlbnQgYXMgaEFnZW50LCByZXF1ZXN0IGFzIGhSZXF1ZXN0IH0gZnJvbSBcImh0dHBcIjtcbmltcG9ydCB7IEFnZW50IGFzIGhzQWdlbnQsIHJlcXVlc3QgYXMgaHNSZXF1ZXN0IH0gZnJvbSBcImh0dHBzXCI7XG5pbXBvcnQgeyBOT0RFSlNfVElNRU9VVF9FUlJPUl9DT0RFUyB9IGZyb20gXCIuL2NvbnN0YW50c1wiO1xuaW1wb3J0IHsgZ2V0VHJhbnNmb3JtZWRIZWFkZXJzIH0gZnJvbSBcIi4vZ2V0LXRyYW5zZm9ybWVkLWhlYWRlcnNcIjtcbmltcG9ydCB7IHNldENvbm5lY3Rpb25UaW1lb3V0IH0gZnJvbSBcIi4vc2V0LWNvbm5lY3Rpb24tdGltZW91dFwiO1xuaW1wb3J0IHsgc2V0U29ja2V0S2VlcEFsaXZlIH0gZnJvbSBcIi4vc2V0LXNvY2tldC1rZWVwLWFsaXZlXCI7XG5pbXBvcnQgeyBzZXRTb2NrZXRUaW1lb3V0IH0gZnJvbSBcIi4vc2V0LXNvY2tldC10aW1lb3V0XCI7XG5pbXBvcnQgeyB0aW1pbmcgfSBmcm9tIFwiLi90aW1pbmdcIjtcbmltcG9ydCB7IHdyaXRlUmVxdWVzdEJvZHkgfSBmcm9tIFwiLi93cml0ZS1yZXF1ZXN0LWJvZHlcIjtcbmV4cG9ydCBjb25zdCBERUZBVUxUX1JFUVVFU1RfVElNRU9VVCA9IDA7XG5leHBvcnQgY2xhc3MgTm9kZUh0dHBIYW5kbGVyIHtcbiAgICBzdGF0aWMgY3JlYXRlKGluc3RhbmNlT3JPcHRpb25zKSB7XG4gICAgICAgIGlmICh0eXBlb2YgaW5zdGFuY2VPck9wdGlvbnM/LmhhbmRsZSA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICByZXR1cm4gaW5zdGFuY2VPck9wdGlvbnM7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBOb2RlSHR0cEhhbmRsZXIoaW5zdGFuY2VPck9wdGlvbnMpO1xuICAgIH1cbiAgICBzdGF0aWMgY2hlY2tTb2NrZXRVc2FnZShhZ2VudCwgc29ja2V0V2FybmluZ1RpbWVzdGFtcCwgbG9nZ2VyID0gY29uc29sZSkge1xuICAgICAgICBjb25zdCB7IHNvY2tldHMsIHJlcXVlc3RzLCBtYXhTb2NrZXRzIH0gPSBhZ2VudDtcbiAgICAgICAgaWYgKHR5cGVvZiBtYXhTb2NrZXRzICE9PSBcIm51bWJlclwiIHx8IG1heFNvY2tldHMgPT09IEluZmluaXR5KSB7XG4gICAgICAgICAgICByZXR1cm4gc29ja2V0V2FybmluZ1RpbWVzdGFtcDtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBpbnRlcnZhbCA9IDE1MDAwO1xuICAgICAgICBpZiAoRGF0ZS5ub3coKSAtIGludGVydmFsIDwgc29ja2V0V2FybmluZ1RpbWVzdGFtcCkge1xuICAgICAgICAgICAgcmV0dXJuIHNvY2tldFdhcm5pbmdUaW1lc3RhbXA7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHNvY2tldHMgJiYgcmVxdWVzdHMpIHtcbiAgICAgICAgICAgIGZvciAoY29uc3Qgb3JpZ2luIGluIHNvY2tldHMpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBzb2NrZXRzSW5Vc2UgPSBzb2NrZXRzW29yaWdpbl0/Lmxlbmd0aCA/PyAwO1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlcXVlc3RzRW5xdWV1ZWQgPSByZXF1ZXN0c1tvcmlnaW5dPy5sZW5ndGggPz8gMDtcbiAgICAgICAgICAgICAgICBpZiAoc29ja2V0c0luVXNlID49IG1heFNvY2tldHMgJiYgcmVxdWVzdHNFbnF1ZXVlZCA+PSAyICogbWF4U29ja2V0cykge1xuICAgICAgICAgICAgICAgICAgICBsb2dnZXI/Lndhcm4/LihgQHNtaXRoeS9ub2RlLWh0dHAtaGFuZGxlcjpXQVJOIC0gc29ja2V0IHVzYWdlIGF0IGNhcGFjaXR5PSR7c29ja2V0c0luVXNlfSBhbmQgJHtyZXF1ZXN0c0VucXVldWVkfSBhZGRpdGlvbmFsIHJlcXVlc3RzIGFyZSBlbnF1ZXVlZC5cblNlZSBodHRwczovL2RvY3MuYXdzLmFtYXpvbi5jb20vc2RrLWZvci1qYXZhc2NyaXB0L3YzL2RldmVsb3Blci1ndWlkZS9ub2RlLWNvbmZpZ3VyaW5nLW1heHNvY2tldHMuaHRtbFxub3IgaW5jcmVhc2Ugc29ja2V0QWNxdWlzaXRpb25XYXJuaW5nVGltZW91dD0obWlsbGlzKSBpbiB0aGUgTm9kZUh0dHBIYW5kbGVyIGNvbmZpZy5gKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIERhdGUubm93KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBzb2NrZXRXYXJuaW5nVGltZXN0YW1wO1xuICAgIH1cbiAgICBjb25zdHJ1Y3RvcihvcHRpb25zKSB7XG4gICAgICAgIHRoaXMuc29ja2V0V2FybmluZ1RpbWVzdGFtcCA9IDA7XG4gICAgICAgIHRoaXMubWV0YWRhdGEgPSB7IGhhbmRsZXJQcm90b2NvbDogXCJodHRwLzEuMVwiIH07XG4gICAgICAgIHRoaXMuY29uZmlnUHJvdmlkZXIgPSBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIG9wdGlvbnMgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgICAgICAgIG9wdGlvbnMoKVxuICAgICAgICAgICAgICAgICAgICAudGhlbigoX29wdGlvbnMpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSh0aGlzLnJlc29sdmVEZWZhdWx0Q29uZmlnKF9vcHRpb25zKSk7XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgLmNhdGNoKHJlamVjdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXNvbHZlKHRoaXMucmVzb2x2ZURlZmF1bHRDb25maWcob3B0aW9ucykpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgcmVzb2x2ZURlZmF1bHRDb25maWcob3B0aW9ucykge1xuICAgICAgICBjb25zdCB7IHJlcXVlc3RUaW1lb3V0LCBjb25uZWN0aW9uVGltZW91dCwgc29ja2V0VGltZW91dCwgaHR0cEFnZW50LCBodHRwc0FnZW50IH0gPSBvcHRpb25zIHx8IHt9O1xuICAgICAgICBjb25zdCBrZWVwQWxpdmUgPSB0cnVlO1xuICAgICAgICBjb25zdCBtYXhTb2NrZXRzID0gNTA7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBjb25uZWN0aW9uVGltZW91dCxcbiAgICAgICAgICAgIHJlcXVlc3RUaW1lb3V0OiByZXF1ZXN0VGltZW91dCA/PyBzb2NrZXRUaW1lb3V0LFxuICAgICAgICAgICAgaHR0cEFnZW50OiAoKCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChodHRwQWdlbnQgaW5zdGFuY2VvZiBoQWdlbnQgfHwgdHlwZW9mIGh0dHBBZ2VudD8uZGVzdHJveSA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBodHRwQWdlbnQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgaEFnZW50KHsga2VlcEFsaXZlLCBtYXhTb2NrZXRzLCAuLi5odHRwQWdlbnQgfSk7XG4gICAgICAgICAgICB9KSgpLFxuICAgICAgICAgICAgaHR0cHNBZ2VudDogKCgpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoaHR0cHNBZ2VudCBpbnN0YW5jZW9mIGhzQWdlbnQgfHwgdHlwZW9mIGh0dHBzQWdlbnQ/LmRlc3Ryb3kgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gaHR0cHNBZ2VudDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBoc0FnZW50KHsga2VlcEFsaXZlLCBtYXhTb2NrZXRzLCAuLi5odHRwc0FnZW50IH0pO1xuICAgICAgICAgICAgfSkoKSxcbiAgICAgICAgICAgIGxvZ2dlcjogY29uc29sZSxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgZGVzdHJveSgpIHtcbiAgICAgICAgdGhpcy5jb25maWc/Lmh0dHBBZ2VudD8uZGVzdHJveSgpO1xuICAgICAgICB0aGlzLmNvbmZpZz8uaHR0cHNBZ2VudD8uZGVzdHJveSgpO1xuICAgIH1cbiAgICBhc3luYyBoYW5kbGUocmVxdWVzdCwgeyBhYm9ydFNpZ25hbCB9ID0ge30pIHtcbiAgICAgICAgaWYgKCF0aGlzLmNvbmZpZykge1xuICAgICAgICAgICAgdGhpcy5jb25maWcgPSBhd2FpdCB0aGlzLmNvbmZpZ1Byb3ZpZGVyO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgoX3Jlc29sdmUsIF9yZWplY3QpID0+IHtcbiAgICAgICAgICAgIGxldCB3cml0ZVJlcXVlc3RCb2R5UHJvbWlzZSA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgIGNvbnN0IHRpbWVvdXRzID0gW107XG4gICAgICAgICAgICBjb25zdCByZXNvbHZlID0gYXN5bmMgKGFyZykgPT4ge1xuICAgICAgICAgICAgICAgIGF3YWl0IHdyaXRlUmVxdWVzdEJvZHlQcm9taXNlO1xuICAgICAgICAgICAgICAgIHRpbWVvdXRzLmZvckVhY2godGltaW5nLmNsZWFyVGltZW91dCk7XG4gICAgICAgICAgICAgICAgX3Jlc29sdmUoYXJnKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBjb25zdCByZWplY3QgPSBhc3luYyAoYXJnKSA9PiB7XG4gICAgICAgICAgICAgICAgYXdhaXQgd3JpdGVSZXF1ZXN0Qm9keVByb21pc2U7XG4gICAgICAgICAgICAgICAgdGltZW91dHMuZm9yRWFjaCh0aW1pbmcuY2xlYXJUaW1lb3V0KTtcbiAgICAgICAgICAgICAgICBfcmVqZWN0KGFyZyk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgaWYgKCF0aGlzLmNvbmZpZykge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIk5vZGUgSFRUUCByZXF1ZXN0IGhhbmRsZXIgY29uZmlnIGlzIG5vdCByZXNvbHZlZFwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChhYm9ydFNpZ25hbD8uYWJvcnRlZCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGFib3J0RXJyb3IgPSBuZXcgRXJyb3IoXCJSZXF1ZXN0IGFib3J0ZWRcIik7XG4gICAgICAgICAgICAgICAgYWJvcnRFcnJvci5uYW1lID0gXCJBYm9ydEVycm9yXCI7XG4gICAgICAgICAgICAgICAgcmVqZWN0KGFib3J0RXJyb3IpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGlzU1NMID0gcmVxdWVzdC5wcm90b2NvbCA9PT0gXCJodHRwczpcIjtcbiAgICAgICAgICAgIGNvbnN0IGFnZW50ID0gaXNTU0wgPyB0aGlzLmNvbmZpZy5odHRwc0FnZW50IDogdGhpcy5jb25maWcuaHR0cEFnZW50O1xuICAgICAgICAgICAgdGltZW91dHMucHVzaCh0aW1pbmcuc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5zb2NrZXRXYXJuaW5nVGltZXN0YW1wID0gTm9kZUh0dHBIYW5kbGVyLmNoZWNrU29ja2V0VXNhZ2UoYWdlbnQsIHRoaXMuc29ja2V0V2FybmluZ1RpbWVzdGFtcCwgdGhpcy5jb25maWcubG9nZ2VyKTtcbiAgICAgICAgICAgIH0sIHRoaXMuY29uZmlnLnNvY2tldEFjcXVpc2l0aW9uV2FybmluZ1RpbWVvdXQgPz9cbiAgICAgICAgICAgICAgICAodGhpcy5jb25maWcucmVxdWVzdFRpbWVvdXQgPz8gMjAwMCkgKyAodGhpcy5jb25maWcuY29ubmVjdGlvblRpbWVvdXQgPz8gMTAwMCkpKTtcbiAgICAgICAgICAgIGNvbnN0IHF1ZXJ5U3RyaW5nID0gYnVpbGRRdWVyeVN0cmluZyhyZXF1ZXN0LnF1ZXJ5IHx8IHt9KTtcbiAgICAgICAgICAgIGxldCBhdXRoID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgaWYgKHJlcXVlc3QudXNlcm5hbWUgIT0gbnVsbCB8fCByZXF1ZXN0LnBhc3N3b3JkICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB1c2VybmFtZSA9IHJlcXVlc3QudXNlcm5hbWUgPz8gXCJcIjtcbiAgICAgICAgICAgICAgICBjb25zdCBwYXNzd29yZCA9IHJlcXVlc3QucGFzc3dvcmQgPz8gXCJcIjtcbiAgICAgICAgICAgICAgICBhdXRoID0gYCR7dXNlcm5hbWV9OiR7cGFzc3dvcmR9YDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxldCBwYXRoID0gcmVxdWVzdC5wYXRoO1xuICAgICAgICAgICAgaWYgKHF1ZXJ5U3RyaW5nKSB7XG4gICAgICAgICAgICAgICAgcGF0aCArPSBgPyR7cXVlcnlTdHJpbmd9YDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChyZXF1ZXN0LmZyYWdtZW50KSB7XG4gICAgICAgICAgICAgICAgcGF0aCArPSBgIyR7cmVxdWVzdC5mcmFnbWVudH1gO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbGV0IGhvc3RuYW1lID0gcmVxdWVzdC5ob3N0bmFtZSA/PyBcIlwiO1xuICAgICAgICAgICAgaWYgKGhvc3RuYW1lWzBdID09PSBcIltcIiAmJiBob3N0bmFtZS5lbmRzV2l0aChcIl1cIikpIHtcbiAgICAgICAgICAgICAgICBob3N0bmFtZSA9IHJlcXVlc3QuaG9zdG5hbWUuc2xpY2UoMSwgLTEpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgaG9zdG5hbWUgPSByZXF1ZXN0Lmhvc3RuYW1lO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3Qgbm9kZUh0dHBzT3B0aW9ucyA9IHtcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiByZXF1ZXN0LmhlYWRlcnMsXG4gICAgICAgICAgICAgICAgaG9zdDogaG9zdG5hbWUsXG4gICAgICAgICAgICAgICAgbWV0aG9kOiByZXF1ZXN0Lm1ldGhvZCxcbiAgICAgICAgICAgICAgICBwYXRoLFxuICAgICAgICAgICAgICAgIHBvcnQ6IHJlcXVlc3QucG9ydCxcbiAgICAgICAgICAgICAgICBhZ2VudCxcbiAgICAgICAgICAgICAgICBhdXRoLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGNvbnN0IHJlcXVlc3RGdW5jID0gaXNTU0wgPyBoc1JlcXVlc3QgOiBoUmVxdWVzdDtcbiAgICAgICAgICAgIGNvbnN0IHJlcSA9IHJlcXVlc3RGdW5jKG5vZGVIdHRwc09wdGlvbnMsIChyZXMpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBodHRwUmVzcG9uc2UgPSBuZXcgSHR0cFJlc3BvbnNlKHtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzQ29kZTogcmVzLnN0YXR1c0NvZGUgfHwgLTEsXG4gICAgICAgICAgICAgICAgICAgIHJlYXNvbjogcmVzLnN0YXR1c01lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IGdldFRyYW5zZm9ybWVkSGVhZGVycyhyZXMuaGVhZGVycyksXG4gICAgICAgICAgICAgICAgICAgIGJvZHk6IHJlcyxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICByZXNvbHZlKHsgcmVzcG9uc2U6IGh0dHBSZXNwb25zZSB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmVxLm9uKFwiZXJyb3JcIiwgKGVycikgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChOT0RFSlNfVElNRU9VVF9FUlJPUl9DT0RFUy5pbmNsdWRlcyhlcnIuY29kZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVqZWN0KE9iamVjdC5hc3NpZ24oZXJyLCB7IG5hbWU6IFwiVGltZW91dEVycm9yXCIgfSkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcmVqZWN0KGVycik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpZiAoYWJvcnRTaWduYWwpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBvbkFib3J0ID0gKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICByZXEuZGVzdHJveSgpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBhYm9ydEVycm9yID0gbmV3IEVycm9yKFwiUmVxdWVzdCBhYm9ydGVkXCIpO1xuICAgICAgICAgICAgICAgICAgICBhYm9ydEVycm9yLm5hbWUgPSBcIkFib3J0RXJyb3JcIjtcbiAgICAgICAgICAgICAgICAgICAgcmVqZWN0KGFib3J0RXJyb3IpO1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBhYm9ydFNpZ25hbC5hZGRFdmVudExpc3RlbmVyID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc2lnbmFsID0gYWJvcnRTaWduYWw7XG4gICAgICAgICAgICAgICAgICAgIHNpZ25hbC5hZGRFdmVudExpc3RlbmVyKFwiYWJvcnRcIiwgb25BYm9ydCwgeyBvbmNlOiB0cnVlIH0pO1xuICAgICAgICAgICAgICAgICAgICByZXEub25jZShcImNsb3NlXCIsICgpID0+IHNpZ25hbC5yZW1vdmVFdmVudExpc3RlbmVyKFwiYWJvcnRcIiwgb25BYm9ydCkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgYWJvcnRTaWduYWwub25hYm9ydCA9IG9uQWJvcnQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGltZW91dHMucHVzaChzZXRDb25uZWN0aW9uVGltZW91dChyZXEsIHJlamVjdCwgdGhpcy5jb25maWcuY29ubmVjdGlvblRpbWVvdXQpKTtcbiAgICAgICAgICAgIHRpbWVvdXRzLnB1c2goc2V0U29ja2V0VGltZW91dChyZXEsIHJlamVjdCwgdGhpcy5jb25maWcucmVxdWVzdFRpbWVvdXQpKTtcbiAgICAgICAgICAgIGNvbnN0IGh0dHBBZ2VudCA9IG5vZGVIdHRwc09wdGlvbnMuYWdlbnQ7XG4gICAgICAgICAgICBpZiAodHlwZW9mIGh0dHBBZ2VudCA9PT0gXCJvYmplY3RcIiAmJiBcImtlZXBBbGl2ZVwiIGluIGh0dHBBZ2VudCkge1xuICAgICAgICAgICAgICAgIHRpbWVvdXRzLnB1c2goc2V0U29ja2V0S2VlcEFsaXZlKHJlcSwge1xuICAgICAgICAgICAgICAgICAgICBrZWVwQWxpdmU6IGh0dHBBZ2VudC5rZWVwQWxpdmUsXG4gICAgICAgICAgICAgICAgICAgIGtlZXBBbGl2ZU1zZWNzOiBodHRwQWdlbnQua2VlcEFsaXZlTXNlY3MsXG4gICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgd3JpdGVSZXF1ZXN0Qm9keVByb21pc2UgPSB3cml0ZVJlcXVlc3RCb2R5KHJlcSwgcmVxdWVzdCwgdGhpcy5jb25maWcucmVxdWVzdFRpbWVvdXQpLmNhdGNoKChlKSA9PiB7XG4gICAgICAgICAgICAgICAgdGltZW91dHMuZm9yRWFjaCh0aW1pbmcuY2xlYXJUaW1lb3V0KTtcbiAgICAgICAgICAgICAgICByZXR1cm4gX3JlamVjdChlKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgdXBkYXRlSHR0cENsaWVudENvbmZpZyhrZXksIHZhbHVlKSB7XG4gICAgICAgIHRoaXMuY29uZmlnID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLmNvbmZpZ1Byb3ZpZGVyID0gdGhpcy5jb25maWdQcm92aWRlci50aGVuKChjb25maWcpID0+IHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgLi4uY29uZmlnLFxuICAgICAgICAgICAgICAgIFtrZXldOiB2YWx1ZSxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBodHRwSGFuZGxlckNvbmZpZ3MoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNvbmZpZyA/PyB7fTtcbiAgICB9XG59XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/../../../../node_modules/.pnpm/@smithy+node-http-handler@3.3.3/node_modules/@smithy/node-http-handler/dist-es/node-http-handler.js\n");

/***/ }),

/***/ "(rsc)/../../../../node_modules/.pnpm/@smithy+node-http-handler@3.3.3/node_modules/@smithy/node-http-handler/dist-es/node-http2-connection-manager.js":
/*!******************************************************************************************************************************************************!*\
  !*** ../../../../node_modules/.pnpm/@smithy+node-http-handler@3.3.3/node_modules/@smithy/node-http-handler/dist-es/node-http2-connection-manager.js ***!
  \******************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   NodeHttp2ConnectionManager: () => (/* binding */ NodeHttp2ConnectionManager)\n/* harmony export */ });\n/* harmony import */ var http2__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! http2 */ \"http2\");\n/* harmony import */ var http2__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(http2__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _node_http2_connection_pool__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./node-http2-connection-pool */ \"(rsc)/../../../../node_modules/.pnpm/@smithy+node-http-handler@3.3.3/node_modules/@smithy/node-http-handler/dist-es/node-http2-connection-pool.js\");\n\n\nclass NodeHttp2ConnectionManager {\n    constructor(config) {\n        this.sessionCache = new Map();\n        this.config = config;\n        if (this.config.maxConcurrency && this.config.maxConcurrency <= 0) {\n            throw new RangeError(\"maxConcurrency must be greater than zero.\");\n        }\n    }\n    lease(requestContext, connectionConfiguration) {\n        const url = this.getUrlString(requestContext);\n        const existingPool = this.sessionCache.get(url);\n        if (existingPool) {\n            const existingSession = existingPool.poll();\n            if (existingSession && !this.config.disableConcurrency) {\n                return existingSession;\n            }\n        }\n        const session = http2__WEBPACK_IMPORTED_MODULE_0___default().connect(url);\n        if (this.config.maxConcurrency) {\n            session.settings({ maxConcurrentStreams: this.config.maxConcurrency }, (err) => {\n                if (err) {\n                    throw new Error(\"Fail to set maxConcurrentStreams to \" +\n                        this.config.maxConcurrency +\n                        \"when creating new session for \" +\n                        requestContext.destination.toString());\n                }\n            });\n        }\n        session.unref();\n        const destroySessionCb = () => {\n            session.destroy();\n            this.deleteSession(url, session);\n        };\n        session.on(\"goaway\", destroySessionCb);\n        session.on(\"error\", destroySessionCb);\n        session.on(\"frameError\", destroySessionCb);\n        session.on(\"close\", () => this.deleteSession(url, session));\n        if (connectionConfiguration.requestTimeout) {\n            session.setTimeout(connectionConfiguration.requestTimeout, destroySessionCb);\n        }\n        const connectionPool = this.sessionCache.get(url) || new _node_http2_connection_pool__WEBPACK_IMPORTED_MODULE_1__.NodeHttp2ConnectionPool();\n        connectionPool.offerLast(session);\n        this.sessionCache.set(url, connectionPool);\n        return session;\n    }\n    deleteSession(authority, session) {\n        const existingConnectionPool = this.sessionCache.get(authority);\n        if (!existingConnectionPool) {\n            return;\n        }\n        if (!existingConnectionPool.contains(session)) {\n            return;\n        }\n        existingConnectionPool.remove(session);\n        this.sessionCache.set(authority, existingConnectionPool);\n    }\n    release(requestContext, session) {\n        const cacheKey = this.getUrlString(requestContext);\n        this.sessionCache.get(cacheKey)?.offerLast(session);\n    }\n    destroy() {\n        for (const [key, connectionPool] of this.sessionCache) {\n            for (const session of connectionPool) {\n                if (!session.destroyed) {\n                    session.destroy();\n                }\n                connectionPool.remove(session);\n            }\n            this.sessionCache.delete(key);\n        }\n    }\n    setMaxConcurrentStreams(maxConcurrentStreams) {\n        if (maxConcurrentStreams && maxConcurrentStreams <= 0) {\n            throw new RangeError(\"maxConcurrentStreams must be greater than zero.\");\n        }\n        this.config.maxConcurrency = maxConcurrentStreams;\n    }\n    setDisableConcurrentStreams(disableConcurrentStreams) {\n        this.config.disableConcurrency = disableConcurrentStreams;\n    }\n    getUrlString(request) {\n        return request.destination.toString();\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzLy5wbnBtL0BzbWl0aHkrbm9kZS1odHRwLWhhbmRsZXJAMy4zLjMvbm9kZV9tb2R1bGVzL0BzbWl0aHkvbm9kZS1odHRwLWhhbmRsZXIvZGlzdC1lcy9ub2RlLWh0dHAyLWNvbm5lY3Rpb24tbWFuYWdlci5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQTBCO0FBQzZDO0FBQ2hFO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0Isb0RBQWE7QUFDckM7QUFDQSwrQkFBK0Isa0RBQWtEO0FBQ2pGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlFQUFpRSxnRkFBdUI7QUFDeEY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIi9Vc2Vycy9lcmluamVycmkvbm9kZV9tb2R1bGVzLy5wbnBtL0BzbWl0aHkrbm9kZS1odHRwLWhhbmRsZXJAMy4zLjMvbm9kZV9tb2R1bGVzL0BzbWl0aHkvbm9kZS1odHRwLWhhbmRsZXIvZGlzdC1lcy9ub2RlLWh0dHAyLWNvbm5lY3Rpb24tbWFuYWdlci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgaHR0cDIgZnJvbSBcImh0dHAyXCI7XG5pbXBvcnQgeyBOb2RlSHR0cDJDb25uZWN0aW9uUG9vbCB9IGZyb20gXCIuL25vZGUtaHR0cDItY29ubmVjdGlvbi1wb29sXCI7XG5leHBvcnQgY2xhc3MgTm9kZUh0dHAyQ29ubmVjdGlvbk1hbmFnZXIge1xuICAgIGNvbnN0cnVjdG9yKGNvbmZpZykge1xuICAgICAgICB0aGlzLnNlc3Npb25DYWNoZSA9IG5ldyBNYXAoKTtcbiAgICAgICAgdGhpcy5jb25maWcgPSBjb25maWc7XG4gICAgICAgIGlmICh0aGlzLmNvbmZpZy5tYXhDb25jdXJyZW5jeSAmJiB0aGlzLmNvbmZpZy5tYXhDb25jdXJyZW5jeSA8PSAwKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcihcIm1heENvbmN1cnJlbmN5IG11c3QgYmUgZ3JlYXRlciB0aGFuIHplcm8uXCIpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGxlYXNlKHJlcXVlc3RDb250ZXh0LCBjb25uZWN0aW9uQ29uZmlndXJhdGlvbikge1xuICAgICAgICBjb25zdCB1cmwgPSB0aGlzLmdldFVybFN0cmluZyhyZXF1ZXN0Q29udGV4dCk7XG4gICAgICAgIGNvbnN0IGV4aXN0aW5nUG9vbCA9IHRoaXMuc2Vzc2lvbkNhY2hlLmdldCh1cmwpO1xuICAgICAgICBpZiAoZXhpc3RpbmdQb29sKSB7XG4gICAgICAgICAgICBjb25zdCBleGlzdGluZ1Nlc3Npb24gPSBleGlzdGluZ1Bvb2wucG9sbCgpO1xuICAgICAgICAgICAgaWYgKGV4aXN0aW5nU2Vzc2lvbiAmJiAhdGhpcy5jb25maWcuZGlzYWJsZUNvbmN1cnJlbmN5KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGV4aXN0aW5nU2Vzc2lvbjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjb25zdCBzZXNzaW9uID0gaHR0cDIuY29ubmVjdCh1cmwpO1xuICAgICAgICBpZiAodGhpcy5jb25maWcubWF4Q29uY3VycmVuY3kpIHtcbiAgICAgICAgICAgIHNlc3Npb24uc2V0dGluZ3MoeyBtYXhDb25jdXJyZW50U3RyZWFtczogdGhpcy5jb25maWcubWF4Q29uY3VycmVuY3kgfSwgKGVycikgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiRmFpbCB0byBzZXQgbWF4Q29uY3VycmVudFN0cmVhbXMgdG8gXCIgK1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jb25maWcubWF4Q29uY3VycmVuY3kgK1xuICAgICAgICAgICAgICAgICAgICAgICAgXCJ3aGVuIGNyZWF0aW5nIG5ldyBzZXNzaW9uIGZvciBcIiArXG4gICAgICAgICAgICAgICAgICAgICAgICByZXF1ZXN0Q29udGV4dC5kZXN0aW5hdGlvbi50b1N0cmluZygpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBzZXNzaW9uLnVucmVmKCk7XG4gICAgICAgIGNvbnN0IGRlc3Ryb3lTZXNzaW9uQ2IgPSAoKSA9PiB7XG4gICAgICAgICAgICBzZXNzaW9uLmRlc3Ryb3koKTtcbiAgICAgICAgICAgIHRoaXMuZGVsZXRlU2Vzc2lvbih1cmwsIHNlc3Npb24pO1xuICAgICAgICB9O1xuICAgICAgICBzZXNzaW9uLm9uKFwiZ29hd2F5XCIsIGRlc3Ryb3lTZXNzaW9uQ2IpO1xuICAgICAgICBzZXNzaW9uLm9uKFwiZXJyb3JcIiwgZGVzdHJveVNlc3Npb25DYik7XG4gICAgICAgIHNlc3Npb24ub24oXCJmcmFtZUVycm9yXCIsIGRlc3Ryb3lTZXNzaW9uQ2IpO1xuICAgICAgICBzZXNzaW9uLm9uKFwiY2xvc2VcIiwgKCkgPT4gdGhpcy5kZWxldGVTZXNzaW9uKHVybCwgc2Vzc2lvbikpO1xuICAgICAgICBpZiAoY29ubmVjdGlvbkNvbmZpZ3VyYXRpb24ucmVxdWVzdFRpbWVvdXQpIHtcbiAgICAgICAgICAgIHNlc3Npb24uc2V0VGltZW91dChjb25uZWN0aW9uQ29uZmlndXJhdGlvbi5yZXF1ZXN0VGltZW91dCwgZGVzdHJveVNlc3Npb25DYik7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgY29ubmVjdGlvblBvb2wgPSB0aGlzLnNlc3Npb25DYWNoZS5nZXQodXJsKSB8fCBuZXcgTm9kZUh0dHAyQ29ubmVjdGlvblBvb2woKTtcbiAgICAgICAgY29ubmVjdGlvblBvb2wub2ZmZXJMYXN0KHNlc3Npb24pO1xuICAgICAgICB0aGlzLnNlc3Npb25DYWNoZS5zZXQodXJsLCBjb25uZWN0aW9uUG9vbCk7XG4gICAgICAgIHJldHVybiBzZXNzaW9uO1xuICAgIH1cbiAgICBkZWxldGVTZXNzaW9uKGF1dGhvcml0eSwgc2Vzc2lvbikge1xuICAgICAgICBjb25zdCBleGlzdGluZ0Nvbm5lY3Rpb25Qb29sID0gdGhpcy5zZXNzaW9uQ2FjaGUuZ2V0KGF1dGhvcml0eSk7XG4gICAgICAgIGlmICghZXhpc3RpbmdDb25uZWN0aW9uUG9vbCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmICghZXhpc3RpbmdDb25uZWN0aW9uUG9vbC5jb250YWlucyhzZXNzaW9uKSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGV4aXN0aW5nQ29ubmVjdGlvblBvb2wucmVtb3ZlKHNlc3Npb24pO1xuICAgICAgICB0aGlzLnNlc3Npb25DYWNoZS5zZXQoYXV0aG9yaXR5LCBleGlzdGluZ0Nvbm5lY3Rpb25Qb29sKTtcbiAgICB9XG4gICAgcmVsZWFzZShyZXF1ZXN0Q29udGV4dCwgc2Vzc2lvbikge1xuICAgICAgICBjb25zdCBjYWNoZUtleSA9IHRoaXMuZ2V0VXJsU3RyaW5nKHJlcXVlc3RDb250ZXh0KTtcbiAgICAgICAgdGhpcy5zZXNzaW9uQ2FjaGUuZ2V0KGNhY2hlS2V5KT8ub2ZmZXJMYXN0KHNlc3Npb24pO1xuICAgIH1cbiAgICBkZXN0cm95KCkge1xuICAgICAgICBmb3IgKGNvbnN0IFtrZXksIGNvbm5lY3Rpb25Qb29sXSBvZiB0aGlzLnNlc3Npb25DYWNoZSkge1xuICAgICAgICAgICAgZm9yIChjb25zdCBzZXNzaW9uIG9mIGNvbm5lY3Rpb25Qb29sKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFzZXNzaW9uLmRlc3Ryb3llZCkge1xuICAgICAgICAgICAgICAgICAgICBzZXNzaW9uLmRlc3Ryb3koKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29ubmVjdGlvblBvb2wucmVtb3ZlKHNlc3Npb24pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5zZXNzaW9uQ2FjaGUuZGVsZXRlKGtleSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc2V0TWF4Q29uY3VycmVudFN0cmVhbXMobWF4Q29uY3VycmVudFN0cmVhbXMpIHtcbiAgICAgICAgaWYgKG1heENvbmN1cnJlbnRTdHJlYW1zICYmIG1heENvbmN1cnJlbnRTdHJlYW1zIDw9IDApIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBSYW5nZUVycm9yKFwibWF4Q29uY3VycmVudFN0cmVhbXMgbXVzdCBiZSBncmVhdGVyIHRoYW4gemVyby5cIik7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5jb25maWcubWF4Q29uY3VycmVuY3kgPSBtYXhDb25jdXJyZW50U3RyZWFtcztcbiAgICB9XG4gICAgc2V0RGlzYWJsZUNvbmN1cnJlbnRTdHJlYW1zKGRpc2FibGVDb25jdXJyZW50U3RyZWFtcykge1xuICAgICAgICB0aGlzLmNvbmZpZy5kaXNhYmxlQ29uY3VycmVuY3kgPSBkaXNhYmxlQ29uY3VycmVudFN0cmVhbXM7XG4gICAgfVxuICAgIGdldFVybFN0cmluZyhyZXF1ZXN0KSB7XG4gICAgICAgIHJldHVybiByZXF1ZXN0LmRlc3RpbmF0aW9uLnRvU3RyaW5nKCk7XG4gICAgfVxufVxuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/../../../../node_modules/.pnpm/@smithy+node-http-handler@3.3.3/node_modules/@smithy/node-http-handler/dist-es/node-http2-connection-manager.js\n");

/***/ }),

/***/ "(rsc)/../../../../node_modules/.pnpm/@smithy+node-http-handler@3.3.3/node_modules/@smithy/node-http-handler/dist-es/node-http2-connection-pool.js":
/*!***************************************************************************************************************************************************!*\
  !*** ../../../../node_modules/.pnpm/@smithy+node-http-handler@3.3.3/node_modules/@smithy/node-http-handler/dist-es/node-http2-connection-pool.js ***!
  \***************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   NodeHttp2ConnectionPool: () => (/* binding */ NodeHttp2ConnectionPool)\n/* harmony export */ });\nclass NodeHttp2ConnectionPool {\n    constructor(sessions) {\n        this.sessions = [];\n        this.sessions = sessions ?? [];\n    }\n    poll() {\n        if (this.sessions.length > 0) {\n            return this.sessions.shift();\n        }\n    }\n    offerLast(session) {\n        this.sessions.push(session);\n    }\n    contains(session) {\n        return this.sessions.includes(session);\n    }\n    remove(session) {\n        this.sessions = this.sessions.filter((s) => s !== session);\n    }\n    [Symbol.iterator]() {\n        return this.sessions[Symbol.iterator]();\n    }\n    destroy(connection) {\n        for (const session of this.sessions) {\n            if (session === connection) {\n                if (!session.destroyed) {\n                    session.destroy();\n                }\n            }\n        }\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzLy5wbnBtL0BzbWl0aHkrbm9kZS1odHRwLWhhbmRsZXJAMy4zLjMvbm9kZV9tb2R1bGVzL0BzbWl0aHkvbm9kZS1odHRwLWhhbmRsZXIvZGlzdC1lcy9ub2RlLWh0dHAyLWNvbm5lY3Rpb24tcG9vbC5qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsiL1VzZXJzL2VyaW5qZXJyaS9ub2RlX21vZHVsZXMvLnBucG0vQHNtaXRoeStub2RlLWh0dHAtaGFuZGxlckAzLjMuMy9ub2RlX21vZHVsZXMvQHNtaXRoeS9ub2RlLWh0dHAtaGFuZGxlci9kaXN0LWVzL25vZGUtaHR0cDItY29ubmVjdGlvbi1wb29sLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBjbGFzcyBOb2RlSHR0cDJDb25uZWN0aW9uUG9vbCB7XG4gICAgY29uc3RydWN0b3Ioc2Vzc2lvbnMpIHtcbiAgICAgICAgdGhpcy5zZXNzaW9ucyA9IFtdO1xuICAgICAgICB0aGlzLnNlc3Npb25zID0gc2Vzc2lvbnMgPz8gW107XG4gICAgfVxuICAgIHBvbGwoKSB7XG4gICAgICAgIGlmICh0aGlzLnNlc3Npb25zLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnNlc3Npb25zLnNoaWZ0KCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgb2ZmZXJMYXN0KHNlc3Npb24pIHtcbiAgICAgICAgdGhpcy5zZXNzaW9ucy5wdXNoKHNlc3Npb24pO1xuICAgIH1cbiAgICBjb250YWlucyhzZXNzaW9uKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNlc3Npb25zLmluY2x1ZGVzKHNlc3Npb24pO1xuICAgIH1cbiAgICByZW1vdmUoc2Vzc2lvbikge1xuICAgICAgICB0aGlzLnNlc3Npb25zID0gdGhpcy5zZXNzaW9ucy5maWx0ZXIoKHMpID0+IHMgIT09IHNlc3Npb24pO1xuICAgIH1cbiAgICBbU3ltYm9sLml0ZXJhdG9yXSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2Vzc2lvbnNbU3ltYm9sLml0ZXJhdG9yXSgpO1xuICAgIH1cbiAgICBkZXN0cm95KGNvbm5lY3Rpb24pIHtcbiAgICAgICAgZm9yIChjb25zdCBzZXNzaW9uIG9mIHRoaXMuc2Vzc2lvbnMpIHtcbiAgICAgICAgICAgIGlmIChzZXNzaW9uID09PSBjb25uZWN0aW9uKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFzZXNzaW9uLmRlc3Ryb3llZCkge1xuICAgICAgICAgICAgICAgICAgICBzZXNzaW9uLmRlc3Ryb3koKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/../../../../node_modules/.pnpm/@smithy+node-http-handler@3.3.3/node_modules/@smithy/node-http-handler/dist-es/node-http2-connection-pool.js\n");

/***/ }),

/***/ "(rsc)/../../../../node_modules/.pnpm/@smithy+node-http-handler@3.3.3/node_modules/@smithy/node-http-handler/dist-es/node-http2-handler.js":
/*!*******************************************************************************************************************************************!*\
  !*** ../../../../node_modules/.pnpm/@smithy+node-http-handler@3.3.3/node_modules/@smithy/node-http-handler/dist-es/node-http2-handler.js ***!
  \*******************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   NodeHttp2Handler: () => (/* binding */ NodeHttp2Handler)\n/* harmony export */ });\n/* harmony import */ var _smithy_protocol_http__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @smithy/protocol-http */ \"(rsc)/../../../../node_modules/.pnpm/@smithy+protocol-http@4.1.8/node_modules/@smithy/protocol-http/dist-es/index.js\");\n/* harmony import */ var _smithy_querystring_builder__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @smithy/querystring-builder */ \"(rsc)/../../../../node_modules/.pnpm/@smithy+querystring-builder@3.0.11/node_modules/@smithy/querystring-builder/dist-es/index.js\");\n/* harmony import */ var http2__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! http2 */ \"http2\");\n/* harmony import */ var http2__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(http2__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _get_transformed_headers__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./get-transformed-headers */ \"(rsc)/../../../../node_modules/.pnpm/@smithy+node-http-handler@3.3.3/node_modules/@smithy/node-http-handler/dist-es/get-transformed-headers.js\");\n/* harmony import */ var _node_http2_connection_manager__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./node-http2-connection-manager */ \"(rsc)/../../../../node_modules/.pnpm/@smithy+node-http-handler@3.3.3/node_modules/@smithy/node-http-handler/dist-es/node-http2-connection-manager.js\");\n/* harmony import */ var _write_request_body__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./write-request-body */ \"(rsc)/../../../../node_modules/.pnpm/@smithy+node-http-handler@3.3.3/node_modules/@smithy/node-http-handler/dist-es/write-request-body.js\");\n\n\n\n\n\n\nclass NodeHttp2Handler {\n    static create(instanceOrOptions) {\n        if (typeof instanceOrOptions?.handle === \"function\") {\n            return instanceOrOptions;\n        }\n        return new NodeHttp2Handler(instanceOrOptions);\n    }\n    constructor(options) {\n        this.metadata = { handlerProtocol: \"h2\" };\n        this.connectionManager = new _node_http2_connection_manager__WEBPACK_IMPORTED_MODULE_4__.NodeHttp2ConnectionManager({});\n        this.configProvider = new Promise((resolve, reject) => {\n            if (typeof options === \"function\") {\n                options()\n                    .then((opts) => {\n                    resolve(opts || {});\n                })\n                    .catch(reject);\n            }\n            else {\n                resolve(options || {});\n            }\n        });\n    }\n    destroy() {\n        this.connectionManager.destroy();\n    }\n    async handle(request, { abortSignal } = {}) {\n        if (!this.config) {\n            this.config = await this.configProvider;\n            this.connectionManager.setDisableConcurrentStreams(this.config.disableConcurrentStreams || false);\n            if (this.config.maxConcurrentStreams) {\n                this.connectionManager.setMaxConcurrentStreams(this.config.maxConcurrentStreams);\n            }\n        }\n        const { requestTimeout, disableConcurrentStreams } = this.config;\n        return new Promise((_resolve, _reject) => {\n            let fulfilled = false;\n            let writeRequestBodyPromise = undefined;\n            const resolve = async (arg) => {\n                await writeRequestBodyPromise;\n                _resolve(arg);\n            };\n            const reject = async (arg) => {\n                await writeRequestBodyPromise;\n                _reject(arg);\n            };\n            if (abortSignal?.aborted) {\n                fulfilled = true;\n                const abortError = new Error(\"Request aborted\");\n                abortError.name = \"AbortError\";\n                reject(abortError);\n                return;\n            }\n            const { hostname, method, port, protocol, query } = request;\n            let auth = \"\";\n            if (request.username != null || request.password != null) {\n                const username = request.username ?? \"\";\n                const password = request.password ?? \"\";\n                auth = `${username}:${password}@`;\n            }\n            const authority = `${protocol}//${auth}${hostname}${port ? `:${port}` : \"\"}`;\n            const requestContext = { destination: new URL(authority) };\n            const session = this.connectionManager.lease(requestContext, {\n                requestTimeout: this.config?.sessionTimeout,\n                disableConcurrentStreams: disableConcurrentStreams || false,\n            });\n            const rejectWithDestroy = (err) => {\n                if (disableConcurrentStreams) {\n                    this.destroySession(session);\n                }\n                fulfilled = true;\n                reject(err);\n            };\n            const queryString = (0,_smithy_querystring_builder__WEBPACK_IMPORTED_MODULE_1__.buildQueryString)(query || {});\n            let path = request.path;\n            if (queryString) {\n                path += `?${queryString}`;\n            }\n            if (request.fragment) {\n                path += `#${request.fragment}`;\n            }\n            const req = session.request({\n                ...request.headers,\n                [http2__WEBPACK_IMPORTED_MODULE_2__.constants.HTTP2_HEADER_PATH]: path,\n                [http2__WEBPACK_IMPORTED_MODULE_2__.constants.HTTP2_HEADER_METHOD]: method,\n            });\n            session.ref();\n            req.on(\"response\", (headers) => {\n                const httpResponse = new _smithy_protocol_http__WEBPACK_IMPORTED_MODULE_0__.HttpResponse({\n                    statusCode: headers[\":status\"] || -1,\n                    headers: (0,_get_transformed_headers__WEBPACK_IMPORTED_MODULE_3__.getTransformedHeaders)(headers),\n                    body: req,\n                });\n                fulfilled = true;\n                resolve({ response: httpResponse });\n                if (disableConcurrentStreams) {\n                    session.close();\n                    this.connectionManager.deleteSession(authority, session);\n                }\n            });\n            if (requestTimeout) {\n                req.setTimeout(requestTimeout, () => {\n                    req.close();\n                    const timeoutError = new Error(`Stream timed out because of no activity for ${requestTimeout} ms`);\n                    timeoutError.name = \"TimeoutError\";\n                    rejectWithDestroy(timeoutError);\n                });\n            }\n            if (abortSignal) {\n                const onAbort = () => {\n                    req.close();\n                    const abortError = new Error(\"Request aborted\");\n                    abortError.name = \"AbortError\";\n                    rejectWithDestroy(abortError);\n                };\n                if (typeof abortSignal.addEventListener === \"function\") {\n                    const signal = abortSignal;\n                    signal.addEventListener(\"abort\", onAbort, { once: true });\n                    req.once(\"close\", () => signal.removeEventListener(\"abort\", onAbort));\n                }\n                else {\n                    abortSignal.onabort = onAbort;\n                }\n            }\n            req.on(\"frameError\", (type, code, id) => {\n                rejectWithDestroy(new Error(`Frame type id ${type} in stream id ${id} has failed with code ${code}.`));\n            });\n            req.on(\"error\", rejectWithDestroy);\n            req.on(\"aborted\", () => {\n                rejectWithDestroy(new Error(`HTTP/2 stream is abnormally aborted in mid-communication with result code ${req.rstCode}.`));\n            });\n            req.on(\"close\", () => {\n                session.unref();\n                if (disableConcurrentStreams) {\n                    session.destroy();\n                }\n                if (!fulfilled) {\n                    rejectWithDestroy(new Error(\"Unexpected error: http2 request did not get a response\"));\n                }\n            });\n            writeRequestBodyPromise = (0,_write_request_body__WEBPACK_IMPORTED_MODULE_5__.writeRequestBody)(req, request, requestTimeout);\n        });\n    }\n    updateHttpClientConfig(key, value) {\n        this.config = undefined;\n        this.configProvider = this.configProvider.then((config) => {\n            return {\n                ...config,\n                [key]: value,\n            };\n        });\n    }\n    httpHandlerConfigs() {\n        return this.config ?? {};\n    }\n    destroySession(session) {\n        if (!session.destroyed) {\n            session.destroy();\n        }\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzLy5wbnBtL0BzbWl0aHkrbm9kZS1odHRwLWhhbmRsZXJAMy4zLjMvbm9kZV9tb2R1bGVzL0BzbWl0aHkvbm9kZS1odHRwLWhhbmRsZXIvZGlzdC1lcy9ub2RlLWh0dHAyLWhhbmRsZXIuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFBcUQ7QUFDVTtBQUM3QjtBQUNnQztBQUNXO0FBQ3JCO0FBQ2pEO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQkFBMEI7QUFDMUIscUNBQXFDLHNGQUEwQixHQUFHO0FBQ2xFO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0NBQXNDO0FBQ3RDLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQSxxQ0FBcUM7QUFDckM7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0QkFBNEIsY0FBYyxJQUFJO0FBQzlDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLDJDQUEyQztBQUMzRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IsMENBQTBDO0FBQzlEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMEJBQTBCLFNBQVMsR0FBRyxTQUFTO0FBQy9DO0FBQ0EsaUNBQWlDLFNBQVMsSUFBSSxLQUFLLEVBQUUsU0FBUyxFQUFFLFdBQVcsS0FBSyxPQUFPO0FBQ3ZGLHFDQUFxQztBQUNyQztBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQ0FBZ0MsNkVBQWdCLFlBQVk7QUFDNUQ7QUFDQTtBQUNBLDRCQUE0QixZQUFZO0FBQ3hDO0FBQ0E7QUFDQSw0QkFBNEIsaUJBQWlCO0FBQzdDO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQiw0Q0FBUztBQUMxQixpQkFBaUIsNENBQVM7QUFDMUIsYUFBYTtBQUNiO0FBQ0E7QUFDQSx5Q0FBeUMsK0RBQVk7QUFDckQ7QUFDQSw2QkFBNkIsK0VBQXFCO0FBQ2xEO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0EsMEJBQTBCLHdCQUF3QjtBQUNsRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQSxrR0FBa0csZ0JBQWdCO0FBQ2xIO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnRUFBZ0UsWUFBWTtBQUM1RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZEQUE2RCxNQUFNLGVBQWUsSUFBSSx1QkFBdUIsS0FBSztBQUNsSCxhQUFhO0FBQ2I7QUFDQTtBQUNBLHlIQUF5SCxZQUFZO0FBQ3JJLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiLHNDQUFzQyxxRUFBZ0I7QUFDdEQsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIi9Vc2Vycy9lcmluamVycmkvbm9kZV9tb2R1bGVzLy5wbnBtL0BzbWl0aHkrbm9kZS1odHRwLWhhbmRsZXJAMy4zLjMvbm9kZV9tb2R1bGVzL0BzbWl0aHkvbm9kZS1odHRwLWhhbmRsZXIvZGlzdC1lcy9ub2RlLWh0dHAyLWhhbmRsZXIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgSHR0cFJlc3BvbnNlIH0gZnJvbSBcIkBzbWl0aHkvcHJvdG9jb2wtaHR0cFwiO1xuaW1wb3J0IHsgYnVpbGRRdWVyeVN0cmluZyB9IGZyb20gXCJAc21pdGh5L3F1ZXJ5c3RyaW5nLWJ1aWxkZXJcIjtcbmltcG9ydCB7IGNvbnN0YW50cyB9IGZyb20gXCJodHRwMlwiO1xuaW1wb3J0IHsgZ2V0VHJhbnNmb3JtZWRIZWFkZXJzIH0gZnJvbSBcIi4vZ2V0LXRyYW5zZm9ybWVkLWhlYWRlcnNcIjtcbmltcG9ydCB7IE5vZGVIdHRwMkNvbm5lY3Rpb25NYW5hZ2VyIH0gZnJvbSBcIi4vbm9kZS1odHRwMi1jb25uZWN0aW9uLW1hbmFnZXJcIjtcbmltcG9ydCB7IHdyaXRlUmVxdWVzdEJvZHkgfSBmcm9tIFwiLi93cml0ZS1yZXF1ZXN0LWJvZHlcIjtcbmV4cG9ydCBjbGFzcyBOb2RlSHR0cDJIYW5kbGVyIHtcbiAgICBzdGF0aWMgY3JlYXRlKGluc3RhbmNlT3JPcHRpb25zKSB7XG4gICAgICAgIGlmICh0eXBlb2YgaW5zdGFuY2VPck9wdGlvbnM/LmhhbmRsZSA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICByZXR1cm4gaW5zdGFuY2VPck9wdGlvbnM7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBOb2RlSHR0cDJIYW5kbGVyKGluc3RhbmNlT3JPcHRpb25zKTtcbiAgICB9XG4gICAgY29uc3RydWN0b3Iob3B0aW9ucykge1xuICAgICAgICB0aGlzLm1ldGFkYXRhID0geyBoYW5kbGVyUHJvdG9jb2w6IFwiaDJcIiB9O1xuICAgICAgICB0aGlzLmNvbm5lY3Rpb25NYW5hZ2VyID0gbmV3IE5vZGVIdHRwMkNvbm5lY3Rpb25NYW5hZ2VyKHt9KTtcbiAgICAgICAgdGhpcy5jb25maWdQcm92aWRlciA9IG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgICAgIGlmICh0eXBlb2Ygb3B0aW9ucyA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICAgICAgb3B0aW9ucygpXG4gICAgICAgICAgICAgICAgICAgIC50aGVuKChvcHRzKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUob3B0cyB8fCB7fSk7XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgLmNhdGNoKHJlamVjdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXNvbHZlKG9wdGlvbnMgfHwge30pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgZGVzdHJveSgpIHtcbiAgICAgICAgdGhpcy5jb25uZWN0aW9uTWFuYWdlci5kZXN0cm95KCk7XG4gICAgfVxuICAgIGFzeW5jIGhhbmRsZShyZXF1ZXN0LCB7IGFib3J0U2lnbmFsIH0gPSB7fSkge1xuICAgICAgICBpZiAoIXRoaXMuY29uZmlnKSB7XG4gICAgICAgICAgICB0aGlzLmNvbmZpZyA9IGF3YWl0IHRoaXMuY29uZmlnUHJvdmlkZXI7XG4gICAgICAgICAgICB0aGlzLmNvbm5lY3Rpb25NYW5hZ2VyLnNldERpc2FibGVDb25jdXJyZW50U3RyZWFtcyh0aGlzLmNvbmZpZy5kaXNhYmxlQ29uY3VycmVudFN0cmVhbXMgfHwgZmFsc2UpO1xuICAgICAgICAgICAgaWYgKHRoaXMuY29uZmlnLm1heENvbmN1cnJlbnRTdHJlYW1zKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jb25uZWN0aW9uTWFuYWdlci5zZXRNYXhDb25jdXJyZW50U3RyZWFtcyh0aGlzLmNvbmZpZy5tYXhDb25jdXJyZW50U3RyZWFtcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgeyByZXF1ZXN0VGltZW91dCwgZGlzYWJsZUNvbmN1cnJlbnRTdHJlYW1zIH0gPSB0aGlzLmNvbmZpZztcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChfcmVzb2x2ZSwgX3JlamVjdCkgPT4ge1xuICAgICAgICAgICAgbGV0IGZ1bGZpbGxlZCA9IGZhbHNlO1xuICAgICAgICAgICAgbGV0IHdyaXRlUmVxdWVzdEJvZHlQcm9taXNlID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgY29uc3QgcmVzb2x2ZSA9IGFzeW5jIChhcmcpID0+IHtcbiAgICAgICAgICAgICAgICBhd2FpdCB3cml0ZVJlcXVlc3RCb2R5UHJvbWlzZTtcbiAgICAgICAgICAgICAgICBfcmVzb2x2ZShhcmcpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGNvbnN0IHJlamVjdCA9IGFzeW5jIChhcmcpID0+IHtcbiAgICAgICAgICAgICAgICBhd2FpdCB3cml0ZVJlcXVlc3RCb2R5UHJvbWlzZTtcbiAgICAgICAgICAgICAgICBfcmVqZWN0KGFyZyk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgaWYgKGFib3J0U2lnbmFsPy5hYm9ydGVkKSB7XG4gICAgICAgICAgICAgICAgZnVsZmlsbGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBjb25zdCBhYm9ydEVycm9yID0gbmV3IEVycm9yKFwiUmVxdWVzdCBhYm9ydGVkXCIpO1xuICAgICAgICAgICAgICAgIGFib3J0RXJyb3IubmFtZSA9IFwiQWJvcnRFcnJvclwiO1xuICAgICAgICAgICAgICAgIHJlamVjdChhYm9ydEVycm9yKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCB7IGhvc3RuYW1lLCBtZXRob2QsIHBvcnQsIHByb3RvY29sLCBxdWVyeSB9ID0gcmVxdWVzdDtcbiAgICAgICAgICAgIGxldCBhdXRoID0gXCJcIjtcbiAgICAgICAgICAgIGlmIChyZXF1ZXN0LnVzZXJuYW1lICE9IG51bGwgfHwgcmVxdWVzdC5wYXNzd29yZCAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgdXNlcm5hbWUgPSByZXF1ZXN0LnVzZXJuYW1lID8/IFwiXCI7XG4gICAgICAgICAgICAgICAgY29uc3QgcGFzc3dvcmQgPSByZXF1ZXN0LnBhc3N3b3JkID8/IFwiXCI7XG4gICAgICAgICAgICAgICAgYXV0aCA9IGAke3VzZXJuYW1lfToke3Bhc3N3b3JkfUBgO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgYXV0aG9yaXR5ID0gYCR7cHJvdG9jb2x9Ly8ke2F1dGh9JHtob3N0bmFtZX0ke3BvcnQgPyBgOiR7cG9ydH1gIDogXCJcIn1gO1xuICAgICAgICAgICAgY29uc3QgcmVxdWVzdENvbnRleHQgPSB7IGRlc3RpbmF0aW9uOiBuZXcgVVJMKGF1dGhvcml0eSkgfTtcbiAgICAgICAgICAgIGNvbnN0IHNlc3Npb24gPSB0aGlzLmNvbm5lY3Rpb25NYW5hZ2VyLmxlYXNlKHJlcXVlc3RDb250ZXh0LCB7XG4gICAgICAgICAgICAgICAgcmVxdWVzdFRpbWVvdXQ6IHRoaXMuY29uZmlnPy5zZXNzaW9uVGltZW91dCxcbiAgICAgICAgICAgICAgICBkaXNhYmxlQ29uY3VycmVudFN0cmVhbXM6IGRpc2FibGVDb25jdXJyZW50U3RyZWFtcyB8fCBmYWxzZSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgY29uc3QgcmVqZWN0V2l0aERlc3Ryb3kgPSAoZXJyKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKGRpc2FibGVDb25jdXJyZW50U3RyZWFtcykge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmRlc3Ryb3lTZXNzaW9uKHNlc3Npb24pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBmdWxmaWxsZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIHJlamVjdChlcnIpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGNvbnN0IHF1ZXJ5U3RyaW5nID0gYnVpbGRRdWVyeVN0cmluZyhxdWVyeSB8fCB7fSk7XG4gICAgICAgICAgICBsZXQgcGF0aCA9IHJlcXVlc3QucGF0aDtcbiAgICAgICAgICAgIGlmIChxdWVyeVN0cmluZykge1xuICAgICAgICAgICAgICAgIHBhdGggKz0gYD8ke3F1ZXJ5U3RyaW5nfWA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAocmVxdWVzdC5mcmFnbWVudCkge1xuICAgICAgICAgICAgICAgIHBhdGggKz0gYCMke3JlcXVlc3QuZnJhZ21lbnR9YDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHJlcSA9IHNlc3Npb24ucmVxdWVzdCh7XG4gICAgICAgICAgICAgICAgLi4ucmVxdWVzdC5oZWFkZXJzLFxuICAgICAgICAgICAgICAgIFtjb25zdGFudHMuSFRUUDJfSEVBREVSX1BBVEhdOiBwYXRoLFxuICAgICAgICAgICAgICAgIFtjb25zdGFudHMuSFRUUDJfSEVBREVSX01FVEhPRF06IG1ldGhvZCxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgc2Vzc2lvbi5yZWYoKTtcbiAgICAgICAgICAgIHJlcS5vbihcInJlc3BvbnNlXCIsIChoZWFkZXJzKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgaHR0cFJlc3BvbnNlID0gbmV3IEh0dHBSZXNwb25zZSh7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1c0NvZGU6IGhlYWRlcnNbXCI6c3RhdHVzXCJdIHx8IC0xLFxuICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiBnZXRUcmFuc2Zvcm1lZEhlYWRlcnMoaGVhZGVycyksXG4gICAgICAgICAgICAgICAgICAgIGJvZHk6IHJlcSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBmdWxmaWxsZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIHJlc29sdmUoeyByZXNwb25zZTogaHR0cFJlc3BvbnNlIH0pO1xuICAgICAgICAgICAgICAgIGlmIChkaXNhYmxlQ29uY3VycmVudFN0cmVhbXMpIHtcbiAgICAgICAgICAgICAgICAgICAgc2Vzc2lvbi5jbG9zZSgpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbm5lY3Rpb25NYW5hZ2VyLmRlbGV0ZVNlc3Npb24oYXV0aG9yaXR5LCBzZXNzaW9uKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGlmIChyZXF1ZXN0VGltZW91dCkge1xuICAgICAgICAgICAgICAgIHJlcS5zZXRUaW1lb3V0KHJlcXVlc3RUaW1lb3V0LCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHJlcS5jbG9zZSgpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB0aW1lb3V0RXJyb3IgPSBuZXcgRXJyb3IoYFN0cmVhbSB0aW1lZCBvdXQgYmVjYXVzZSBvZiBubyBhY3Rpdml0eSBmb3IgJHtyZXF1ZXN0VGltZW91dH0gbXNgKTtcbiAgICAgICAgICAgICAgICAgICAgdGltZW91dEVycm9yLm5hbWUgPSBcIlRpbWVvdXRFcnJvclwiO1xuICAgICAgICAgICAgICAgICAgICByZWplY3RXaXRoRGVzdHJveSh0aW1lb3V0RXJyb3IpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGFib3J0U2lnbmFsKSB7XG4gICAgICAgICAgICAgICAgY29uc3Qgb25BYm9ydCA9ICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgcmVxLmNsb3NlKCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGFib3J0RXJyb3IgPSBuZXcgRXJyb3IoXCJSZXF1ZXN0IGFib3J0ZWRcIik7XG4gICAgICAgICAgICAgICAgICAgIGFib3J0RXJyb3IubmFtZSA9IFwiQWJvcnRFcnJvclwiO1xuICAgICAgICAgICAgICAgICAgICByZWplY3RXaXRoRGVzdHJveShhYm9ydEVycm9yKTtcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgYWJvcnRTaWduYWwuYWRkRXZlbnRMaXN0ZW5lciA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHNpZ25hbCA9IGFib3J0U2lnbmFsO1xuICAgICAgICAgICAgICAgICAgICBzaWduYWwuYWRkRXZlbnRMaXN0ZW5lcihcImFib3J0XCIsIG9uQWJvcnQsIHsgb25jZTogdHJ1ZSB9KTtcbiAgICAgICAgICAgICAgICAgICAgcmVxLm9uY2UoXCJjbG9zZVwiLCAoKSA9PiBzaWduYWwucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImFib3J0XCIsIG9uQWJvcnQpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGFib3J0U2lnbmFsLm9uYWJvcnQgPSBvbkFib3J0O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJlcS5vbihcImZyYW1lRXJyb3JcIiwgKHR5cGUsIGNvZGUsIGlkKSA9PiB7XG4gICAgICAgICAgICAgICAgcmVqZWN0V2l0aERlc3Ryb3kobmV3IEVycm9yKGBGcmFtZSB0eXBlIGlkICR7dHlwZX0gaW4gc3RyZWFtIGlkICR7aWR9IGhhcyBmYWlsZWQgd2l0aCBjb2RlICR7Y29kZX0uYCkpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXEub24oXCJlcnJvclwiLCByZWplY3RXaXRoRGVzdHJveSk7XG4gICAgICAgICAgICByZXEub24oXCJhYm9ydGVkXCIsICgpID0+IHtcbiAgICAgICAgICAgICAgICByZWplY3RXaXRoRGVzdHJveShuZXcgRXJyb3IoYEhUVFAvMiBzdHJlYW0gaXMgYWJub3JtYWxseSBhYm9ydGVkIGluIG1pZC1jb21tdW5pY2F0aW9uIHdpdGggcmVzdWx0IGNvZGUgJHtyZXEucnN0Q29kZX0uYCkpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXEub24oXCJjbG9zZVwiLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgc2Vzc2lvbi51bnJlZigpO1xuICAgICAgICAgICAgICAgIGlmIChkaXNhYmxlQ29uY3VycmVudFN0cmVhbXMpIHtcbiAgICAgICAgICAgICAgICAgICAgc2Vzc2lvbi5kZXN0cm95KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICghZnVsZmlsbGVkKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlamVjdFdpdGhEZXN0cm95KG5ldyBFcnJvcihcIlVuZXhwZWN0ZWQgZXJyb3I6IGh0dHAyIHJlcXVlc3QgZGlkIG5vdCBnZXQgYSByZXNwb25zZVwiKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB3cml0ZVJlcXVlc3RCb2R5UHJvbWlzZSA9IHdyaXRlUmVxdWVzdEJvZHkocmVxLCByZXF1ZXN0LCByZXF1ZXN0VGltZW91dCk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICB1cGRhdGVIdHRwQ2xpZW50Q29uZmlnKGtleSwgdmFsdWUpIHtcbiAgICAgICAgdGhpcy5jb25maWcgPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMuY29uZmlnUHJvdmlkZXIgPSB0aGlzLmNvbmZpZ1Byb3ZpZGVyLnRoZW4oKGNvbmZpZykgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAuLi5jb25maWcsXG4gICAgICAgICAgICAgICAgW2tleV06IHZhbHVlLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGh0dHBIYW5kbGVyQ29uZmlncygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29uZmlnID8/IHt9O1xuICAgIH1cbiAgICBkZXN0cm95U2Vzc2lvbihzZXNzaW9uKSB7XG4gICAgICAgIGlmICghc2Vzc2lvbi5kZXN0cm95ZWQpIHtcbiAgICAgICAgICAgIHNlc3Npb24uZGVzdHJveSgpO1xuICAgICAgICB9XG4gICAgfVxufVxuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/../../../../node_modules/.pnpm/@smithy+node-http-handler@3.3.3/node_modules/@smithy/node-http-handler/dist-es/node-http2-handler.js\n");

/***/ }),

/***/ "(rsc)/../../../../node_modules/.pnpm/@smithy+node-http-handler@3.3.3/node_modules/@smithy/node-http-handler/dist-es/set-connection-timeout.js":
/*!***********************************************************************************************************************************************!*\
  !*** ../../../../node_modules/.pnpm/@smithy+node-http-handler@3.3.3/node_modules/@smithy/node-http-handler/dist-es/set-connection-timeout.js ***!
  \***********************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   setConnectionTimeout: () => (/* binding */ setConnectionTimeout)\n/* harmony export */ });\n/* harmony import */ var _timing__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./timing */ \"(rsc)/../../../../node_modules/.pnpm/@smithy+node-http-handler@3.3.3/node_modules/@smithy/node-http-handler/dist-es/timing.js\");\n\nconst DEFER_EVENT_LISTENER_TIME = 1000;\nconst setConnectionTimeout = (request, reject, timeoutInMs = 0) => {\n    if (!timeoutInMs) {\n        return -1;\n    }\n    const registerTimeout = (offset) => {\n        const timeoutId = _timing__WEBPACK_IMPORTED_MODULE_0__.timing.setTimeout(() => {\n            request.destroy();\n            reject(Object.assign(new Error(`Socket timed out without establishing a connection within ${timeoutInMs} ms`), {\n                name: \"TimeoutError\",\n            }));\n        }, timeoutInMs - offset);\n        const doWithSocket = (socket) => {\n            if (socket?.connecting) {\n                socket.on(\"connect\", () => {\n                    _timing__WEBPACK_IMPORTED_MODULE_0__.timing.clearTimeout(timeoutId);\n                });\n            }\n            else {\n                _timing__WEBPACK_IMPORTED_MODULE_0__.timing.clearTimeout(timeoutId);\n            }\n        };\n        if (request.socket) {\n            doWithSocket(request.socket);\n        }\n        else {\n            request.on(\"socket\", doWithSocket);\n        }\n    };\n    if (timeoutInMs < 2000) {\n        registerTimeout(0);\n        return 0;\n    }\n    return _timing__WEBPACK_IMPORTED_MODULE_0__.timing.setTimeout(registerTimeout.bind(null, DEFER_EVENT_LISTENER_TIME), DEFER_EVENT_LISTENER_TIME);\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzLy5wbnBtL0BzbWl0aHkrbm9kZS1odHRwLWhhbmRsZXJAMy4zLjMvbm9kZV9tb2R1bGVzL0BzbWl0aHkvbm9kZS1odHRwLWhhbmRsZXIvZGlzdC1lcy9zZXQtY29ubmVjdGlvbi10aW1lb3V0LmpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQWtDO0FBQ2xDO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBCQUEwQiwyQ0FBTTtBQUNoQztBQUNBLHdHQUF3RyxhQUFhO0FBQ3JIO0FBQ0EsYUFBYTtBQUNiLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IsMkNBQU07QUFDMUIsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQSxnQkFBZ0IsMkNBQU07QUFDdEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLDJDQUFNO0FBQ2pCIiwic291cmNlcyI6WyIvVXNlcnMvZXJpbmplcnJpL25vZGVfbW9kdWxlcy8ucG5wbS9Ac21pdGh5K25vZGUtaHR0cC1oYW5kbGVyQDMuMy4zL25vZGVfbW9kdWxlcy9Ac21pdGh5L25vZGUtaHR0cC1oYW5kbGVyL2Rpc3QtZXMvc2V0LWNvbm5lY3Rpb24tdGltZW91dC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyB0aW1pbmcgfSBmcm9tIFwiLi90aW1pbmdcIjtcbmNvbnN0IERFRkVSX0VWRU5UX0xJU1RFTkVSX1RJTUUgPSAxMDAwO1xuZXhwb3J0IGNvbnN0IHNldENvbm5lY3Rpb25UaW1lb3V0ID0gKHJlcXVlc3QsIHJlamVjdCwgdGltZW91dEluTXMgPSAwKSA9PiB7XG4gICAgaWYgKCF0aW1lb3V0SW5Ncykge1xuICAgICAgICByZXR1cm4gLTE7XG4gICAgfVxuICAgIGNvbnN0IHJlZ2lzdGVyVGltZW91dCA9IChvZmZzZXQpID0+IHtcbiAgICAgICAgY29uc3QgdGltZW91dElkID0gdGltaW5nLnNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgcmVxdWVzdC5kZXN0cm95KCk7XG4gICAgICAgICAgICByZWplY3QoT2JqZWN0LmFzc2lnbihuZXcgRXJyb3IoYFNvY2tldCB0aW1lZCBvdXQgd2l0aG91dCBlc3RhYmxpc2hpbmcgYSBjb25uZWN0aW9uIHdpdGhpbiAke3RpbWVvdXRJbk1zfSBtc2ApLCB7XG4gICAgICAgICAgICAgICAgbmFtZTogXCJUaW1lb3V0RXJyb3JcIixcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfSwgdGltZW91dEluTXMgLSBvZmZzZXQpO1xuICAgICAgICBjb25zdCBkb1dpdGhTb2NrZXQgPSAoc29ja2V0KSA9PiB7XG4gICAgICAgICAgICBpZiAoc29ja2V0Py5jb25uZWN0aW5nKSB7XG4gICAgICAgICAgICAgICAgc29ja2V0Lm9uKFwiY29ubmVjdFwiLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRpbWluZy5jbGVhclRpbWVvdXQodGltZW91dElkKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRpbWluZy5jbGVhclRpbWVvdXQodGltZW91dElkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgaWYgKHJlcXVlc3Quc29ja2V0KSB7XG4gICAgICAgICAgICBkb1dpdGhTb2NrZXQocmVxdWVzdC5zb2NrZXQpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmVxdWVzdC5vbihcInNvY2tldFwiLCBkb1dpdGhTb2NrZXQpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBpZiAodGltZW91dEluTXMgPCAyMDAwKSB7XG4gICAgICAgIHJlZ2lzdGVyVGltZW91dCgwKTtcbiAgICAgICAgcmV0dXJuIDA7XG4gICAgfVxuICAgIHJldHVybiB0aW1pbmcuc2V0VGltZW91dChyZWdpc3RlclRpbWVvdXQuYmluZChudWxsLCBERUZFUl9FVkVOVF9MSVNURU5FUl9USU1FKSwgREVGRVJfRVZFTlRfTElTVEVORVJfVElNRSk7XG59O1xuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/../../../../node_modules/.pnpm/@smithy+node-http-handler@3.3.3/node_modules/@smithy/node-http-handler/dist-es/set-connection-timeout.js\n");

/***/ }),

/***/ "(rsc)/../../../../node_modules/.pnpm/@smithy+node-http-handler@3.3.3/node_modules/@smithy/node-http-handler/dist-es/set-socket-keep-alive.js":
/*!**********************************************************************************************************************************************!*\
  !*** ../../../../node_modules/.pnpm/@smithy+node-http-handler@3.3.3/node_modules/@smithy/node-http-handler/dist-es/set-socket-keep-alive.js ***!
  \**********************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   setSocketKeepAlive: () => (/* binding */ setSocketKeepAlive)\n/* harmony export */ });\n/* harmony import */ var _timing__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./timing */ \"(rsc)/../../../../node_modules/.pnpm/@smithy+node-http-handler@3.3.3/node_modules/@smithy/node-http-handler/dist-es/timing.js\");\n\nconst DEFER_EVENT_LISTENER_TIME = 3000;\nconst setSocketKeepAlive = (request, { keepAlive, keepAliveMsecs }, deferTimeMs = DEFER_EVENT_LISTENER_TIME) => {\n    if (keepAlive !== true) {\n        return -1;\n    }\n    const registerListener = () => {\n        if (request.socket) {\n            request.socket.setKeepAlive(keepAlive, keepAliveMsecs || 0);\n        }\n        else {\n            request.on(\"socket\", (socket) => {\n                socket.setKeepAlive(keepAlive, keepAliveMsecs || 0);\n            });\n        }\n    };\n    if (deferTimeMs === 0) {\n        registerListener();\n        return 0;\n    }\n    return _timing__WEBPACK_IMPORTED_MODULE_0__.timing.setTimeout(registerListener, deferTimeMs);\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzLy5wbnBtL0BzbWl0aHkrbm9kZS1odHRwLWhhbmRsZXJAMy4zLjMvbm9kZV9tb2R1bGVzL0BzbWl0aHkvbm9kZS1odHRwLWhhbmRsZXIvZGlzdC1lcy9zZXQtc29ja2V0LWtlZXAtYWxpdmUuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBa0M7QUFDbEM7QUFDTyx1Q0FBdUMsMkJBQTJCO0FBQ3pFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsMkNBQU07QUFDakIiLCJzb3VyY2VzIjpbIi9Vc2Vycy9lcmluamVycmkvbm9kZV9tb2R1bGVzLy5wbnBtL0BzbWl0aHkrbm9kZS1odHRwLWhhbmRsZXJAMy4zLjMvbm9kZV9tb2R1bGVzL0BzbWl0aHkvbm9kZS1odHRwLWhhbmRsZXIvZGlzdC1lcy9zZXQtc29ja2V0LWtlZXAtYWxpdmUuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgdGltaW5nIH0gZnJvbSBcIi4vdGltaW5nXCI7XG5jb25zdCBERUZFUl9FVkVOVF9MSVNURU5FUl9USU1FID0gMzAwMDtcbmV4cG9ydCBjb25zdCBzZXRTb2NrZXRLZWVwQWxpdmUgPSAocmVxdWVzdCwgeyBrZWVwQWxpdmUsIGtlZXBBbGl2ZU1zZWNzIH0sIGRlZmVyVGltZU1zID0gREVGRVJfRVZFTlRfTElTVEVORVJfVElNRSkgPT4ge1xuICAgIGlmIChrZWVwQWxpdmUgIT09IHRydWUpIHtcbiAgICAgICAgcmV0dXJuIC0xO1xuICAgIH1cbiAgICBjb25zdCByZWdpc3Rlckxpc3RlbmVyID0gKCkgPT4ge1xuICAgICAgICBpZiAocmVxdWVzdC5zb2NrZXQpIHtcbiAgICAgICAgICAgIHJlcXVlc3Quc29ja2V0LnNldEtlZXBBbGl2ZShrZWVwQWxpdmUsIGtlZXBBbGl2ZU1zZWNzIHx8IDApO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmVxdWVzdC5vbihcInNvY2tldFwiLCAoc29ja2V0KSA9PiB7XG4gICAgICAgICAgICAgICAgc29ja2V0LnNldEtlZXBBbGl2ZShrZWVwQWxpdmUsIGtlZXBBbGl2ZU1zZWNzIHx8IDApO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIGlmIChkZWZlclRpbWVNcyA9PT0gMCkge1xuICAgICAgICByZWdpc3Rlckxpc3RlbmVyKCk7XG4gICAgICAgIHJldHVybiAwO1xuICAgIH1cbiAgICByZXR1cm4gdGltaW5nLnNldFRpbWVvdXQocmVnaXN0ZXJMaXN0ZW5lciwgZGVmZXJUaW1lTXMpO1xufTtcbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/../../../../node_modules/.pnpm/@smithy+node-http-handler@3.3.3/node_modules/@smithy/node-http-handler/dist-es/set-socket-keep-alive.js\n");

/***/ }),

/***/ "(rsc)/../../../../node_modules/.pnpm/@smithy+node-http-handler@3.3.3/node_modules/@smithy/node-http-handler/dist-es/set-socket-timeout.js":
/*!*******************************************************************************************************************************************!*\
  !*** ../../../../node_modules/.pnpm/@smithy+node-http-handler@3.3.3/node_modules/@smithy/node-http-handler/dist-es/set-socket-timeout.js ***!
  \*******************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   setSocketTimeout: () => (/* binding */ setSocketTimeout)\n/* harmony export */ });\n/* harmony import */ var _timing__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./timing */ \"(rsc)/../../../../node_modules/.pnpm/@smithy+node-http-handler@3.3.3/node_modules/@smithy/node-http-handler/dist-es/timing.js\");\n\nconst DEFER_EVENT_LISTENER_TIME = 3000;\nconst setSocketTimeout = (request, reject, timeoutInMs = 0) => {\n    const registerTimeout = (offset) => {\n        const timeout = timeoutInMs - offset;\n        const onTimeout = () => {\n            request.destroy();\n            reject(Object.assign(new Error(`Connection timed out after ${timeoutInMs} ms`), { name: \"TimeoutError\" }));\n        };\n        if (request.socket) {\n            request.socket.setTimeout(timeout, onTimeout);\n        }\n        else {\n            request.setTimeout(timeout, onTimeout);\n        }\n    };\n    if (0 < timeoutInMs && timeoutInMs < 6000) {\n        registerTimeout(0);\n        return 0;\n    }\n    return _timing__WEBPACK_IMPORTED_MODULE_0__.timing.setTimeout(registerTimeout.bind(null, timeoutInMs === 0 ? 0 : DEFER_EVENT_LISTENER_TIME), DEFER_EVENT_LISTENER_TIME);\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzLy5wbnBtL0BzbWl0aHkrbm9kZS1odHRwLWhhbmRsZXJAMy4zLjMvbm9kZV9tb2R1bGVzL0BzbWl0aHkvbm9kZS1odHRwLWhhbmRsZXIvZGlzdC1lcy9zZXQtc29ja2V0LXRpbWVvdXQuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBa0M7QUFDbEM7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUVBQXlFLGFBQWEsUUFBUSxzQkFBc0I7QUFDcEg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVywyQ0FBTTtBQUNqQiIsInNvdXJjZXMiOlsiL1VzZXJzL2VyaW5qZXJyaS9ub2RlX21vZHVsZXMvLnBucG0vQHNtaXRoeStub2RlLWh0dHAtaGFuZGxlckAzLjMuMy9ub2RlX21vZHVsZXMvQHNtaXRoeS9ub2RlLWh0dHAtaGFuZGxlci9kaXN0LWVzL3NldC1zb2NrZXQtdGltZW91dC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyB0aW1pbmcgfSBmcm9tIFwiLi90aW1pbmdcIjtcbmNvbnN0IERFRkVSX0VWRU5UX0xJU1RFTkVSX1RJTUUgPSAzMDAwO1xuZXhwb3J0IGNvbnN0IHNldFNvY2tldFRpbWVvdXQgPSAocmVxdWVzdCwgcmVqZWN0LCB0aW1lb3V0SW5NcyA9IDApID0+IHtcbiAgICBjb25zdCByZWdpc3RlclRpbWVvdXQgPSAob2Zmc2V0KSA9PiB7XG4gICAgICAgIGNvbnN0IHRpbWVvdXQgPSB0aW1lb3V0SW5NcyAtIG9mZnNldDtcbiAgICAgICAgY29uc3Qgb25UaW1lb3V0ID0gKCkgPT4ge1xuICAgICAgICAgICAgcmVxdWVzdC5kZXN0cm95KCk7XG4gICAgICAgICAgICByZWplY3QoT2JqZWN0LmFzc2lnbihuZXcgRXJyb3IoYENvbm5lY3Rpb24gdGltZWQgb3V0IGFmdGVyICR7dGltZW91dEluTXN9IG1zYCksIHsgbmFtZTogXCJUaW1lb3V0RXJyb3JcIiB9KSk7XG4gICAgICAgIH07XG4gICAgICAgIGlmIChyZXF1ZXN0LnNvY2tldCkge1xuICAgICAgICAgICAgcmVxdWVzdC5zb2NrZXQuc2V0VGltZW91dCh0aW1lb3V0LCBvblRpbWVvdXQpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmVxdWVzdC5zZXRUaW1lb3V0KHRpbWVvdXQsIG9uVGltZW91dCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIGlmICgwIDwgdGltZW91dEluTXMgJiYgdGltZW91dEluTXMgPCA2MDAwKSB7XG4gICAgICAgIHJlZ2lzdGVyVGltZW91dCgwKTtcbiAgICAgICAgcmV0dXJuIDA7XG4gICAgfVxuICAgIHJldHVybiB0aW1pbmcuc2V0VGltZW91dChyZWdpc3RlclRpbWVvdXQuYmluZChudWxsLCB0aW1lb3V0SW5NcyA9PT0gMCA/IDAgOiBERUZFUl9FVkVOVF9MSVNURU5FUl9USU1FKSwgREVGRVJfRVZFTlRfTElTVEVORVJfVElNRSk7XG59O1xuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/../../../../node_modules/.pnpm/@smithy+node-http-handler@3.3.3/node_modules/@smithy/node-http-handler/dist-es/set-socket-timeout.js\n");

/***/ }),

/***/ "(rsc)/../../../../node_modules/.pnpm/@smithy+node-http-handler@3.3.3/node_modules/@smithy/node-http-handler/dist-es/stream-collector/collector.js":
/*!***************************************************************************************************************************************************!*\
  !*** ../../../../node_modules/.pnpm/@smithy+node-http-handler@3.3.3/node_modules/@smithy/node-http-handler/dist-es/stream-collector/collector.js ***!
  \***************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Collector: () => (/* binding */ Collector)\n/* harmony export */ });\n/* harmony import */ var stream__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! stream */ \"stream\");\n/* harmony import */ var stream__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(stream__WEBPACK_IMPORTED_MODULE_0__);\n\nclass Collector extends stream__WEBPACK_IMPORTED_MODULE_0__.Writable {\n    constructor() {\n        super(...arguments);\n        this.bufferedBytes = [];\n    }\n    _write(chunk, encoding, callback) {\n        this.bufferedBytes.push(chunk);\n        callback();\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzLy5wbnBtL0BzbWl0aHkrbm9kZS1odHRwLWhhbmRsZXJAMy4zLjMvbm9kZV9tb2R1bGVzL0BzbWl0aHkvbm9kZS1odHRwLWhhbmRsZXIvZGlzdC1lcy9zdHJlYW0tY29sbGVjdG9yL2NvbGxlY3Rvci5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBa0M7QUFDM0Isd0JBQXdCLDRDQUFRO0FBQ3ZDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsiL1VzZXJzL2VyaW5qZXJyaS9ub2RlX21vZHVsZXMvLnBucG0vQHNtaXRoeStub2RlLWh0dHAtaGFuZGxlckAzLjMuMy9ub2RlX21vZHVsZXMvQHNtaXRoeS9ub2RlLWh0dHAtaGFuZGxlci9kaXN0LWVzL3N0cmVhbS1jb2xsZWN0b3IvY29sbGVjdG9yLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFdyaXRhYmxlIH0gZnJvbSBcInN0cmVhbVwiO1xuZXhwb3J0IGNsYXNzIENvbGxlY3RvciBleHRlbmRzIFdyaXRhYmxlIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoLi4uYXJndW1lbnRzKTtcbiAgICAgICAgdGhpcy5idWZmZXJlZEJ5dGVzID0gW107XG4gICAgfVxuICAgIF93cml0ZShjaHVuaywgZW5jb2RpbmcsIGNhbGxiYWNrKSB7XG4gICAgICAgIHRoaXMuYnVmZmVyZWRCeXRlcy5wdXNoKGNodW5rKTtcbiAgICAgICAgY2FsbGJhY2soKTtcbiAgICB9XG59XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/../../../../node_modules/.pnpm/@smithy+node-http-handler@3.3.3/node_modules/@smithy/node-http-handler/dist-es/stream-collector/collector.js\n");

/***/ }),

/***/ "(rsc)/../../../../node_modules/.pnpm/@smithy+node-http-handler@3.3.3/node_modules/@smithy/node-http-handler/dist-es/stream-collector/index.js":
/*!***********************************************************************************************************************************************!*\
  !*** ../../../../node_modules/.pnpm/@smithy+node-http-handler@3.3.3/node_modules/@smithy/node-http-handler/dist-es/stream-collector/index.js ***!
  \***********************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   streamCollector: () => (/* binding */ streamCollector)\n/* harmony export */ });\n/* harmony import */ var _collector__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./collector */ \"(rsc)/../../../../node_modules/.pnpm/@smithy+node-http-handler@3.3.3/node_modules/@smithy/node-http-handler/dist-es/stream-collector/collector.js\");\n\nconst streamCollector = (stream) => {\n    if (isReadableStreamInstance(stream)) {\n        return collectReadableStream(stream);\n    }\n    return new Promise((resolve, reject) => {\n        const collector = new _collector__WEBPACK_IMPORTED_MODULE_0__.Collector();\n        stream.pipe(collector);\n        stream.on(\"error\", (err) => {\n            collector.end();\n            reject(err);\n        });\n        collector.on(\"error\", reject);\n        collector.on(\"finish\", function () {\n            const bytes = new Uint8Array(Buffer.concat(this.bufferedBytes));\n            resolve(bytes);\n        });\n    });\n};\nconst isReadableStreamInstance = (stream) => typeof ReadableStream === \"function\" && stream instanceof ReadableStream;\nasync function collectReadableStream(stream) {\n    const chunks = [];\n    const reader = stream.getReader();\n    let isDone = false;\n    let length = 0;\n    while (!isDone) {\n        const { done, value } = await reader.read();\n        if (value) {\n            chunks.push(value);\n            length += value.length;\n        }\n        isDone = done;\n    }\n    const collected = new Uint8Array(length);\n    let offset = 0;\n    for (const chunk of chunks) {\n        collected.set(chunk, offset);\n        offset += chunk.length;\n    }\n    return collected;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzLy5wbnBtL0BzbWl0aHkrbm9kZS1odHRwLWhhbmRsZXJAMy4zLjMvbm9kZV9tb2R1bGVzL0BzbWl0aHkvbm9kZS1odHRwLWhhbmRsZXIvZGlzdC1lcy9zdHJlYW0tY29sbGVjdG9yL2luZGV4LmpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQXdDO0FBQ2pDO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4QkFBOEIsaURBQVM7QUFDdkM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0IsY0FBYztBQUM5QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyIvVXNlcnMvZXJpbmplcnJpL25vZGVfbW9kdWxlcy8ucG5wbS9Ac21pdGh5K25vZGUtaHR0cC1oYW5kbGVyQDMuMy4zL25vZGVfbW9kdWxlcy9Ac21pdGh5L25vZGUtaHR0cC1oYW5kbGVyL2Rpc3QtZXMvc3RyZWFtLWNvbGxlY3Rvci9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDb2xsZWN0b3IgfSBmcm9tIFwiLi9jb2xsZWN0b3JcIjtcbmV4cG9ydCBjb25zdCBzdHJlYW1Db2xsZWN0b3IgPSAoc3RyZWFtKSA9PiB7XG4gICAgaWYgKGlzUmVhZGFibGVTdHJlYW1JbnN0YW5jZShzdHJlYW0pKSB7XG4gICAgICAgIHJldHVybiBjb2xsZWN0UmVhZGFibGVTdHJlYW0oc3RyZWFtKTtcbiAgICB9XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgY29uc3QgY29sbGVjdG9yID0gbmV3IENvbGxlY3RvcigpO1xuICAgICAgICBzdHJlYW0ucGlwZShjb2xsZWN0b3IpO1xuICAgICAgICBzdHJlYW0ub24oXCJlcnJvclwiLCAoZXJyKSA9PiB7XG4gICAgICAgICAgICBjb2xsZWN0b3IuZW5kKCk7XG4gICAgICAgICAgICByZWplY3QoZXJyKTtcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbGxlY3Rvci5vbihcImVycm9yXCIsIHJlamVjdCk7XG4gICAgICAgIGNvbGxlY3Rvci5vbihcImZpbmlzaFwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBjb25zdCBieXRlcyA9IG5ldyBVaW50OEFycmF5KEJ1ZmZlci5jb25jYXQodGhpcy5idWZmZXJlZEJ5dGVzKSk7XG4gICAgICAgICAgICByZXNvbHZlKGJ5dGVzKTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG59O1xuY29uc3QgaXNSZWFkYWJsZVN0cmVhbUluc3RhbmNlID0gKHN0cmVhbSkgPT4gdHlwZW9mIFJlYWRhYmxlU3RyZWFtID09PSBcImZ1bmN0aW9uXCIgJiYgc3RyZWFtIGluc3RhbmNlb2YgUmVhZGFibGVTdHJlYW07XG5hc3luYyBmdW5jdGlvbiBjb2xsZWN0UmVhZGFibGVTdHJlYW0oc3RyZWFtKSB7XG4gICAgY29uc3QgY2h1bmtzID0gW107XG4gICAgY29uc3QgcmVhZGVyID0gc3RyZWFtLmdldFJlYWRlcigpO1xuICAgIGxldCBpc0RvbmUgPSBmYWxzZTtcbiAgICBsZXQgbGVuZ3RoID0gMDtcbiAgICB3aGlsZSAoIWlzRG9uZSkge1xuICAgICAgICBjb25zdCB7IGRvbmUsIHZhbHVlIH0gPSBhd2FpdCByZWFkZXIucmVhZCgpO1xuICAgICAgICBpZiAodmFsdWUpIHtcbiAgICAgICAgICAgIGNodW5rcy5wdXNoKHZhbHVlKTtcbiAgICAgICAgICAgIGxlbmd0aCArPSB2YWx1ZS5sZW5ndGg7XG4gICAgICAgIH1cbiAgICAgICAgaXNEb25lID0gZG9uZTtcbiAgICB9XG4gICAgY29uc3QgY29sbGVjdGVkID0gbmV3IFVpbnQ4QXJyYXkobGVuZ3RoKTtcbiAgICBsZXQgb2Zmc2V0ID0gMDtcbiAgICBmb3IgKGNvbnN0IGNodW5rIG9mIGNodW5rcykge1xuICAgICAgICBjb2xsZWN0ZWQuc2V0KGNodW5rLCBvZmZzZXQpO1xuICAgICAgICBvZmZzZXQgKz0gY2h1bmsubGVuZ3RoO1xuICAgIH1cbiAgICByZXR1cm4gY29sbGVjdGVkO1xufVxuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/../../../../node_modules/.pnpm/@smithy+node-http-handler@3.3.3/node_modules/@smithy/node-http-handler/dist-es/stream-collector/index.js\n");

/***/ }),

/***/ "(rsc)/../../../../node_modules/.pnpm/@smithy+node-http-handler@3.3.3/node_modules/@smithy/node-http-handler/dist-es/timing.js":
/*!*******************************************************************************************************************************!*\
  !*** ../../../../node_modules/.pnpm/@smithy+node-http-handler@3.3.3/node_modules/@smithy/node-http-handler/dist-es/timing.js ***!
  \*******************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   timing: () => (/* binding */ timing)\n/* harmony export */ });\nconst timing = {\n    setTimeout: (cb, ms) => setTimeout(cb, ms),\n    clearTimeout: (timeoutId) => clearTimeout(timeoutId),\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzLy5wbnBtL0BzbWl0aHkrbm9kZS1odHRwLWhhbmRsZXJAMy4zLjMvbm9kZV9tb2R1bGVzL0BzbWl0aHkvbm9kZS1odHRwLWhhbmRsZXIvZGlzdC1lcy90aW1pbmcuanMiLCJtYXBwaW5ncyI6Ijs7OztBQUFPO0FBQ1A7QUFDQTtBQUNBIiwic291cmNlcyI6WyIvVXNlcnMvZXJpbmplcnJpL25vZGVfbW9kdWxlcy8ucG5wbS9Ac21pdGh5K25vZGUtaHR0cC1oYW5kbGVyQDMuMy4zL25vZGVfbW9kdWxlcy9Ac21pdGh5L25vZGUtaHR0cC1oYW5kbGVyL2Rpc3QtZXMvdGltaW5nLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBjb25zdCB0aW1pbmcgPSB7XG4gICAgc2V0VGltZW91dDogKGNiLCBtcykgPT4gc2V0VGltZW91dChjYiwgbXMpLFxuICAgIGNsZWFyVGltZW91dDogKHRpbWVvdXRJZCkgPT4gY2xlYXJUaW1lb3V0KHRpbWVvdXRJZCksXG59O1xuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/../../../../node_modules/.pnpm/@smithy+node-http-handler@3.3.3/node_modules/@smithy/node-http-handler/dist-es/timing.js\n");

/***/ }),

/***/ "(rsc)/../../../../node_modules/.pnpm/@smithy+node-http-handler@3.3.3/node_modules/@smithy/node-http-handler/dist-es/write-request-body.js":
/*!*******************************************************************************************************************************************!*\
  !*** ../../../../node_modules/.pnpm/@smithy+node-http-handler@3.3.3/node_modules/@smithy/node-http-handler/dist-es/write-request-body.js ***!
  \*******************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   writeRequestBody: () => (/* binding */ writeRequestBody)\n/* harmony export */ });\n/* harmony import */ var stream__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! stream */ \"stream\");\n/* harmony import */ var stream__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(stream__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _timing__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./timing */ \"(rsc)/../../../../node_modules/.pnpm/@smithy+node-http-handler@3.3.3/node_modules/@smithy/node-http-handler/dist-es/timing.js\");\n\n\nconst MIN_WAIT_TIME = 1000;\nasync function writeRequestBody(httpRequest, request, maxContinueTimeoutMs = MIN_WAIT_TIME) {\n    const headers = request.headers ?? {};\n    const expect = headers[\"Expect\"] || headers[\"expect\"];\n    let timeoutId = -1;\n    let sendBody = true;\n    if (expect === \"100-continue\") {\n        sendBody = await Promise.race([\n            new Promise((resolve) => {\n                timeoutId = Number(_timing__WEBPACK_IMPORTED_MODULE_1__.timing.setTimeout(resolve, Math.max(MIN_WAIT_TIME, maxContinueTimeoutMs)));\n            }),\n            new Promise((resolve) => {\n                httpRequest.on(\"continue\", () => {\n                    _timing__WEBPACK_IMPORTED_MODULE_1__.timing.clearTimeout(timeoutId);\n                    resolve(true);\n                });\n                httpRequest.on(\"response\", () => {\n                    _timing__WEBPACK_IMPORTED_MODULE_1__.timing.clearTimeout(timeoutId);\n                    resolve(false);\n                });\n                httpRequest.on(\"error\", () => {\n                    _timing__WEBPACK_IMPORTED_MODULE_1__.timing.clearTimeout(timeoutId);\n                    resolve(false);\n                });\n            }),\n        ]);\n    }\n    if (sendBody) {\n        writeBody(httpRequest, request.body);\n    }\n}\nfunction writeBody(httpRequest, body) {\n    if (body instanceof stream__WEBPACK_IMPORTED_MODULE_0__.Readable) {\n        body.pipe(httpRequest);\n        return;\n    }\n    if (body) {\n        if (Buffer.isBuffer(body) || typeof body === \"string\") {\n            httpRequest.end(body);\n            return;\n        }\n        const uint8 = body;\n        if (typeof uint8 === \"object\" &&\n            uint8.buffer &&\n            typeof uint8.byteOffset === \"number\" &&\n            typeof uint8.byteLength === \"number\") {\n            httpRequest.end(Buffer.from(uint8.buffer, uint8.byteOffset, uint8.byteLength));\n            return;\n        }\n        httpRequest.end(Buffer.from(body));\n        return;\n    }\n    httpRequest.end();\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzLy5wbnBtL0BzbWl0aHkrbm9kZS1odHRwLWhhbmRsZXJAMy4zLjMvbm9kZV9tb2R1bGVzL0BzbWl0aHkvbm9kZS1odHRwLWhhbmRsZXIvZGlzdC1lcy93cml0ZS1yZXF1ZXN0LWJvZHkuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFrQztBQUNBO0FBQ2xDO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1DQUFtQywyQ0FBTTtBQUN6QyxhQUFhO0FBQ2I7QUFDQTtBQUNBLG9CQUFvQiwyQ0FBTTtBQUMxQjtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBLG9CQUFvQiwyQ0FBTTtBQUMxQjtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBLG9CQUFvQiwyQ0FBTTtBQUMxQjtBQUNBLGlCQUFpQjtBQUNqQixhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsNENBQVE7QUFDaEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyIvVXNlcnMvZXJpbmplcnJpL25vZGVfbW9kdWxlcy8ucG5wbS9Ac21pdGh5K25vZGUtaHR0cC1oYW5kbGVyQDMuMy4zL25vZGVfbW9kdWxlcy9Ac21pdGh5L25vZGUtaHR0cC1oYW5kbGVyL2Rpc3QtZXMvd3JpdGUtcmVxdWVzdC1ib2R5LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFJlYWRhYmxlIH0gZnJvbSBcInN0cmVhbVwiO1xuaW1wb3J0IHsgdGltaW5nIH0gZnJvbSBcIi4vdGltaW5nXCI7XG5jb25zdCBNSU5fV0FJVF9USU1FID0gMTAwMDtcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB3cml0ZVJlcXVlc3RCb2R5KGh0dHBSZXF1ZXN0LCByZXF1ZXN0LCBtYXhDb250aW51ZVRpbWVvdXRNcyA9IE1JTl9XQUlUX1RJTUUpIHtcbiAgICBjb25zdCBoZWFkZXJzID0gcmVxdWVzdC5oZWFkZXJzID8/IHt9O1xuICAgIGNvbnN0IGV4cGVjdCA9IGhlYWRlcnNbXCJFeHBlY3RcIl0gfHwgaGVhZGVyc1tcImV4cGVjdFwiXTtcbiAgICBsZXQgdGltZW91dElkID0gLTE7XG4gICAgbGV0IHNlbmRCb2R5ID0gdHJ1ZTtcbiAgICBpZiAoZXhwZWN0ID09PSBcIjEwMC1jb250aW51ZVwiKSB7XG4gICAgICAgIHNlbmRCb2R5ID0gYXdhaXQgUHJvbWlzZS5yYWNlKFtcbiAgICAgICAgICAgIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XG4gICAgICAgICAgICAgICAgdGltZW91dElkID0gTnVtYmVyKHRpbWluZy5zZXRUaW1lb3V0KHJlc29sdmUsIE1hdGgubWF4KE1JTl9XQUlUX1RJTUUsIG1heENvbnRpbnVlVGltZW91dE1zKSkpO1xuICAgICAgICAgICAgfSksXG4gICAgICAgICAgICBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4ge1xuICAgICAgICAgICAgICAgIGh0dHBSZXF1ZXN0Lm9uKFwiY29udGludWVcIiwgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aW1pbmcuY2xlYXJUaW1lb3V0KHRpbWVvdXRJZCk7XG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUodHJ1ZSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgaHR0cFJlcXVlc3Qub24oXCJyZXNwb25zZVwiLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRpbWluZy5jbGVhclRpbWVvdXQodGltZW91dElkKTtcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShmYWxzZSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgaHR0cFJlcXVlc3Qub24oXCJlcnJvclwiLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRpbWluZy5jbGVhclRpbWVvdXQodGltZW91dElkKTtcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShmYWxzZSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KSxcbiAgICAgICAgXSk7XG4gICAgfVxuICAgIGlmIChzZW5kQm9keSkge1xuICAgICAgICB3cml0ZUJvZHkoaHR0cFJlcXVlc3QsIHJlcXVlc3QuYm9keSk7XG4gICAgfVxufVxuZnVuY3Rpb24gd3JpdGVCb2R5KGh0dHBSZXF1ZXN0LCBib2R5KSB7XG4gICAgaWYgKGJvZHkgaW5zdGFuY2VvZiBSZWFkYWJsZSkge1xuICAgICAgICBib2R5LnBpcGUoaHR0cFJlcXVlc3QpO1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmIChib2R5KSB7XG4gICAgICAgIGlmIChCdWZmZXIuaXNCdWZmZXIoYm9keSkgfHwgdHlwZW9mIGJvZHkgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgIGh0dHBSZXF1ZXN0LmVuZChib2R5KTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB1aW50OCA9IGJvZHk7XG4gICAgICAgIGlmICh0eXBlb2YgdWludDggPT09IFwib2JqZWN0XCIgJiZcbiAgICAgICAgICAgIHVpbnQ4LmJ1ZmZlciAmJlxuICAgICAgICAgICAgdHlwZW9mIHVpbnQ4LmJ5dGVPZmZzZXQgPT09IFwibnVtYmVyXCIgJiZcbiAgICAgICAgICAgIHR5cGVvZiB1aW50OC5ieXRlTGVuZ3RoID09PSBcIm51bWJlclwiKSB7XG4gICAgICAgICAgICBodHRwUmVxdWVzdC5lbmQoQnVmZmVyLmZyb20odWludDguYnVmZmVyLCB1aW50OC5ieXRlT2Zmc2V0LCB1aW50OC5ieXRlTGVuZ3RoKSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaHR0cFJlcXVlc3QuZW5kKEJ1ZmZlci5mcm9tKGJvZHkpKTtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBodHRwUmVxdWVzdC5lbmQoKTtcbn1cbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/../../../../node_modules/.pnpm/@smithy+node-http-handler@3.3.3/node_modules/@smithy/node-http-handler/dist-es/write-request-body.js\n");

/***/ })

};
;