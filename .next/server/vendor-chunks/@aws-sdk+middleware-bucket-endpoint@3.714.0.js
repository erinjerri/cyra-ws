"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/@aws-sdk+middleware-bucket-endpoint@3.714.0";
exports.ids = ["vendor-chunks/@aws-sdk+middleware-bucket-endpoint@3.714.0"];
exports.modules = {

/***/ "(rsc)/../../../../node_modules/.pnpm/@aws-sdk+middleware-bucket-endpoint@3.714.0/node_modules/@aws-sdk/middleware-bucket-endpoint/dist-cjs/index.js":
/*!*****************************************************************************************************************************************************!*\
  !*** ../../../../node_modules/.pnpm/@aws-sdk+middleware-bucket-endpoint@3.714.0/node_modules/@aws-sdk/middleware-bucket-endpoint/dist-cjs/index.js ***!
  \*****************************************************************************************************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("\nvar __defProp = Object.defineProperty;\nvar __getOwnPropDesc = Object.getOwnPropertyDescriptor;\nvar __getOwnPropNames = Object.getOwnPropertyNames;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __name = (target, value) => __defProp(target, \"name\", { value, configurable: true });\nvar __export = (target, all) => {\n  for (var name in all)\n    __defProp(target, name, { get: all[name], enumerable: true });\n};\nvar __copyProps = (to, from, except, desc) => {\n  if (from && typeof from === \"object\" || typeof from === \"function\") {\n    for (let key of __getOwnPropNames(from))\n      if (!__hasOwnProp.call(to, key) && key !== except)\n        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });\n  }\n  return to;\n};\nvar __toCommonJS = (mod) => __copyProps(__defProp({}, \"__esModule\", { value: true }), mod);\n\n// src/index.ts\nvar src_exports = {};\n__export(src_exports, {\n  NODE_DISABLE_MULTIREGION_ACCESS_POINT_CONFIG_OPTIONS: () => NODE_DISABLE_MULTIREGION_ACCESS_POINT_CONFIG_OPTIONS,\n  NODE_DISABLE_MULTIREGION_ACCESS_POINT_ENV_NAME: () => NODE_DISABLE_MULTIREGION_ACCESS_POINT_ENV_NAME,\n  NODE_DISABLE_MULTIREGION_ACCESS_POINT_INI_NAME: () => NODE_DISABLE_MULTIREGION_ACCESS_POINT_INI_NAME,\n  NODE_USE_ARN_REGION_CONFIG_OPTIONS: () => NODE_USE_ARN_REGION_CONFIG_OPTIONS,\n  NODE_USE_ARN_REGION_ENV_NAME: () => NODE_USE_ARN_REGION_ENV_NAME,\n  NODE_USE_ARN_REGION_INI_NAME: () => NODE_USE_ARN_REGION_INI_NAME,\n  bucketEndpointMiddleware: () => bucketEndpointMiddleware,\n  bucketEndpointMiddlewareOptions: () => bucketEndpointMiddlewareOptions,\n  bucketHostname: () => bucketHostname,\n  getArnResources: () => getArnResources,\n  getBucketEndpointPlugin: () => getBucketEndpointPlugin,\n  getSuffixForArnEndpoint: () => getSuffixForArnEndpoint,\n  resolveBucketEndpointConfig: () => resolveBucketEndpointConfig,\n  validateAccountId: () => validateAccountId,\n  validateDNSHostLabel: () => validateDNSHostLabel,\n  validateNoDualstack: () => validateNoDualstack,\n  validateNoFIPS: () => validateNoFIPS,\n  validateOutpostService: () => validateOutpostService,\n  validatePartition: () => validatePartition,\n  validateRegion: () => validateRegion\n});\nmodule.exports = __toCommonJS(src_exports);\n\n// src/NodeDisableMultiregionAccessPointConfigOptions.ts\nvar import_util_config_provider = __webpack_require__(/*! @smithy/util-config-provider */ \"(rsc)/../../../../node_modules/.pnpm/@smithy+util-config-provider@3.0.0/node_modules/@smithy/util-config-provider/dist-es/index.js\");\nvar NODE_DISABLE_MULTIREGION_ACCESS_POINT_ENV_NAME = \"AWS_S3_DISABLE_MULTIREGION_ACCESS_POINTS\";\nvar NODE_DISABLE_MULTIREGION_ACCESS_POINT_INI_NAME = \"s3_disable_multiregion_access_points\";\nvar NODE_DISABLE_MULTIREGION_ACCESS_POINT_CONFIG_OPTIONS = {\n  environmentVariableSelector: (env) => (0, import_util_config_provider.booleanSelector)(env, NODE_DISABLE_MULTIREGION_ACCESS_POINT_ENV_NAME, import_util_config_provider.SelectorType.ENV),\n  configFileSelector: (profile) => (0, import_util_config_provider.booleanSelector)(profile, NODE_DISABLE_MULTIREGION_ACCESS_POINT_INI_NAME, import_util_config_provider.SelectorType.CONFIG),\n  default: false\n};\n\n// src/NodeUseArnRegionConfigOptions.ts\n\nvar NODE_USE_ARN_REGION_ENV_NAME = \"AWS_S3_USE_ARN_REGION\";\nvar NODE_USE_ARN_REGION_INI_NAME = \"s3_use_arn_region\";\nvar NODE_USE_ARN_REGION_CONFIG_OPTIONS = {\n  environmentVariableSelector: (env) => (0, import_util_config_provider.booleanSelector)(env, NODE_USE_ARN_REGION_ENV_NAME, import_util_config_provider.SelectorType.ENV),\n  configFileSelector: (profile) => (0, import_util_config_provider.booleanSelector)(profile, NODE_USE_ARN_REGION_INI_NAME, import_util_config_provider.SelectorType.CONFIG),\n  default: false\n};\n\n// src/bucketEndpointMiddleware.ts\nvar import_util_arn_parser = __webpack_require__(/*! @aws-sdk/util-arn-parser */ \"(rsc)/../../../../node_modules/.pnpm/@aws-sdk+util-arn-parser@3.693.0/node_modules/@aws-sdk/util-arn-parser/dist-es/index.js\");\nvar import_protocol_http = __webpack_require__(/*! @smithy/protocol-http */ \"(rsc)/../../../../node_modules/.pnpm/@smithy+protocol-http@4.1.8/node_modules/@smithy/protocol-http/dist-es/index.js\");\n\n// src/bucketHostnameUtils.ts\nvar DOMAIN_PATTERN = /^[a-z0-9][a-z0-9\\.\\-]{1,61}[a-z0-9]$/;\nvar IP_ADDRESS_PATTERN = /(\\d+\\.){3}\\d+/;\nvar DOTS_PATTERN = /\\.\\./;\nvar DOT_PATTERN = /\\./;\nvar S3_HOSTNAME_PATTERN = /^(.+\\.)?s3(-fips)?(\\.dualstack)?[.-]([a-z0-9-]+)\\./;\nvar S3_US_EAST_1_ALTNAME_PATTERN = /^s3(-external-1)?\\.amazonaws\\.com$/;\nvar AWS_PARTITION_SUFFIX = \"amazonaws.com\";\nvar isBucketNameOptions = /* @__PURE__ */ __name((options) => typeof options.bucketName === \"string\", \"isBucketNameOptions\");\nvar isDnsCompatibleBucketName = /* @__PURE__ */ __name((bucketName) => DOMAIN_PATTERN.test(bucketName) && !IP_ADDRESS_PATTERN.test(bucketName) && !DOTS_PATTERN.test(bucketName), \"isDnsCompatibleBucketName\");\nvar getRegionalSuffix = /* @__PURE__ */ __name((hostname) => {\n  const parts = hostname.match(S3_HOSTNAME_PATTERN);\n  return [parts[4], hostname.replace(new RegExp(`^${parts[0]}`), \"\")];\n}, \"getRegionalSuffix\");\nvar getSuffix = /* @__PURE__ */ __name((hostname) => S3_US_EAST_1_ALTNAME_PATTERN.test(hostname) ? [\"us-east-1\", AWS_PARTITION_SUFFIX] : getRegionalSuffix(hostname), \"getSuffix\");\nvar getSuffixForArnEndpoint = /* @__PURE__ */ __name((hostname) => S3_US_EAST_1_ALTNAME_PATTERN.test(hostname) ? [hostname.replace(`.${AWS_PARTITION_SUFFIX}`, \"\"), AWS_PARTITION_SUFFIX] : getRegionalSuffix(hostname), \"getSuffixForArnEndpoint\");\nvar validateArnEndpointOptions = /* @__PURE__ */ __name((options) => {\n  if (options.pathStyleEndpoint) {\n    throw new Error(\"Path-style S3 endpoint is not supported when bucket is an ARN\");\n  }\n  if (options.accelerateEndpoint) {\n    throw new Error(\"Accelerate endpoint is not supported when bucket is an ARN\");\n  }\n  if (!options.tlsCompatible) {\n    throw new Error(\"HTTPS is required when bucket is an ARN\");\n  }\n}, \"validateArnEndpointOptions\");\nvar validateService = /* @__PURE__ */ __name((service) => {\n  if (service !== \"s3\" && service !== \"s3-outposts\" && service !== \"s3-object-lambda\") {\n    throw new Error(\"Expect 's3' or 's3-outposts' or 's3-object-lambda' in ARN service component\");\n  }\n}, \"validateService\");\nvar validateS3Service = /* @__PURE__ */ __name((service) => {\n  if (service !== \"s3\") {\n    throw new Error(\"Expect 's3' in Accesspoint ARN service component\");\n  }\n}, \"validateS3Service\");\nvar validateOutpostService = /* @__PURE__ */ __name((service) => {\n  if (service !== \"s3-outposts\") {\n    throw new Error(\"Expect 's3-posts' in Outpost ARN service component\");\n  }\n}, \"validateOutpostService\");\nvar validatePartition = /* @__PURE__ */ __name((partition, options) => {\n  if (partition !== options.clientPartition) {\n    throw new Error(`Partition in ARN is incompatible, got \"${partition}\" but expected \"${options.clientPartition}\"`);\n  }\n}, \"validatePartition\");\nvar validateRegion = /* @__PURE__ */ __name((region, options) => {\n  if (region === \"\") {\n    throw new Error(\"ARN region is empty\");\n  }\n  if (options.useFipsEndpoint) {\n    if (!options.allowFipsRegion) {\n      throw new Error(\"FIPS region is not supported\");\n    } else if (!isEqualRegions(region, options.clientRegion)) {\n      throw new Error(`Client FIPS region ${options.clientRegion} doesn't match region ${region} in ARN`);\n    }\n  }\n  if (!options.useArnRegion && !isEqualRegions(region, options.clientRegion || \"\") && !isEqualRegions(region, options.clientSigningRegion || \"\")) {\n    throw new Error(`Region in ARN is incompatible, got ${region} but expected ${options.clientRegion}`);\n  }\n}, \"validateRegion\");\nvar validateRegionalClient = /* @__PURE__ */ __name((region) => {\n  if ([\"s3-external-1\", \"aws-global\"].includes(region)) {\n    throw new Error(`Client region ${region} is not regional`);\n  }\n}, \"validateRegionalClient\");\nvar isEqualRegions = /* @__PURE__ */ __name((regionA, regionB) => regionA === regionB, \"isEqualRegions\");\nvar validateAccountId = /* @__PURE__ */ __name((accountId) => {\n  if (!/[0-9]{12}/.exec(accountId)) {\n    throw new Error(\"Access point ARN accountID does not match regex '[0-9]{12}'\");\n  }\n}, \"validateAccountId\");\nvar validateDNSHostLabel = /* @__PURE__ */ __name((label, options = { tlsCompatible: true }) => {\n  if (label.length >= 64 || !/^[a-z0-9][a-z0-9.-]*[a-z0-9]$/.test(label) || /(\\d+\\.){3}\\d+/.test(label) || /[.-]{2}/.test(label) || (options == null ? void 0 : options.tlsCompatible) && DOT_PATTERN.test(label)) {\n    throw new Error(`Invalid DNS label ${label}`);\n  }\n}, \"validateDNSHostLabel\");\nvar validateCustomEndpoint = /* @__PURE__ */ __name((options) => {\n  if (options.isCustomEndpoint) {\n    if (options.dualstackEndpoint)\n      throw new Error(\"Dualstack endpoint is not supported with custom endpoint\");\n    if (options.accelerateEndpoint)\n      throw new Error(\"Accelerate endpoint is not supported with custom endpoint\");\n  }\n}, \"validateCustomEndpoint\");\nvar getArnResources = /* @__PURE__ */ __name((resource) => {\n  const delimiter = resource.includes(\":\") ? \":\" : \"/\";\n  const [resourceType, ...rest] = resource.split(delimiter);\n  if (resourceType === \"accesspoint\") {\n    if (rest.length !== 1 || rest[0] === \"\") {\n      throw new Error(`Access Point ARN should have one resource accesspoint${delimiter}{accesspointname}`);\n    }\n    return { accesspointName: rest[0] };\n  } else if (resourceType === \"outpost\") {\n    if (!rest[0] || rest[1] !== \"accesspoint\" || !rest[2] || rest.length !== 3) {\n      throw new Error(\n        `Outpost ARN should have resource outpost${delimiter}{outpostId}${delimiter}accesspoint${delimiter}{accesspointName}`\n      );\n    }\n    const [outpostId, _, accesspointName] = rest;\n    return { outpostId, accesspointName };\n  } else {\n    throw new Error(`ARN resource should begin with 'accesspoint${delimiter}' or 'outpost${delimiter}'`);\n  }\n}, \"getArnResources\");\nvar validateNoDualstack = /* @__PURE__ */ __name((dualstackEndpoint) => {\n  if (dualstackEndpoint)\n    throw new Error(\"Dualstack endpoint is not supported with Outpost or Multi-region Access Point ARN.\");\n}, \"validateNoDualstack\");\nvar validateNoFIPS = /* @__PURE__ */ __name((useFipsEndpoint) => {\n  if (useFipsEndpoint)\n    throw new Error(`FIPS region is not supported with Outpost.`);\n}, \"validateNoFIPS\");\nvar validateMrapAlias = /* @__PURE__ */ __name((name) => {\n  try {\n    name.split(\".\").forEach((label) => {\n      validateDNSHostLabel(label);\n    });\n  } catch (e) {\n    throw new Error(`\"${name}\" is not a DNS compatible name.`);\n  }\n}, \"validateMrapAlias\");\n\n// src/bucketHostname.ts\nvar bucketHostname = /* @__PURE__ */ __name((options) => {\n  validateCustomEndpoint(options);\n  return isBucketNameOptions(options) ? (\n    // Construct endpoint when bucketName is a string referring to a bucket name\n    getEndpointFromBucketName(options)\n  ) : (\n    // Construct endpoint when bucketName is an ARN referring to an S3 resource like Access Point\n    getEndpointFromArn(options)\n  );\n}, \"bucketHostname\");\nvar getEndpointFromBucketName = /* @__PURE__ */ __name(({\n  accelerateEndpoint = false,\n  clientRegion: region,\n  baseHostname,\n  bucketName,\n  dualstackEndpoint = false,\n  fipsEndpoint = false,\n  pathStyleEndpoint = false,\n  tlsCompatible = true,\n  isCustomEndpoint = false\n}) => {\n  const [clientRegion, hostnameSuffix] = isCustomEndpoint ? [region, baseHostname] : getSuffix(baseHostname);\n  if (pathStyleEndpoint || !isDnsCompatibleBucketName(bucketName) || tlsCompatible && DOT_PATTERN.test(bucketName)) {\n    return {\n      bucketEndpoint: false,\n      hostname: dualstackEndpoint ? `s3.dualstack.${clientRegion}.${hostnameSuffix}` : baseHostname\n    };\n  }\n  if (accelerateEndpoint) {\n    baseHostname = `s3-accelerate${dualstackEndpoint ? \".dualstack\" : \"\"}.${hostnameSuffix}`;\n  } else if (dualstackEndpoint) {\n    baseHostname = `s3.dualstack.${clientRegion}.${hostnameSuffix}`;\n  }\n  return {\n    bucketEndpoint: true,\n    hostname: `${bucketName}.${baseHostname}`\n  };\n}, \"getEndpointFromBucketName\");\nvar getEndpointFromArn = /* @__PURE__ */ __name((options) => {\n  const { isCustomEndpoint, baseHostname, clientRegion } = options;\n  const hostnameSuffix = isCustomEndpoint ? baseHostname : getSuffixForArnEndpoint(baseHostname)[1];\n  const {\n    pathStyleEndpoint,\n    accelerateEndpoint = false,\n    fipsEndpoint = false,\n    tlsCompatible = true,\n    bucketName,\n    clientPartition = \"aws\"\n  } = options;\n  validateArnEndpointOptions({ pathStyleEndpoint, accelerateEndpoint, tlsCompatible });\n  const { service, partition, accountId, region, resource } = bucketName;\n  validateService(service);\n  validatePartition(partition, { clientPartition });\n  validateAccountId(accountId);\n  const { accesspointName, outpostId } = getArnResources(resource);\n  if (service === \"s3-object-lambda\") {\n    return getEndpointFromObjectLambdaArn({ ...options, tlsCompatible, bucketName, accesspointName, hostnameSuffix });\n  }\n  if (region === \"\") {\n    return getEndpointFromMRAPArn({ ...options, clientRegion, mrapAlias: accesspointName, hostnameSuffix });\n  }\n  if (outpostId) {\n    return getEndpointFromOutpostArn({ ...options, clientRegion, outpostId, accesspointName, hostnameSuffix });\n  }\n  return getEndpointFromAccessPointArn({ ...options, clientRegion, accesspointName, hostnameSuffix });\n}, \"getEndpointFromArn\");\nvar getEndpointFromObjectLambdaArn = /* @__PURE__ */ __name(({\n  dualstackEndpoint = false,\n  fipsEndpoint = false,\n  tlsCompatible = true,\n  useArnRegion,\n  clientRegion,\n  clientSigningRegion = clientRegion,\n  accesspointName,\n  bucketName,\n  hostnameSuffix\n}) => {\n  const { accountId, region, service } = bucketName;\n  validateRegionalClient(clientRegion);\n  validateRegion(region, {\n    useArnRegion,\n    clientRegion,\n    clientSigningRegion,\n    allowFipsRegion: true,\n    useFipsEndpoint: fipsEndpoint\n  });\n  validateNoDualstack(dualstackEndpoint);\n  const DNSHostLabel = `${accesspointName}-${accountId}`;\n  validateDNSHostLabel(DNSHostLabel, { tlsCompatible });\n  const endpointRegion = useArnRegion ? region : clientRegion;\n  const signingRegion = useArnRegion ? region : clientSigningRegion;\n  return {\n    bucketEndpoint: true,\n    hostname: `${DNSHostLabel}.${service}${fipsEndpoint ? \"-fips\" : \"\"}.${endpointRegion}.${hostnameSuffix}`,\n    signingRegion,\n    signingService: service\n  };\n}, \"getEndpointFromObjectLambdaArn\");\nvar getEndpointFromMRAPArn = /* @__PURE__ */ __name(({\n  disableMultiregionAccessPoints,\n  dualstackEndpoint = false,\n  isCustomEndpoint,\n  mrapAlias,\n  hostnameSuffix\n}) => {\n  if (disableMultiregionAccessPoints === true) {\n    throw new Error(\"SDK is attempting to use a MRAP ARN. Please enable to feature.\");\n  }\n  validateMrapAlias(mrapAlias);\n  validateNoDualstack(dualstackEndpoint);\n  return {\n    bucketEndpoint: true,\n    hostname: `${mrapAlias}${isCustomEndpoint ? \"\" : `.accesspoint.s3-global`}.${hostnameSuffix}`,\n    signingRegion: \"*\"\n  };\n}, \"getEndpointFromMRAPArn\");\nvar getEndpointFromOutpostArn = /* @__PURE__ */ __name(({\n  useArnRegion,\n  clientRegion,\n  clientSigningRegion = clientRegion,\n  bucketName,\n  outpostId,\n  dualstackEndpoint = false,\n  fipsEndpoint = false,\n  tlsCompatible = true,\n  accesspointName,\n  isCustomEndpoint,\n  hostnameSuffix\n}) => {\n  validateRegionalClient(clientRegion);\n  validateRegion(bucketName.region, { useArnRegion, clientRegion, clientSigningRegion, useFipsEndpoint: fipsEndpoint });\n  const DNSHostLabel = `${accesspointName}-${bucketName.accountId}`;\n  validateDNSHostLabel(DNSHostLabel, { tlsCompatible });\n  const endpointRegion = useArnRegion ? bucketName.region : clientRegion;\n  const signingRegion = useArnRegion ? bucketName.region : clientSigningRegion;\n  validateOutpostService(bucketName.service);\n  validateDNSHostLabel(outpostId, { tlsCompatible });\n  validateNoDualstack(dualstackEndpoint);\n  validateNoFIPS(fipsEndpoint);\n  const hostnamePrefix = `${DNSHostLabel}.${outpostId}`;\n  return {\n    bucketEndpoint: true,\n    hostname: `${hostnamePrefix}${isCustomEndpoint ? \"\" : `.s3-outposts.${endpointRegion}`}.${hostnameSuffix}`,\n    signingRegion,\n    signingService: \"s3-outposts\"\n  };\n}, \"getEndpointFromOutpostArn\");\nvar getEndpointFromAccessPointArn = /* @__PURE__ */ __name(({\n  useArnRegion,\n  clientRegion,\n  clientSigningRegion = clientRegion,\n  bucketName,\n  dualstackEndpoint = false,\n  fipsEndpoint = false,\n  tlsCompatible = true,\n  accesspointName,\n  isCustomEndpoint,\n  hostnameSuffix\n}) => {\n  validateRegionalClient(clientRegion);\n  validateRegion(bucketName.region, {\n    useArnRegion,\n    clientRegion,\n    clientSigningRegion,\n    allowFipsRegion: true,\n    useFipsEndpoint: fipsEndpoint\n  });\n  const hostnamePrefix = `${accesspointName}-${bucketName.accountId}`;\n  validateDNSHostLabel(hostnamePrefix, { tlsCompatible });\n  const endpointRegion = useArnRegion ? bucketName.region : clientRegion;\n  const signingRegion = useArnRegion ? bucketName.region : clientSigningRegion;\n  validateS3Service(bucketName.service);\n  return {\n    bucketEndpoint: true,\n    hostname: `${hostnamePrefix}${isCustomEndpoint ? \"\" : `.s3-accesspoint${fipsEndpoint ? \"-fips\" : \"\"}${dualstackEndpoint ? \".dualstack\" : \"\"}.${endpointRegion}`}.${hostnameSuffix}`,\n    signingRegion\n  };\n}, \"getEndpointFromAccessPointArn\");\n\n// src/bucketEndpointMiddleware.ts\nvar bucketEndpointMiddleware = /* @__PURE__ */ __name((options) => (next, context) => async (args) => {\n  const { Bucket: bucketName } = args.input;\n  let replaceBucketInPath = options.bucketEndpoint;\n  const request = args.request;\n  if (import_protocol_http.HttpRequest.isInstance(request)) {\n    if (options.bucketEndpoint) {\n      request.hostname = bucketName;\n    } else if ((0, import_util_arn_parser.validate)(bucketName)) {\n      const bucketArn = (0, import_util_arn_parser.parse)(bucketName);\n      const clientRegion = await options.region();\n      const useDualstackEndpoint = await options.useDualstackEndpoint();\n      const useFipsEndpoint = await options.useFipsEndpoint();\n      const { partition, signingRegion = clientRegion } = await options.regionInfoProvider(clientRegion, { useDualstackEndpoint, useFipsEndpoint }) || {};\n      const useArnRegion = await options.useArnRegion();\n      const {\n        hostname,\n        bucketEndpoint,\n        signingRegion: modifiedSigningRegion,\n        signingService\n      } = bucketHostname({\n        bucketName: bucketArn,\n        baseHostname: request.hostname,\n        accelerateEndpoint: options.useAccelerateEndpoint,\n        dualstackEndpoint: useDualstackEndpoint,\n        fipsEndpoint: useFipsEndpoint,\n        pathStyleEndpoint: options.forcePathStyle,\n        tlsCompatible: request.protocol === \"https:\",\n        useArnRegion,\n        clientPartition: partition,\n        clientSigningRegion: signingRegion,\n        clientRegion,\n        isCustomEndpoint: options.isCustomEndpoint,\n        disableMultiregionAccessPoints: await options.disableMultiregionAccessPoints()\n      });\n      if (modifiedSigningRegion && modifiedSigningRegion !== signingRegion) {\n        context[\"signing_region\"] = modifiedSigningRegion;\n      }\n      if (signingService && signingService !== \"s3\") {\n        context[\"signing_service\"] = signingService;\n      }\n      request.hostname = hostname;\n      replaceBucketInPath = bucketEndpoint;\n    } else {\n      const clientRegion = await options.region();\n      const dualstackEndpoint = await options.useDualstackEndpoint();\n      const fipsEndpoint = await options.useFipsEndpoint();\n      const { hostname, bucketEndpoint } = bucketHostname({\n        bucketName,\n        clientRegion,\n        baseHostname: request.hostname,\n        accelerateEndpoint: options.useAccelerateEndpoint,\n        dualstackEndpoint,\n        fipsEndpoint,\n        pathStyleEndpoint: options.forcePathStyle,\n        tlsCompatible: request.protocol === \"https:\",\n        isCustomEndpoint: options.isCustomEndpoint\n      });\n      request.hostname = hostname;\n      replaceBucketInPath = bucketEndpoint;\n    }\n    if (replaceBucketInPath) {\n      request.path = request.path.replace(/^(\\/)?[^\\/]+/, \"\");\n      if (request.path === \"\") {\n        request.path = \"/\";\n      }\n    }\n  }\n  return next({ ...args, request });\n}, \"bucketEndpointMiddleware\");\nvar bucketEndpointMiddlewareOptions = {\n  tags: [\"BUCKET_ENDPOINT\"],\n  name: \"bucketEndpointMiddleware\",\n  relation: \"before\",\n  toMiddleware: \"hostHeaderMiddleware\",\n  override: true\n};\nvar getBucketEndpointPlugin = /* @__PURE__ */ __name((options) => ({\n  applyToStack: (clientStack) => {\n    clientStack.addRelativeTo(bucketEndpointMiddleware(options), bucketEndpointMiddlewareOptions);\n  }\n}), \"getBucketEndpointPlugin\");\n\n// src/configurations.ts\nfunction resolveBucketEndpointConfig(input) {\n  const {\n    bucketEndpoint = false,\n    forcePathStyle = false,\n    useAccelerateEndpoint = false,\n    useArnRegion = false,\n    disableMultiregionAccessPoints = false\n  } = input;\n  return {\n    ...input,\n    bucketEndpoint,\n    forcePathStyle,\n    useAccelerateEndpoint,\n    useArnRegion: typeof useArnRegion === \"function\" ? useArnRegion : () => Promise.resolve(useArnRegion),\n    disableMultiregionAccessPoints: typeof disableMultiregionAccessPoints === \"function\" ? disableMultiregionAccessPoints : () => Promise.resolve(disableMultiregionAccessPoints)\n  };\n}\n__name(resolveBucketEndpointConfig, \"resolveBucketEndpointConfig\");\n// Annotate the CommonJS export names for ESM import in node:\n\n0 && (0);\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzLy5wbnBtL0Bhd3Mtc2RrK21pZGRsZXdhcmUtYnVja2V0LWVuZHBvaW50QDMuNzE0LjAvbm9kZV9tb2R1bGVzL0Bhd3Mtc2RrL21pZGRsZXdhcmUtYnVja2V0LWVuZHBvaW50L2Rpc3QtY2pzL2luZGV4LmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0REFBNEQsMkJBQTJCO0FBQ3ZGO0FBQ0E7QUFDQSw4QkFBOEIsa0NBQWtDO0FBQ2hFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2QkFBNkIsNEZBQTRGO0FBQ3pIO0FBQ0E7QUFDQTtBQUNBLG9EQUFvRCxrQkFBa0IsYUFBYTs7QUFFbkY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDs7QUFFQTtBQUNBLGtDQUFrQyxtQkFBTyxDQUFDLHdLQUE4QjtBQUN4RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLDZCQUE2QixtQkFBTyxDQUFDLDhKQUEwQjtBQUMvRCwyQkFBMkIsbUJBQU8sQ0FBQyxtSkFBdUI7O0FBRTFEO0FBQ0EsNENBQTRDLEtBQUs7QUFDakQsa0NBQWtDLEVBQUU7QUFDcEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0RBQW9ELFNBQVM7QUFDN0QsQ0FBQztBQUNEO0FBQ0EsdUlBQXVJLHFCQUFxQjtBQUM1SjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7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MkI7QUFDekM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLGtCQUFrQjtBQUNsQyxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7O0FBRUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLE1BQU0sQ0FxQkwiLCJzb3VyY2VzIjpbIi9Vc2Vycy9lcmluamVycmkvbm9kZV9tb2R1bGVzLy5wbnBtL0Bhd3Mtc2RrK21pZGRsZXdhcmUtYnVja2V0LWVuZHBvaW50QDMuNzE0LjAvbm9kZV9tb2R1bGVzL0Bhd3Mtc2RrL21pZGRsZXdhcmUtYnVja2V0LWVuZHBvaW50L2Rpc3QtY2pzL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xudmFyIF9fZGVmUHJvcCA9IE9iamVjdC5kZWZpbmVQcm9wZXJ0eTtcbnZhciBfX2dldE93blByb3BEZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcjtcbnZhciBfX2dldE93blByb3BOYW1lcyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzO1xudmFyIF9faGFzT3duUHJvcCA9IE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHk7XG52YXIgX19uYW1lID0gKHRhcmdldCwgdmFsdWUpID0+IF9fZGVmUHJvcCh0YXJnZXQsIFwibmFtZVwiLCB7IHZhbHVlLCBjb25maWd1cmFibGU6IHRydWUgfSk7XG52YXIgX19leHBvcnQgPSAodGFyZ2V0LCBhbGwpID0+IHtcbiAgZm9yICh2YXIgbmFtZSBpbiBhbGwpXG4gICAgX19kZWZQcm9wKHRhcmdldCwgbmFtZSwgeyBnZXQ6IGFsbFtuYW1lXSwgZW51bWVyYWJsZTogdHJ1ZSB9KTtcbn07XG52YXIgX19jb3B5UHJvcHMgPSAodG8sIGZyb20sIGV4Y2VwdCwgZGVzYykgPT4ge1xuICBpZiAoZnJvbSAmJiB0eXBlb2YgZnJvbSA9PT0gXCJvYmplY3RcIiB8fCB0eXBlb2YgZnJvbSA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgZm9yIChsZXQga2V5IG9mIF9fZ2V0T3duUHJvcE5hbWVzKGZyb20pKVxuICAgICAgaWYgKCFfX2hhc093blByb3AuY2FsbCh0bywga2V5KSAmJiBrZXkgIT09IGV4Y2VwdClcbiAgICAgICAgX19kZWZQcm9wKHRvLCBrZXksIHsgZ2V0OiAoKSA9PiBmcm9tW2tleV0sIGVudW1lcmFibGU6ICEoZGVzYyA9IF9fZ2V0T3duUHJvcERlc2MoZnJvbSwga2V5KSkgfHwgZGVzYy5lbnVtZXJhYmxlIH0pO1xuICB9XG4gIHJldHVybiB0bztcbn07XG52YXIgX190b0NvbW1vbkpTID0gKG1vZCkgPT4gX19jb3B5UHJvcHMoX19kZWZQcm9wKHt9LCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KSwgbW9kKTtcblxuLy8gc3JjL2luZGV4LnRzXG52YXIgc3JjX2V4cG9ydHMgPSB7fTtcbl9fZXhwb3J0KHNyY19leHBvcnRzLCB7XG4gIE5PREVfRElTQUJMRV9NVUxUSVJFR0lPTl9BQ0NFU1NfUE9JTlRfQ09ORklHX09QVElPTlM6ICgpID0+IE5PREVfRElTQUJMRV9NVUxUSVJFR0lPTl9BQ0NFU1NfUE9JTlRfQ09ORklHX09QVElPTlMsXG4gIE5PREVfRElTQUJMRV9NVUxUSVJFR0lPTl9BQ0NFU1NfUE9JTlRfRU5WX05BTUU6ICgpID0+IE5PREVfRElTQUJMRV9NVUxUSVJFR0lPTl9BQ0NFU1NfUE9JTlRfRU5WX05BTUUsXG4gIE5PREVfRElTQUJMRV9NVUxUSVJFR0lPTl9BQ0NFU1NfUE9JTlRfSU5JX05BTUU6ICgpID0+IE5PREVfRElTQUJMRV9NVUxUSVJFR0lPTl9BQ0NFU1NfUE9JTlRfSU5JX05BTUUsXG4gIE5PREVfVVNFX0FSTl9SRUdJT05fQ09ORklHX09QVElPTlM6ICgpID0+IE5PREVfVVNFX0FSTl9SRUdJT05fQ09ORklHX09QVElPTlMsXG4gIE5PREVfVVNFX0FSTl9SRUdJT05fRU5WX05BTUU6ICgpID0+IE5PREVfVVNFX0FSTl9SRUdJT05fRU5WX05BTUUsXG4gIE5PREVfVVNFX0FSTl9SRUdJT05fSU5JX05BTUU6ICgpID0+IE5PREVfVVNFX0FSTl9SRUdJT05fSU5JX05BTUUsXG4gIGJ1Y2tldEVuZHBvaW50TWlkZGxld2FyZTogKCkgPT4gYnVja2V0RW5kcG9pbnRNaWRkbGV3YXJlLFxuICBidWNrZXRFbmRwb2ludE1pZGRsZXdhcmVPcHRpb25zOiAoKSA9PiBidWNrZXRFbmRwb2ludE1pZGRsZXdhcmVPcHRpb25zLFxuICBidWNrZXRIb3N0bmFtZTogKCkgPT4gYnVja2V0SG9zdG5hbWUsXG4gIGdldEFyblJlc291cmNlczogKCkgPT4gZ2V0QXJuUmVzb3VyY2VzLFxuICBnZXRCdWNrZXRFbmRwb2ludFBsdWdpbjogKCkgPT4gZ2V0QnVja2V0RW5kcG9pbnRQbHVnaW4sXG4gIGdldFN1ZmZpeEZvckFybkVuZHBvaW50OiAoKSA9PiBnZXRTdWZmaXhGb3JBcm5FbmRwb2ludCxcbiAgcmVzb2x2ZUJ1Y2tldEVuZHBvaW50Q29uZmlnOiAoKSA9PiByZXNvbHZlQnVja2V0RW5kcG9pbnRDb25maWcsXG4gIHZhbGlkYXRlQWNjb3VudElkOiAoKSA9PiB2YWxpZGF0ZUFjY291bnRJZCxcbiAgdmFsaWRhdGVETlNIb3N0TGFiZWw6ICgpID0+IHZhbGlkYXRlRE5TSG9zdExhYmVsLFxuICB2YWxpZGF0ZU5vRHVhbHN0YWNrOiAoKSA9PiB2YWxpZGF0ZU5vRHVhbHN0YWNrLFxuICB2YWxpZGF0ZU5vRklQUzogKCkgPT4gdmFsaWRhdGVOb0ZJUFMsXG4gIHZhbGlkYXRlT3V0cG9zdFNlcnZpY2U6ICgpID0+IHZhbGlkYXRlT3V0cG9zdFNlcnZpY2UsXG4gIHZhbGlkYXRlUGFydGl0aW9uOiAoKSA9PiB2YWxpZGF0ZVBhcnRpdGlvbixcbiAgdmFsaWRhdGVSZWdpb246ICgpID0+IHZhbGlkYXRlUmVnaW9uXG59KTtcbm1vZHVsZS5leHBvcnRzID0gX190b0NvbW1vbkpTKHNyY19leHBvcnRzKTtcblxuLy8gc3JjL05vZGVEaXNhYmxlTXVsdGlyZWdpb25BY2Nlc3NQb2ludENvbmZpZ09wdGlvbnMudHNcbnZhciBpbXBvcnRfdXRpbF9jb25maWdfcHJvdmlkZXIgPSByZXF1aXJlKFwiQHNtaXRoeS91dGlsLWNvbmZpZy1wcm92aWRlclwiKTtcbnZhciBOT0RFX0RJU0FCTEVfTVVMVElSRUdJT05fQUNDRVNTX1BPSU5UX0VOVl9OQU1FID0gXCJBV1NfUzNfRElTQUJMRV9NVUxUSVJFR0lPTl9BQ0NFU1NfUE9JTlRTXCI7XG52YXIgTk9ERV9ESVNBQkxFX01VTFRJUkVHSU9OX0FDQ0VTU19QT0lOVF9JTklfTkFNRSA9IFwiczNfZGlzYWJsZV9tdWx0aXJlZ2lvbl9hY2Nlc3NfcG9pbnRzXCI7XG52YXIgTk9ERV9ESVNBQkxFX01VTFRJUkVHSU9OX0FDQ0VTU19QT0lOVF9DT05GSUdfT1BUSU9OUyA9IHtcbiAgZW52aXJvbm1lbnRWYXJpYWJsZVNlbGVjdG9yOiAoZW52KSA9PiAoMCwgaW1wb3J0X3V0aWxfY29uZmlnX3Byb3ZpZGVyLmJvb2xlYW5TZWxlY3RvcikoZW52LCBOT0RFX0RJU0FCTEVfTVVMVElSRUdJT05fQUNDRVNTX1BPSU5UX0VOVl9OQU1FLCBpbXBvcnRfdXRpbF9jb25maWdfcHJvdmlkZXIuU2VsZWN0b3JUeXBlLkVOViksXG4gIGNvbmZpZ0ZpbGVTZWxlY3RvcjogKHByb2ZpbGUpID0+ICgwLCBpbXBvcnRfdXRpbF9jb25maWdfcHJvdmlkZXIuYm9vbGVhblNlbGVjdG9yKShwcm9maWxlLCBOT0RFX0RJU0FCTEVfTVVMVElSRUdJT05fQUNDRVNTX1BPSU5UX0lOSV9OQU1FLCBpbXBvcnRfdXRpbF9jb25maWdfcHJvdmlkZXIuU2VsZWN0b3JUeXBlLkNPTkZJRyksXG4gIGRlZmF1bHQ6IGZhbHNlXG59O1xuXG4vLyBzcmMvTm9kZVVzZUFyblJlZ2lvbkNvbmZpZ09wdGlvbnMudHNcblxudmFyIE5PREVfVVNFX0FSTl9SRUdJT05fRU5WX05BTUUgPSBcIkFXU19TM19VU0VfQVJOX1JFR0lPTlwiO1xudmFyIE5PREVfVVNFX0FSTl9SRUdJT05fSU5JX05BTUUgPSBcInMzX3VzZV9hcm5fcmVnaW9uXCI7XG52YXIgTk9ERV9VU0VfQVJOX1JFR0lPTl9DT05GSUdfT1BUSU9OUyA9IHtcbiAgZW52aXJvbm1lbnRWYXJpYWJsZVNlbGVjdG9yOiAoZW52KSA9PiAoMCwgaW1wb3J0X3V0aWxfY29uZmlnX3Byb3ZpZGVyLmJvb2xlYW5TZWxlY3RvcikoZW52LCBOT0RFX1VTRV9BUk5fUkVHSU9OX0VOVl9OQU1FLCBpbXBvcnRfdXRpbF9jb25maWdfcHJvdmlkZXIuU2VsZWN0b3JUeXBlLkVOViksXG4gIGNvbmZpZ0ZpbGVTZWxlY3RvcjogKHByb2ZpbGUpID0+ICgwLCBpbXBvcnRfdXRpbF9jb25maWdfcHJvdmlkZXIuYm9vbGVhblNlbGVjdG9yKShwcm9maWxlLCBOT0RFX1VTRV9BUk5fUkVHSU9OX0lOSV9OQU1FLCBpbXBvcnRfdXRpbF9jb25maWdfcHJvdmlkZXIuU2VsZWN0b3JUeXBlLkNPTkZJRyksXG4gIGRlZmF1bHQ6IGZhbHNlXG59O1xuXG4vLyBzcmMvYnVja2V0RW5kcG9pbnRNaWRkbGV3YXJlLnRzXG52YXIgaW1wb3J0X3V0aWxfYXJuX3BhcnNlciA9IHJlcXVpcmUoXCJAYXdzLXNkay91dGlsLWFybi1wYXJzZXJcIik7XG52YXIgaW1wb3J0X3Byb3RvY29sX2h0dHAgPSByZXF1aXJlKFwiQHNtaXRoeS9wcm90b2NvbC1odHRwXCIpO1xuXG4vLyBzcmMvYnVja2V0SG9zdG5hbWVVdGlscy50c1xudmFyIERPTUFJTl9QQVRURVJOID0gL15bYS16MC05XVthLXowLTlcXC5cXC1dezEsNjF9W2EtejAtOV0kLztcbnZhciBJUF9BRERSRVNTX1BBVFRFUk4gPSAvKFxcZCtcXC4pezN9XFxkKy87XG52YXIgRE9UU19QQVRURVJOID0gL1xcLlxcLi87XG52YXIgRE9UX1BBVFRFUk4gPSAvXFwuLztcbnZhciBTM19IT1NUTkFNRV9QQVRURVJOID0gL14oLitcXC4pP3MzKC1maXBzKT8oXFwuZHVhbHN0YWNrKT9bLi1dKFthLXowLTktXSspXFwuLztcbnZhciBTM19VU19FQVNUXzFfQUxUTkFNRV9QQVRURVJOID0gL15zMygtZXh0ZXJuYWwtMSk/XFwuYW1hem9uYXdzXFwuY29tJC87XG52YXIgQVdTX1BBUlRJVElPTl9TVUZGSVggPSBcImFtYXpvbmF3cy5jb21cIjtcbnZhciBpc0J1Y2tldE5hbWVPcHRpb25zID0gLyogQF9fUFVSRV9fICovIF9fbmFtZSgob3B0aW9ucykgPT4gdHlwZW9mIG9wdGlvbnMuYnVja2V0TmFtZSA9PT0gXCJzdHJpbmdcIiwgXCJpc0J1Y2tldE5hbWVPcHRpb25zXCIpO1xudmFyIGlzRG5zQ29tcGF0aWJsZUJ1Y2tldE5hbWUgPSAvKiBAX19QVVJFX18gKi8gX19uYW1lKChidWNrZXROYW1lKSA9PiBET01BSU5fUEFUVEVSTi50ZXN0KGJ1Y2tldE5hbWUpICYmICFJUF9BRERSRVNTX1BBVFRFUk4udGVzdChidWNrZXROYW1lKSAmJiAhRE9UU19QQVRURVJOLnRlc3QoYnVja2V0TmFtZSksIFwiaXNEbnNDb21wYXRpYmxlQnVja2V0TmFtZVwiKTtcbnZhciBnZXRSZWdpb25hbFN1ZmZpeCA9IC8qIEBfX1BVUkVfXyAqLyBfX25hbWUoKGhvc3RuYW1lKSA9PiB7XG4gIGNvbnN0IHBhcnRzID0gaG9zdG5hbWUubWF0Y2goUzNfSE9TVE5BTUVfUEFUVEVSTik7XG4gIHJldHVybiBbcGFydHNbNF0sIGhvc3RuYW1lLnJlcGxhY2UobmV3IFJlZ0V4cChgXiR7cGFydHNbMF19YCksIFwiXCIpXTtcbn0sIFwiZ2V0UmVnaW9uYWxTdWZmaXhcIik7XG52YXIgZ2V0U3VmZml4ID0gLyogQF9fUFVSRV9fICovIF9fbmFtZSgoaG9zdG5hbWUpID0+IFMzX1VTX0VBU1RfMV9BTFROQU1FX1BBVFRFUk4udGVzdChob3N0bmFtZSkgPyBbXCJ1cy1lYXN0LTFcIiwgQVdTX1BBUlRJVElPTl9TVUZGSVhdIDogZ2V0UmVnaW9uYWxTdWZmaXgoaG9zdG5hbWUpLCBcImdldFN1ZmZpeFwiKTtcbnZhciBnZXRTdWZmaXhGb3JBcm5FbmRwb2ludCA9IC8qIEBfX1BVUkVfXyAqLyBfX25hbWUoKGhvc3RuYW1lKSA9PiBTM19VU19FQVNUXzFfQUxUTkFNRV9QQVRURVJOLnRlc3QoaG9zdG5hbWUpID8gW2hvc3RuYW1lLnJlcGxhY2UoYC4ke0FXU19QQVJUSVRJT05fU1VGRklYfWAsIFwiXCIpLCBBV1NfUEFSVElUSU9OX1NVRkZJWF0gOiBnZXRSZWdpb25hbFN1ZmZpeChob3N0bmFtZSksIFwiZ2V0U3VmZml4Rm9yQXJuRW5kcG9pbnRcIik7XG52YXIgdmFsaWRhdGVBcm5FbmRwb2ludE9wdGlvbnMgPSAvKiBAX19QVVJFX18gKi8gX19uYW1lKChvcHRpb25zKSA9PiB7XG4gIGlmIChvcHRpb25zLnBhdGhTdHlsZUVuZHBvaW50KSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiUGF0aC1zdHlsZSBTMyBlbmRwb2ludCBpcyBub3Qgc3VwcG9ydGVkIHdoZW4gYnVja2V0IGlzIGFuIEFSTlwiKTtcbiAgfVxuICBpZiAob3B0aW9ucy5hY2NlbGVyYXRlRW5kcG9pbnQpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJBY2NlbGVyYXRlIGVuZHBvaW50IGlzIG5vdCBzdXBwb3J0ZWQgd2hlbiBidWNrZXQgaXMgYW4gQVJOXCIpO1xuICB9XG4gIGlmICghb3B0aW9ucy50bHNDb21wYXRpYmxlKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiSFRUUFMgaXMgcmVxdWlyZWQgd2hlbiBidWNrZXQgaXMgYW4gQVJOXCIpO1xuICB9XG59LCBcInZhbGlkYXRlQXJuRW5kcG9pbnRPcHRpb25zXCIpO1xudmFyIHZhbGlkYXRlU2VydmljZSA9IC8qIEBfX1BVUkVfXyAqLyBfX25hbWUoKHNlcnZpY2UpID0+IHtcbiAgaWYgKHNlcnZpY2UgIT09IFwiczNcIiAmJiBzZXJ2aWNlICE9PSBcInMzLW91dHBvc3RzXCIgJiYgc2VydmljZSAhPT0gXCJzMy1vYmplY3QtbGFtYmRhXCIpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJFeHBlY3QgJ3MzJyBvciAnczMtb3V0cG9zdHMnIG9yICdzMy1vYmplY3QtbGFtYmRhJyBpbiBBUk4gc2VydmljZSBjb21wb25lbnRcIik7XG4gIH1cbn0sIFwidmFsaWRhdGVTZXJ2aWNlXCIpO1xudmFyIHZhbGlkYXRlUzNTZXJ2aWNlID0gLyogQF9fUFVSRV9fICovIF9fbmFtZSgoc2VydmljZSkgPT4ge1xuICBpZiAoc2VydmljZSAhPT0gXCJzM1wiKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiRXhwZWN0ICdzMycgaW4gQWNjZXNzcG9pbnQgQVJOIHNlcnZpY2UgY29tcG9uZW50XCIpO1xuICB9XG59LCBcInZhbGlkYXRlUzNTZXJ2aWNlXCIpO1xudmFyIHZhbGlkYXRlT3V0cG9zdFNlcnZpY2UgPSAvKiBAX19QVVJFX18gKi8gX19uYW1lKChzZXJ2aWNlKSA9PiB7XG4gIGlmIChzZXJ2aWNlICE9PSBcInMzLW91dHBvc3RzXCIpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJFeHBlY3QgJ3MzLXBvc3RzJyBpbiBPdXRwb3N0IEFSTiBzZXJ2aWNlIGNvbXBvbmVudFwiKTtcbiAgfVxufSwgXCJ2YWxpZGF0ZU91dHBvc3RTZXJ2aWNlXCIpO1xudmFyIHZhbGlkYXRlUGFydGl0aW9uID0gLyogQF9fUFVSRV9fICovIF9fbmFtZSgocGFydGl0aW9uLCBvcHRpb25zKSA9PiB7XG4gIGlmIChwYXJ0aXRpb24gIT09IG9wdGlvbnMuY2xpZW50UGFydGl0aW9uKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGBQYXJ0aXRpb24gaW4gQVJOIGlzIGluY29tcGF0aWJsZSwgZ290IFwiJHtwYXJ0aXRpb259XCIgYnV0IGV4cGVjdGVkIFwiJHtvcHRpb25zLmNsaWVudFBhcnRpdGlvbn1cImApO1xuICB9XG59LCBcInZhbGlkYXRlUGFydGl0aW9uXCIpO1xudmFyIHZhbGlkYXRlUmVnaW9uID0gLyogQF9fUFVSRV9fICovIF9fbmFtZSgocmVnaW9uLCBvcHRpb25zKSA9PiB7XG4gIGlmIChyZWdpb24gPT09IFwiXCIpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJBUk4gcmVnaW9uIGlzIGVtcHR5XCIpO1xuICB9XG4gIGlmIChvcHRpb25zLnVzZUZpcHNFbmRwb2ludCkge1xuICAgIGlmICghb3B0aW9ucy5hbGxvd0ZpcHNSZWdpb24pIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkZJUFMgcmVnaW9uIGlzIG5vdCBzdXBwb3J0ZWRcIik7XG4gICAgfSBlbHNlIGlmICghaXNFcXVhbFJlZ2lvbnMocmVnaW9uLCBvcHRpb25zLmNsaWVudFJlZ2lvbikpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgQ2xpZW50IEZJUFMgcmVnaW9uICR7b3B0aW9ucy5jbGllbnRSZWdpb259IGRvZXNuJ3QgbWF0Y2ggcmVnaW9uICR7cmVnaW9ufSBpbiBBUk5gKTtcbiAgICB9XG4gIH1cbiAgaWYgKCFvcHRpb25zLnVzZUFyblJlZ2lvbiAmJiAhaXNFcXVhbFJlZ2lvbnMocmVnaW9uLCBvcHRpb25zLmNsaWVudFJlZ2lvbiB8fCBcIlwiKSAmJiAhaXNFcXVhbFJlZ2lvbnMocmVnaW9uLCBvcHRpb25zLmNsaWVudFNpZ25pbmdSZWdpb24gfHwgXCJcIikpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYFJlZ2lvbiBpbiBBUk4gaXMgaW5jb21wYXRpYmxlLCBnb3QgJHtyZWdpb259IGJ1dCBleHBlY3RlZCAke29wdGlvbnMuY2xpZW50UmVnaW9ufWApO1xuICB9XG59LCBcInZhbGlkYXRlUmVnaW9uXCIpO1xudmFyIHZhbGlkYXRlUmVnaW9uYWxDbGllbnQgPSAvKiBAX19QVVJFX18gKi8gX19uYW1lKChyZWdpb24pID0+IHtcbiAgaWYgKFtcInMzLWV4dGVybmFsLTFcIiwgXCJhd3MtZ2xvYmFsXCJdLmluY2x1ZGVzKHJlZ2lvbikpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYENsaWVudCByZWdpb24gJHtyZWdpb259IGlzIG5vdCByZWdpb25hbGApO1xuICB9XG59LCBcInZhbGlkYXRlUmVnaW9uYWxDbGllbnRcIik7XG52YXIgaXNFcXVhbFJlZ2lvbnMgPSAvKiBAX19QVVJFX18gKi8gX19uYW1lKChyZWdpb25BLCByZWdpb25CKSA9PiByZWdpb25BID09PSByZWdpb25CLCBcImlzRXF1YWxSZWdpb25zXCIpO1xudmFyIHZhbGlkYXRlQWNjb3VudElkID0gLyogQF9fUFVSRV9fICovIF9fbmFtZSgoYWNjb3VudElkKSA9PiB7XG4gIGlmICghL1swLTldezEyfS8uZXhlYyhhY2NvdW50SWQpKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiQWNjZXNzIHBvaW50IEFSTiBhY2NvdW50SUQgZG9lcyBub3QgbWF0Y2ggcmVnZXggJ1swLTldezEyfSdcIik7XG4gIH1cbn0sIFwidmFsaWRhdGVBY2NvdW50SWRcIik7XG52YXIgdmFsaWRhdGVETlNIb3N0TGFiZWwgPSAvKiBAX19QVVJFX18gKi8gX19uYW1lKChsYWJlbCwgb3B0aW9ucyA9IHsgdGxzQ29tcGF0aWJsZTogdHJ1ZSB9KSA9PiB7XG4gIGlmIChsYWJlbC5sZW5ndGggPj0gNjQgfHwgIS9eW2EtejAtOV1bYS16MC05Li1dKlthLXowLTldJC8udGVzdChsYWJlbCkgfHwgLyhcXGQrXFwuKXszfVxcZCsvLnRlc3QobGFiZWwpIHx8IC9bLi1dezJ9Ly50ZXN0KGxhYmVsKSB8fCAob3B0aW9ucyA9PSBudWxsID8gdm9pZCAwIDogb3B0aW9ucy50bHNDb21wYXRpYmxlKSAmJiBET1RfUEFUVEVSTi50ZXN0KGxhYmVsKSkge1xuICAgIHRocm93IG5ldyBFcnJvcihgSW52YWxpZCBETlMgbGFiZWwgJHtsYWJlbH1gKTtcbiAgfVxufSwgXCJ2YWxpZGF0ZUROU0hvc3RMYWJlbFwiKTtcbnZhciB2YWxpZGF0ZUN1c3RvbUVuZHBvaW50ID0gLyogQF9fUFVSRV9fICovIF9fbmFtZSgob3B0aW9ucykgPT4ge1xuICBpZiAob3B0aW9ucy5pc0N1c3RvbUVuZHBvaW50KSB7XG4gICAgaWYgKG9wdGlvbnMuZHVhbHN0YWNrRW5kcG9pbnQpXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJEdWFsc3RhY2sgZW5kcG9pbnQgaXMgbm90IHN1cHBvcnRlZCB3aXRoIGN1c3RvbSBlbmRwb2ludFwiKTtcbiAgICBpZiAob3B0aW9ucy5hY2NlbGVyYXRlRW5kcG9pbnQpXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJBY2NlbGVyYXRlIGVuZHBvaW50IGlzIG5vdCBzdXBwb3J0ZWQgd2l0aCBjdXN0b20gZW5kcG9pbnRcIik7XG4gIH1cbn0sIFwidmFsaWRhdGVDdXN0b21FbmRwb2ludFwiKTtcbnZhciBnZXRBcm5SZXNvdXJjZXMgPSAvKiBAX19QVVJFX18gKi8gX19uYW1lKChyZXNvdXJjZSkgPT4ge1xuICBjb25zdCBkZWxpbWl0ZXIgPSByZXNvdXJjZS5pbmNsdWRlcyhcIjpcIikgPyBcIjpcIiA6IFwiL1wiO1xuICBjb25zdCBbcmVzb3VyY2VUeXBlLCAuLi5yZXN0XSA9IHJlc291cmNlLnNwbGl0KGRlbGltaXRlcik7XG4gIGlmIChyZXNvdXJjZVR5cGUgPT09IFwiYWNjZXNzcG9pbnRcIikge1xuICAgIGlmIChyZXN0Lmxlbmd0aCAhPT0gMSB8fCByZXN0WzBdID09PSBcIlwiKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYEFjY2VzcyBQb2ludCBBUk4gc2hvdWxkIGhhdmUgb25lIHJlc291cmNlIGFjY2Vzc3BvaW50JHtkZWxpbWl0ZXJ9e2FjY2Vzc3BvaW50bmFtZX1gKTtcbiAgICB9XG4gICAgcmV0dXJuIHsgYWNjZXNzcG9pbnROYW1lOiByZXN0WzBdIH07XG4gIH0gZWxzZSBpZiAocmVzb3VyY2VUeXBlID09PSBcIm91dHBvc3RcIikge1xuICAgIGlmICghcmVzdFswXSB8fCByZXN0WzFdICE9PSBcImFjY2Vzc3BvaW50XCIgfHwgIXJlc3RbMl0gfHwgcmVzdC5sZW5ndGggIT09IDMpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgYE91dHBvc3QgQVJOIHNob3VsZCBoYXZlIHJlc291cmNlIG91dHBvc3Qke2RlbGltaXRlcn17b3V0cG9zdElkfSR7ZGVsaW1pdGVyfWFjY2Vzc3BvaW50JHtkZWxpbWl0ZXJ9e2FjY2Vzc3BvaW50TmFtZX1gXG4gICAgICApO1xuICAgIH1cbiAgICBjb25zdCBbb3V0cG9zdElkLCBfLCBhY2Nlc3Nwb2ludE5hbWVdID0gcmVzdDtcbiAgICByZXR1cm4geyBvdXRwb3N0SWQsIGFjY2Vzc3BvaW50TmFtZSB9O1xuICB9IGVsc2Uge1xuICAgIHRocm93IG5ldyBFcnJvcihgQVJOIHJlc291cmNlIHNob3VsZCBiZWdpbiB3aXRoICdhY2Nlc3Nwb2ludCR7ZGVsaW1pdGVyfScgb3IgJ291dHBvc3Qke2RlbGltaXRlcn0nYCk7XG4gIH1cbn0sIFwiZ2V0QXJuUmVzb3VyY2VzXCIpO1xudmFyIHZhbGlkYXRlTm9EdWFsc3RhY2sgPSAvKiBAX19QVVJFX18gKi8gX19uYW1lKChkdWFsc3RhY2tFbmRwb2ludCkgPT4ge1xuICBpZiAoZHVhbHN0YWNrRW5kcG9pbnQpXG4gICAgdGhyb3cgbmV3IEVycm9yKFwiRHVhbHN0YWNrIGVuZHBvaW50IGlzIG5vdCBzdXBwb3J0ZWQgd2l0aCBPdXRwb3N0IG9yIE11bHRpLXJlZ2lvbiBBY2Nlc3MgUG9pbnQgQVJOLlwiKTtcbn0sIFwidmFsaWRhdGVOb0R1YWxzdGFja1wiKTtcbnZhciB2YWxpZGF0ZU5vRklQUyA9IC8qIEBfX1BVUkVfXyAqLyBfX25hbWUoKHVzZUZpcHNFbmRwb2ludCkgPT4ge1xuICBpZiAodXNlRmlwc0VuZHBvaW50KVxuICAgIHRocm93IG5ldyBFcnJvcihgRklQUyByZWdpb24gaXMgbm90IHN1cHBvcnRlZCB3aXRoIE91dHBvc3QuYCk7XG59LCBcInZhbGlkYXRlTm9GSVBTXCIpO1xudmFyIHZhbGlkYXRlTXJhcEFsaWFzID0gLyogQF9fUFVSRV9fICovIF9fbmFtZSgobmFtZSkgPT4ge1xuICB0cnkge1xuICAgIG5hbWUuc3BsaXQoXCIuXCIpLmZvckVhY2goKGxhYmVsKSA9PiB7XG4gICAgICB2YWxpZGF0ZUROU0hvc3RMYWJlbChsYWJlbCk7XG4gICAgfSk7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYFwiJHtuYW1lfVwiIGlzIG5vdCBhIEROUyBjb21wYXRpYmxlIG5hbWUuYCk7XG4gIH1cbn0sIFwidmFsaWRhdGVNcmFwQWxpYXNcIik7XG5cbi8vIHNyYy9idWNrZXRIb3N0bmFtZS50c1xudmFyIGJ1Y2tldEhvc3RuYW1lID0gLyogQF9fUFVSRV9fICovIF9fbmFtZSgob3B0aW9ucykgPT4ge1xuICB2YWxpZGF0ZUN1c3RvbUVuZHBvaW50KG9wdGlvbnMpO1xuICByZXR1cm4gaXNCdWNrZXROYW1lT3B0aW9ucyhvcHRpb25zKSA/IChcbiAgICAvLyBDb25zdHJ1Y3QgZW5kcG9pbnQgd2hlbiBidWNrZXROYW1lIGlzIGEgc3RyaW5nIHJlZmVycmluZyB0byBhIGJ1Y2tldCBuYW1lXG4gICAgZ2V0RW5kcG9pbnRGcm9tQnVja2V0TmFtZShvcHRpb25zKVxuICApIDogKFxuICAgIC8vIENvbnN0cnVjdCBlbmRwb2ludCB3aGVuIGJ1Y2tldE5hbWUgaXMgYW4gQVJOIHJlZmVycmluZyB0byBhbiBTMyByZXNvdXJjZSBsaWtlIEFjY2VzcyBQb2ludFxuICAgIGdldEVuZHBvaW50RnJvbUFybihvcHRpb25zKVxuICApO1xufSwgXCJidWNrZXRIb3N0bmFtZVwiKTtcbnZhciBnZXRFbmRwb2ludEZyb21CdWNrZXROYW1lID0gLyogQF9fUFVSRV9fICovIF9fbmFtZSgoe1xuICBhY2NlbGVyYXRlRW5kcG9pbnQgPSBmYWxzZSxcbiAgY2xpZW50UmVnaW9uOiByZWdpb24sXG4gIGJhc2VIb3N0bmFtZSxcbiAgYnVja2V0TmFtZSxcbiAgZHVhbHN0YWNrRW5kcG9pbnQgPSBmYWxzZSxcbiAgZmlwc0VuZHBvaW50ID0gZmFsc2UsXG4gIHBhdGhTdHlsZUVuZHBvaW50ID0gZmFsc2UsXG4gIHRsc0NvbXBhdGlibGUgPSB0cnVlLFxuICBpc0N1c3RvbUVuZHBvaW50ID0gZmFsc2Vcbn0pID0+IHtcbiAgY29uc3QgW2NsaWVudFJlZ2lvbiwgaG9zdG5hbWVTdWZmaXhdID0gaXNDdXN0b21FbmRwb2ludCA/IFtyZWdpb24sIGJhc2VIb3N0bmFtZV0gOiBnZXRTdWZmaXgoYmFzZUhvc3RuYW1lKTtcbiAgaWYgKHBhdGhTdHlsZUVuZHBvaW50IHx8ICFpc0Ruc0NvbXBhdGlibGVCdWNrZXROYW1lKGJ1Y2tldE5hbWUpIHx8IHRsc0NvbXBhdGlibGUgJiYgRE9UX1BBVFRFUk4udGVzdChidWNrZXROYW1lKSkge1xuICAgIHJldHVybiB7XG4gICAgICBidWNrZXRFbmRwb2ludDogZmFsc2UsXG4gICAgICBob3N0bmFtZTogZHVhbHN0YWNrRW5kcG9pbnQgPyBgczMuZHVhbHN0YWNrLiR7Y2xpZW50UmVnaW9ufS4ke2hvc3RuYW1lU3VmZml4fWAgOiBiYXNlSG9zdG5hbWVcbiAgICB9O1xuICB9XG4gIGlmIChhY2NlbGVyYXRlRW5kcG9pbnQpIHtcbiAgICBiYXNlSG9zdG5hbWUgPSBgczMtYWNjZWxlcmF0ZSR7ZHVhbHN0YWNrRW5kcG9pbnQgPyBcIi5kdWFsc3RhY2tcIiA6IFwiXCJ9LiR7aG9zdG5hbWVTdWZmaXh9YDtcbiAgfSBlbHNlIGlmIChkdWFsc3RhY2tFbmRwb2ludCkge1xuICAgIGJhc2VIb3N0bmFtZSA9IGBzMy5kdWFsc3RhY2suJHtjbGllbnRSZWdpb259LiR7aG9zdG5hbWVTdWZmaXh9YDtcbiAgfVxuICByZXR1cm4ge1xuICAgIGJ1Y2tldEVuZHBvaW50OiB0cnVlLFxuICAgIGhvc3RuYW1lOiBgJHtidWNrZXROYW1lfS4ke2Jhc2VIb3N0bmFtZX1gXG4gIH07XG59LCBcImdldEVuZHBvaW50RnJvbUJ1Y2tldE5hbWVcIik7XG52YXIgZ2V0RW5kcG9pbnRGcm9tQXJuID0gLyogQF9fUFVSRV9fICovIF9fbmFtZSgob3B0aW9ucykgPT4ge1xuICBjb25zdCB7IGlzQ3VzdG9tRW5kcG9pbnQsIGJhc2VIb3N0bmFtZSwgY2xpZW50UmVnaW9uIH0gPSBvcHRpb25zO1xuICBjb25zdCBob3N0bmFtZVN1ZmZpeCA9IGlzQ3VzdG9tRW5kcG9pbnQgPyBiYXNlSG9zdG5hbWUgOiBnZXRTdWZmaXhGb3JBcm5FbmRwb2ludChiYXNlSG9zdG5hbWUpWzFdO1xuICBjb25zdCB7XG4gICAgcGF0aFN0eWxlRW5kcG9pbnQsXG4gICAgYWNjZWxlcmF0ZUVuZHBvaW50ID0gZmFsc2UsXG4gICAgZmlwc0VuZHBvaW50ID0gZmFsc2UsXG4gICAgdGxzQ29tcGF0aWJsZSA9IHRydWUsXG4gICAgYnVja2V0TmFtZSxcbiAgICBjbGllbnRQYXJ0aXRpb24gPSBcImF3c1wiXG4gIH0gPSBvcHRpb25zO1xuICB2YWxpZGF0ZUFybkVuZHBvaW50T3B0aW9ucyh7IHBhdGhTdHlsZUVuZHBvaW50LCBhY2NlbGVyYXRlRW5kcG9pbnQsIHRsc0NvbXBhdGlibGUgfSk7XG4gIGNvbnN0IHsgc2VydmljZSwgcGFydGl0aW9uLCBhY2NvdW50SWQsIHJlZ2lvbiwgcmVzb3VyY2UgfSA9IGJ1Y2tldE5hbWU7XG4gIHZhbGlkYXRlU2VydmljZShzZXJ2aWNlKTtcbiAgdmFsaWRhdGVQYXJ0aXRpb24ocGFydGl0aW9uLCB7IGNsaWVudFBhcnRpdGlvbiB9KTtcbiAgdmFsaWRhdGVBY2NvdW50SWQoYWNjb3VudElkKTtcbiAgY29uc3QgeyBhY2Nlc3Nwb2ludE5hbWUsIG91dHBvc3RJZCB9ID0gZ2V0QXJuUmVzb3VyY2VzKHJlc291cmNlKTtcbiAgaWYgKHNlcnZpY2UgPT09IFwiczMtb2JqZWN0LWxhbWJkYVwiKSB7XG4gICAgcmV0dXJuIGdldEVuZHBvaW50RnJvbU9iamVjdExhbWJkYUFybih7IC4uLm9wdGlvbnMsIHRsc0NvbXBhdGlibGUsIGJ1Y2tldE5hbWUsIGFjY2Vzc3BvaW50TmFtZSwgaG9zdG5hbWVTdWZmaXggfSk7XG4gIH1cbiAgaWYgKHJlZ2lvbiA9PT0gXCJcIikge1xuICAgIHJldHVybiBnZXRFbmRwb2ludEZyb21NUkFQQXJuKHsgLi4ub3B0aW9ucywgY2xpZW50UmVnaW9uLCBtcmFwQWxpYXM6IGFjY2Vzc3BvaW50TmFtZSwgaG9zdG5hbWVTdWZmaXggfSk7XG4gIH1cbiAgaWYgKG91dHBvc3RJZCkge1xuICAgIHJldHVybiBnZXRFbmRwb2ludEZyb21PdXRwb3N0QXJuKHsgLi4ub3B0aW9ucywgY2xpZW50UmVnaW9uLCBvdXRwb3N0SWQsIGFjY2Vzc3BvaW50TmFtZSwgaG9zdG5hbWVTdWZmaXggfSk7XG4gIH1cbiAgcmV0dXJuIGdldEVuZHBvaW50RnJvbUFjY2Vzc1BvaW50QXJuKHsgLi4ub3B0aW9ucywgY2xpZW50UmVnaW9uLCBhY2Nlc3Nwb2ludE5hbWUsIGhvc3RuYW1lU3VmZml4IH0pO1xufSwgXCJnZXRFbmRwb2ludEZyb21Bcm5cIik7XG52YXIgZ2V0RW5kcG9pbnRGcm9tT2JqZWN0TGFtYmRhQXJuID0gLyogQF9fUFVSRV9fICovIF9fbmFtZSgoe1xuICBkdWFsc3RhY2tFbmRwb2ludCA9IGZhbHNlLFxuICBmaXBzRW5kcG9pbnQgPSBmYWxzZSxcbiAgdGxzQ29tcGF0aWJsZSA9IHRydWUsXG4gIHVzZUFyblJlZ2lvbixcbiAgY2xpZW50UmVnaW9uLFxuICBjbGllbnRTaWduaW5nUmVnaW9uID0gY2xpZW50UmVnaW9uLFxuICBhY2Nlc3Nwb2ludE5hbWUsXG4gIGJ1Y2tldE5hbWUsXG4gIGhvc3RuYW1lU3VmZml4XG59KSA9PiB7XG4gIGNvbnN0IHsgYWNjb3VudElkLCByZWdpb24sIHNlcnZpY2UgfSA9IGJ1Y2tldE5hbWU7XG4gIHZhbGlkYXRlUmVnaW9uYWxDbGllbnQoY2xpZW50UmVnaW9uKTtcbiAgdmFsaWRhdGVSZWdpb24ocmVnaW9uLCB7XG4gICAgdXNlQXJuUmVnaW9uLFxuICAgIGNsaWVudFJlZ2lvbixcbiAgICBjbGllbnRTaWduaW5nUmVnaW9uLFxuICAgIGFsbG93Rmlwc1JlZ2lvbjogdHJ1ZSxcbiAgICB1c2VGaXBzRW5kcG9pbnQ6IGZpcHNFbmRwb2ludFxuICB9KTtcbiAgdmFsaWRhdGVOb0R1YWxzdGFjayhkdWFsc3RhY2tFbmRwb2ludCk7XG4gIGNvbnN0IEROU0hvc3RMYWJlbCA9IGAke2FjY2Vzc3BvaW50TmFtZX0tJHthY2NvdW50SWR9YDtcbiAgdmFsaWRhdGVETlNIb3N0TGFiZWwoRE5TSG9zdExhYmVsLCB7IHRsc0NvbXBhdGlibGUgfSk7XG4gIGNvbnN0IGVuZHBvaW50UmVnaW9uID0gdXNlQXJuUmVnaW9uID8gcmVnaW9uIDogY2xpZW50UmVnaW9uO1xuICBjb25zdCBzaWduaW5nUmVnaW9uID0gdXNlQXJuUmVnaW9uID8gcmVnaW9uIDogY2xpZW50U2lnbmluZ1JlZ2lvbjtcbiAgcmV0dXJuIHtcbiAgICBidWNrZXRFbmRwb2ludDogdHJ1ZSxcbiAgICBob3N0bmFtZTogYCR7RE5TSG9zdExhYmVsfS4ke3NlcnZpY2V9JHtmaXBzRW5kcG9pbnQgPyBcIi1maXBzXCIgOiBcIlwifS4ke2VuZHBvaW50UmVnaW9ufS4ke2hvc3RuYW1lU3VmZml4fWAsXG4gICAgc2lnbmluZ1JlZ2lvbixcbiAgICBzaWduaW5nU2VydmljZTogc2VydmljZVxuICB9O1xufSwgXCJnZXRFbmRwb2ludEZyb21PYmplY3RMYW1iZGFBcm5cIik7XG52YXIgZ2V0RW5kcG9pbnRGcm9tTVJBUEFybiA9IC8qIEBfX1BVUkVfXyAqLyBfX25hbWUoKHtcbiAgZGlzYWJsZU11bHRpcmVnaW9uQWNjZXNzUG9pbnRzLFxuICBkdWFsc3RhY2tFbmRwb2ludCA9IGZhbHNlLFxuICBpc0N1c3RvbUVuZHBvaW50LFxuICBtcmFwQWxpYXMsXG4gIGhvc3RuYW1lU3VmZml4XG59KSA9PiB7XG4gIGlmIChkaXNhYmxlTXVsdGlyZWdpb25BY2Nlc3NQb2ludHMgPT09IHRydWUpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJTREsgaXMgYXR0ZW1wdGluZyB0byB1c2UgYSBNUkFQIEFSTi4gUGxlYXNlIGVuYWJsZSB0byBmZWF0dXJlLlwiKTtcbiAgfVxuICB2YWxpZGF0ZU1yYXBBbGlhcyhtcmFwQWxpYXMpO1xuICB2YWxpZGF0ZU5vRHVhbHN0YWNrKGR1YWxzdGFja0VuZHBvaW50KTtcbiAgcmV0dXJuIHtcbiAgICBidWNrZXRFbmRwb2ludDogdHJ1ZSxcbiAgICBob3N0bmFtZTogYCR7bXJhcEFsaWFzfSR7aXNDdXN0b21FbmRwb2ludCA/IFwiXCIgOiBgLmFjY2Vzc3BvaW50LnMzLWdsb2JhbGB9LiR7aG9zdG5hbWVTdWZmaXh9YCxcbiAgICBzaWduaW5nUmVnaW9uOiBcIipcIlxuICB9O1xufSwgXCJnZXRFbmRwb2ludEZyb21NUkFQQXJuXCIpO1xudmFyIGdldEVuZHBvaW50RnJvbU91dHBvc3RBcm4gPSAvKiBAX19QVVJFX18gKi8gX19uYW1lKCh7XG4gIHVzZUFyblJlZ2lvbixcbiAgY2xpZW50UmVnaW9uLFxuICBjbGllbnRTaWduaW5nUmVnaW9uID0gY2xpZW50UmVnaW9uLFxuICBidWNrZXROYW1lLFxuICBvdXRwb3N0SWQsXG4gIGR1YWxzdGFja0VuZHBvaW50ID0gZmFsc2UsXG4gIGZpcHNFbmRwb2ludCA9IGZhbHNlLFxuICB0bHNDb21wYXRpYmxlID0gdHJ1ZSxcbiAgYWNjZXNzcG9pbnROYW1lLFxuICBpc0N1c3RvbUVuZHBvaW50LFxuICBob3N0bmFtZVN1ZmZpeFxufSkgPT4ge1xuICB2YWxpZGF0ZVJlZ2lvbmFsQ2xpZW50KGNsaWVudFJlZ2lvbik7XG4gIHZhbGlkYXRlUmVnaW9uKGJ1Y2tldE5hbWUucmVnaW9uLCB7IHVzZUFyblJlZ2lvbiwgY2xpZW50UmVnaW9uLCBjbGllbnRTaWduaW5nUmVnaW9uLCB1c2VGaXBzRW5kcG9pbnQ6IGZpcHNFbmRwb2ludCB9KTtcbiAgY29uc3QgRE5TSG9zdExhYmVsID0gYCR7YWNjZXNzcG9pbnROYW1lfS0ke2J1Y2tldE5hbWUuYWNjb3VudElkfWA7XG4gIHZhbGlkYXRlRE5TSG9zdExhYmVsKEROU0hvc3RMYWJlbCwgeyB0bHNDb21wYXRpYmxlIH0pO1xuICBjb25zdCBlbmRwb2ludFJlZ2lvbiA9IHVzZUFyblJlZ2lvbiA/IGJ1Y2tldE5hbWUucmVnaW9uIDogY2xpZW50UmVnaW9uO1xuICBjb25zdCBzaWduaW5nUmVnaW9uID0gdXNlQXJuUmVnaW9uID8gYnVja2V0TmFtZS5yZWdpb24gOiBjbGllbnRTaWduaW5nUmVnaW9uO1xuICB2YWxpZGF0ZU91dHBvc3RTZXJ2aWNlKGJ1Y2tldE5hbWUuc2VydmljZSk7XG4gIHZhbGlkYXRlRE5TSG9zdExhYmVsKG91dHBvc3RJZCwgeyB0bHNDb21wYXRpYmxlIH0pO1xuICB2YWxpZGF0ZU5vRHVhbHN0YWNrKGR1YWxzdGFja0VuZHBvaW50KTtcbiAgdmFsaWRhdGVOb0ZJUFMoZmlwc0VuZHBvaW50KTtcbiAgY29uc3QgaG9zdG5hbWVQcmVmaXggPSBgJHtETlNIb3N0TGFiZWx9LiR7b3V0cG9zdElkfWA7XG4gIHJldHVybiB7XG4gICAgYnVja2V0RW5kcG9pbnQ6IHRydWUsXG4gICAgaG9zdG5hbWU6IGAke2hvc3RuYW1lUHJlZml4fSR7aXNDdXN0b21FbmRwb2ludCA/IFwiXCIgOiBgLnMzLW91dHBvc3RzLiR7ZW5kcG9pbnRSZWdpb259YH0uJHtob3N0bmFtZVN1ZmZpeH1gLFxuICAgIHNpZ25pbmdSZWdpb24sXG4gICAgc2lnbmluZ1NlcnZpY2U6IFwiczMtb3V0cG9zdHNcIlxuICB9O1xufSwgXCJnZXRFbmRwb2ludEZyb21PdXRwb3N0QXJuXCIpO1xudmFyIGdldEVuZHBvaW50RnJvbUFjY2Vzc1BvaW50QXJuID0gLyogQF9fUFVSRV9fICovIF9fbmFtZSgoe1xuICB1c2VBcm5SZWdpb24sXG4gIGNsaWVudFJlZ2lvbixcbiAgY2xpZW50U2lnbmluZ1JlZ2lvbiA9IGNsaWVudFJlZ2lvbixcbiAgYnVja2V0TmFtZSxcbiAgZHVhbHN0YWNrRW5kcG9pbnQgPSBmYWxzZSxcbiAgZmlwc0VuZHBvaW50ID0gZmFsc2UsXG4gIHRsc0NvbXBhdGlibGUgPSB0cnVlLFxuICBhY2Nlc3Nwb2ludE5hbWUsXG4gIGlzQ3VzdG9tRW5kcG9pbnQsXG4gIGhvc3RuYW1lU3VmZml4XG59KSA9PiB7XG4gIHZhbGlkYXRlUmVnaW9uYWxDbGllbnQoY2xpZW50UmVnaW9uKTtcbiAgdmFsaWRhdGVSZWdpb24oYnVja2V0TmFtZS5yZWdpb24sIHtcbiAgICB1c2VBcm5SZWdpb24sXG4gICAgY2xpZW50UmVnaW9uLFxuICAgIGNsaWVudFNpZ25pbmdSZWdpb24sXG4gICAgYWxsb3dGaXBzUmVnaW9uOiB0cnVlLFxuICAgIHVzZUZpcHNFbmRwb2ludDogZmlwc0VuZHBvaW50XG4gIH0pO1xuICBjb25zdCBob3N0bmFtZVByZWZpeCA9IGAke2FjY2Vzc3BvaW50TmFtZX0tJHtidWNrZXROYW1lLmFjY291bnRJZH1gO1xuICB2YWxpZGF0ZUROU0hvc3RMYWJlbChob3N0bmFtZVByZWZpeCwgeyB0bHNDb21wYXRpYmxlIH0pO1xuICBjb25zdCBlbmRwb2ludFJlZ2lvbiA9IHVzZUFyblJlZ2lvbiA/IGJ1Y2tldE5hbWUucmVnaW9uIDogY2xpZW50UmVnaW9uO1xuICBjb25zdCBzaWduaW5nUmVnaW9uID0gdXNlQXJuUmVnaW9uID8gYnVja2V0TmFtZS5yZWdpb24gOiBjbGllbnRTaWduaW5nUmVnaW9uO1xuICB2YWxpZGF0ZVMzU2VydmljZShidWNrZXROYW1lLnNlcnZpY2UpO1xuICByZXR1cm4ge1xuICAgIGJ1Y2tldEVuZHBvaW50OiB0cnVlLFxuICAgIGhvc3RuYW1lOiBgJHtob3N0bmFtZVByZWZpeH0ke2lzQ3VzdG9tRW5kcG9pbnQgPyBcIlwiIDogYC5zMy1hY2Nlc3Nwb2ludCR7Zmlwc0VuZHBvaW50ID8gXCItZmlwc1wiIDogXCJcIn0ke2R1YWxzdGFja0VuZHBvaW50ID8gXCIuZHVhbHN0YWNrXCIgOiBcIlwifS4ke2VuZHBvaW50UmVnaW9ufWB9LiR7aG9zdG5hbWVTdWZmaXh9YCxcbiAgICBzaWduaW5nUmVnaW9uXG4gIH07XG59LCBcImdldEVuZHBvaW50RnJvbUFjY2Vzc1BvaW50QXJuXCIpO1xuXG4vLyBzcmMvYnVja2V0RW5kcG9pbnRNaWRkbGV3YXJlLnRzXG52YXIgYnVja2V0RW5kcG9pbnRNaWRkbGV3YXJlID0gLyogQF9fUFVSRV9fICovIF9fbmFtZSgob3B0aW9ucykgPT4gKG5leHQsIGNvbnRleHQpID0+IGFzeW5jIChhcmdzKSA9PiB7XG4gIGNvbnN0IHsgQnVja2V0OiBidWNrZXROYW1lIH0gPSBhcmdzLmlucHV0O1xuICBsZXQgcmVwbGFjZUJ1Y2tldEluUGF0aCA9IG9wdGlvbnMuYnVja2V0RW5kcG9pbnQ7XG4gIGNvbnN0IHJlcXVlc3QgPSBhcmdzLnJlcXVlc3Q7XG4gIGlmIChpbXBvcnRfcHJvdG9jb2xfaHR0cC5IdHRwUmVxdWVzdC5pc0luc3RhbmNlKHJlcXVlc3QpKSB7XG4gICAgaWYgKG9wdGlvbnMuYnVja2V0RW5kcG9pbnQpIHtcbiAgICAgIHJlcXVlc3QuaG9zdG5hbWUgPSBidWNrZXROYW1lO1xuICAgIH0gZWxzZSBpZiAoKDAsIGltcG9ydF91dGlsX2Fybl9wYXJzZXIudmFsaWRhdGUpKGJ1Y2tldE5hbWUpKSB7XG4gICAgICBjb25zdCBidWNrZXRBcm4gPSAoMCwgaW1wb3J0X3V0aWxfYXJuX3BhcnNlci5wYXJzZSkoYnVja2V0TmFtZSk7XG4gICAgICBjb25zdCBjbGllbnRSZWdpb24gPSBhd2FpdCBvcHRpb25zLnJlZ2lvbigpO1xuICAgICAgY29uc3QgdXNlRHVhbHN0YWNrRW5kcG9pbnQgPSBhd2FpdCBvcHRpb25zLnVzZUR1YWxzdGFja0VuZHBvaW50KCk7XG4gICAgICBjb25zdCB1c2VGaXBzRW5kcG9pbnQgPSBhd2FpdCBvcHRpb25zLnVzZUZpcHNFbmRwb2ludCgpO1xuICAgICAgY29uc3QgeyBwYXJ0aXRpb24sIHNpZ25pbmdSZWdpb24gPSBjbGllbnRSZWdpb24gfSA9IGF3YWl0IG9wdGlvbnMucmVnaW9uSW5mb1Byb3ZpZGVyKGNsaWVudFJlZ2lvbiwgeyB1c2VEdWFsc3RhY2tFbmRwb2ludCwgdXNlRmlwc0VuZHBvaW50IH0pIHx8IHt9O1xuICAgICAgY29uc3QgdXNlQXJuUmVnaW9uID0gYXdhaXQgb3B0aW9ucy51c2VBcm5SZWdpb24oKTtcbiAgICAgIGNvbnN0IHtcbiAgICAgICAgaG9zdG5hbWUsXG4gICAgICAgIGJ1Y2tldEVuZHBvaW50LFxuICAgICAgICBzaWduaW5nUmVnaW9uOiBtb2RpZmllZFNpZ25pbmdSZWdpb24sXG4gICAgICAgIHNpZ25pbmdTZXJ2aWNlXG4gICAgICB9ID0gYnVja2V0SG9zdG5hbWUoe1xuICAgICAgICBidWNrZXROYW1lOiBidWNrZXRBcm4sXG4gICAgICAgIGJhc2VIb3N0bmFtZTogcmVxdWVzdC5ob3N0bmFtZSxcbiAgICAgICAgYWNjZWxlcmF0ZUVuZHBvaW50OiBvcHRpb25zLnVzZUFjY2VsZXJhdGVFbmRwb2ludCxcbiAgICAgICAgZHVhbHN0YWNrRW5kcG9pbnQ6IHVzZUR1YWxzdGFja0VuZHBvaW50LFxuICAgICAgICBmaXBzRW5kcG9pbnQ6IHVzZUZpcHNFbmRwb2ludCxcbiAgICAgICAgcGF0aFN0eWxlRW5kcG9pbnQ6IG9wdGlvbnMuZm9yY2VQYXRoU3R5bGUsXG4gICAgICAgIHRsc0NvbXBhdGlibGU6IHJlcXVlc3QucHJvdG9jb2wgPT09IFwiaHR0cHM6XCIsXG4gICAgICAgIHVzZUFyblJlZ2lvbixcbiAgICAgICAgY2xpZW50UGFydGl0aW9uOiBwYXJ0aXRpb24sXG4gICAgICAgIGNsaWVudFNpZ25pbmdSZWdpb246IHNpZ25pbmdSZWdpb24sXG4gICAgICAgIGNsaWVudFJlZ2lvbixcbiAgICAgICAgaXNDdXN0b21FbmRwb2ludDogb3B0aW9ucy5pc0N1c3RvbUVuZHBvaW50LFxuICAgICAgICBkaXNhYmxlTXVsdGlyZWdpb25BY2Nlc3NQb2ludHM6IGF3YWl0IG9wdGlvbnMuZGlzYWJsZU11bHRpcmVnaW9uQWNjZXNzUG9pbnRzKClcbiAgICAgIH0pO1xuICAgICAgaWYgKG1vZGlmaWVkU2lnbmluZ1JlZ2lvbiAmJiBtb2RpZmllZFNpZ25pbmdSZWdpb24gIT09IHNpZ25pbmdSZWdpb24pIHtcbiAgICAgICAgY29udGV4dFtcInNpZ25pbmdfcmVnaW9uXCJdID0gbW9kaWZpZWRTaWduaW5nUmVnaW9uO1xuICAgICAgfVxuICAgICAgaWYgKHNpZ25pbmdTZXJ2aWNlICYmIHNpZ25pbmdTZXJ2aWNlICE9PSBcInMzXCIpIHtcbiAgICAgICAgY29udGV4dFtcInNpZ25pbmdfc2VydmljZVwiXSA9IHNpZ25pbmdTZXJ2aWNlO1xuICAgICAgfVxuICAgICAgcmVxdWVzdC5ob3N0bmFtZSA9IGhvc3RuYW1lO1xuICAgICAgcmVwbGFjZUJ1Y2tldEluUGF0aCA9IGJ1Y2tldEVuZHBvaW50O1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBjbGllbnRSZWdpb24gPSBhd2FpdCBvcHRpb25zLnJlZ2lvbigpO1xuICAgICAgY29uc3QgZHVhbHN0YWNrRW5kcG9pbnQgPSBhd2FpdCBvcHRpb25zLnVzZUR1YWxzdGFja0VuZHBvaW50KCk7XG4gICAgICBjb25zdCBmaXBzRW5kcG9pbnQgPSBhd2FpdCBvcHRpb25zLnVzZUZpcHNFbmRwb2ludCgpO1xuICAgICAgY29uc3QgeyBob3N0bmFtZSwgYnVja2V0RW5kcG9pbnQgfSA9IGJ1Y2tldEhvc3RuYW1lKHtcbiAgICAgICAgYnVja2V0TmFtZSxcbiAgICAgICAgY2xpZW50UmVnaW9uLFxuICAgICAgICBiYXNlSG9zdG5hbWU6IHJlcXVlc3QuaG9zdG5hbWUsXG4gICAgICAgIGFjY2VsZXJhdGVFbmRwb2ludDogb3B0aW9ucy51c2VBY2NlbGVyYXRlRW5kcG9pbnQsXG4gICAgICAgIGR1YWxzdGFja0VuZHBvaW50LFxuICAgICAgICBmaXBzRW5kcG9pbnQsXG4gICAgICAgIHBhdGhTdHlsZUVuZHBvaW50OiBvcHRpb25zLmZvcmNlUGF0aFN0eWxlLFxuICAgICAgICB0bHNDb21wYXRpYmxlOiByZXF1ZXN0LnByb3RvY29sID09PSBcImh0dHBzOlwiLFxuICAgICAgICBpc0N1c3RvbUVuZHBvaW50OiBvcHRpb25zLmlzQ3VzdG9tRW5kcG9pbnRcbiAgICAgIH0pO1xuICAgICAgcmVxdWVzdC5ob3N0bmFtZSA9IGhvc3RuYW1lO1xuICAgICAgcmVwbGFjZUJ1Y2tldEluUGF0aCA9IGJ1Y2tldEVuZHBvaW50O1xuICAgIH1cbiAgICBpZiAocmVwbGFjZUJ1Y2tldEluUGF0aCkge1xuICAgICAgcmVxdWVzdC5wYXRoID0gcmVxdWVzdC5wYXRoLnJlcGxhY2UoL14oXFwvKT9bXlxcL10rLywgXCJcIik7XG4gICAgICBpZiAocmVxdWVzdC5wYXRoID09PSBcIlwiKSB7XG4gICAgICAgIHJlcXVlc3QucGF0aCA9IFwiL1wiO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICByZXR1cm4gbmV4dCh7IC4uLmFyZ3MsIHJlcXVlc3QgfSk7XG59LCBcImJ1Y2tldEVuZHBvaW50TWlkZGxld2FyZVwiKTtcbnZhciBidWNrZXRFbmRwb2ludE1pZGRsZXdhcmVPcHRpb25zID0ge1xuICB0YWdzOiBbXCJCVUNLRVRfRU5EUE9JTlRcIl0sXG4gIG5hbWU6IFwiYnVja2V0RW5kcG9pbnRNaWRkbGV3YXJlXCIsXG4gIHJlbGF0aW9uOiBcImJlZm9yZVwiLFxuICB0b01pZGRsZXdhcmU6IFwiaG9zdEhlYWRlck1pZGRsZXdhcmVcIixcbiAgb3ZlcnJpZGU6IHRydWVcbn07XG52YXIgZ2V0QnVja2V0RW5kcG9pbnRQbHVnaW4gPSAvKiBAX19QVVJFX18gKi8gX19uYW1lKChvcHRpb25zKSA9PiAoe1xuICBhcHBseVRvU3RhY2s6IChjbGllbnRTdGFjaykgPT4ge1xuICAgIGNsaWVudFN0YWNrLmFkZFJlbGF0aXZlVG8oYnVja2V0RW5kcG9pbnRNaWRkbGV3YXJlKG9wdGlvbnMpLCBidWNrZXRFbmRwb2ludE1pZGRsZXdhcmVPcHRpb25zKTtcbiAgfVxufSksIFwiZ2V0QnVja2V0RW5kcG9pbnRQbHVnaW5cIik7XG5cbi8vIHNyYy9jb25maWd1cmF0aW9ucy50c1xuZnVuY3Rpb24gcmVzb2x2ZUJ1Y2tldEVuZHBvaW50Q29uZmlnKGlucHV0KSB7XG4gIGNvbnN0IHtcbiAgICBidWNrZXRFbmRwb2ludCA9IGZhbHNlLFxuICAgIGZvcmNlUGF0aFN0eWxlID0gZmFsc2UsXG4gICAgdXNlQWNjZWxlcmF0ZUVuZHBvaW50ID0gZmFsc2UsXG4gICAgdXNlQXJuUmVnaW9uID0gZmFsc2UsXG4gICAgZGlzYWJsZU11bHRpcmVnaW9uQWNjZXNzUG9pbnRzID0gZmFsc2VcbiAgfSA9IGlucHV0O1xuICByZXR1cm4ge1xuICAgIC4uLmlucHV0LFxuICAgIGJ1Y2tldEVuZHBvaW50LFxuICAgIGZvcmNlUGF0aFN0eWxlLFxuICAgIHVzZUFjY2VsZXJhdGVFbmRwb2ludCxcbiAgICB1c2VBcm5SZWdpb246IHR5cGVvZiB1c2VBcm5SZWdpb24gPT09IFwiZnVuY3Rpb25cIiA/IHVzZUFyblJlZ2lvbiA6ICgpID0+IFByb21pc2UucmVzb2x2ZSh1c2VBcm5SZWdpb24pLFxuICAgIGRpc2FibGVNdWx0aXJlZ2lvbkFjY2Vzc1BvaW50czogdHlwZW9mIGRpc2FibGVNdWx0aXJlZ2lvbkFjY2Vzc1BvaW50cyA9PT0gXCJmdW5jdGlvblwiID8gZGlzYWJsZU11bHRpcmVnaW9uQWNjZXNzUG9pbnRzIDogKCkgPT4gUHJvbWlzZS5yZXNvbHZlKGRpc2FibGVNdWx0aXJlZ2lvbkFjY2Vzc1BvaW50cylcbiAgfTtcbn1cbl9fbmFtZShyZXNvbHZlQnVja2V0RW5kcG9pbnRDb25maWcsIFwicmVzb2x2ZUJ1Y2tldEVuZHBvaW50Q29uZmlnXCIpO1xuLy8gQW5ub3RhdGUgdGhlIENvbW1vbkpTIGV4cG9ydCBuYW1lcyBmb3IgRVNNIGltcG9ydCBpbiBub2RlOlxuXG4wICYmIChtb2R1bGUuZXhwb3J0cyA9IHtcbiAgZ2V0QXJuUmVzb3VyY2VzLFxuICBnZXRTdWZmaXhGb3JBcm5FbmRwb2ludCxcbiAgdmFsaWRhdGVPdXRwb3N0U2VydmljZSxcbiAgdmFsaWRhdGVQYXJ0aXRpb24sXG4gIHZhbGlkYXRlQWNjb3VudElkLFxuICB2YWxpZGF0ZVJlZ2lvbixcbiAgdmFsaWRhdGVETlNIb3N0TGFiZWwsXG4gIHZhbGlkYXRlTm9EdWFsc3RhY2ssXG4gIHZhbGlkYXRlTm9GSVBTLFxuICBOT0RFX0RJU0FCTEVfTVVMVElSRUdJT05fQUNDRVNTX1BPSU5UX0VOVl9OQU1FLFxuICBOT0RFX0RJU0FCTEVfTVVMVElSRUdJT05fQUNDRVNTX1BPSU5UX0lOSV9OQU1FLFxuICBOT0RFX0RJU0FCTEVfTVVMVElSRUdJT05fQUNDRVNTX1BPSU5UX0NPTkZJR19PUFRJT05TLFxuICBOT0RFX1VTRV9BUk5fUkVHSU9OX0VOVl9OQU1FLFxuICBOT0RFX1VTRV9BUk5fUkVHSU9OX0lOSV9OQU1FLFxuICBOT0RFX1VTRV9BUk5fUkVHSU9OX0NPTkZJR19PUFRJT05TLFxuICBidWNrZXRFbmRwb2ludE1pZGRsZXdhcmUsXG4gIGJ1Y2tldEVuZHBvaW50TWlkZGxld2FyZU9wdGlvbnMsXG4gIGdldEJ1Y2tldEVuZHBvaW50UGx1Z2luLFxuICBidWNrZXRIb3N0bmFtZSxcbiAgcmVzb2x2ZUJ1Y2tldEVuZHBvaW50Q29uZmlnXG59KTtcblxuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/../../../../node_modules/.pnpm/@aws-sdk+middleware-bucket-endpoint@3.714.0/node_modules/@aws-sdk/middleware-bucket-endpoint/dist-cjs/index.js\n");

/***/ })

};
;